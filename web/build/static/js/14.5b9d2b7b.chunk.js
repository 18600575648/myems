(this.webpackJsonpmyems=this.webpackJsonpmyems||[]).push([[14],{1547:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1017),T=a(1034),D=a(294),x=a(1616),N=a(1620),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(void 0),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(M.clone().startOf("month")),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(M),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(void 0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)(!0),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)(!0),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)([]),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),Ae=Object(r.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(o.useState)(void 0),Ge=Object(r.a)(Be,2),Ve=Ge[0],Le=Ge[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),je(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})));var a=!1;fetch(q.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))}else L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Je=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},qe=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},ze=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},Ke=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},We={custom:!0,sizePerPage:10,totalSize:Re.length},Ze=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Xe=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ze,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ze,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},$e="ls text-uppercase text-600 font-weight-semi-bold mb-0",Qe=Object(o.createRef)(),et=Object(o.useState)(!1),tt=Object(r.a)(et,2),at=tt[0],nt=tt[1],rt=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},ot=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},it=function(){e((function(){nt(!!Qe.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Combined Equipment Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ce),console.log(ue.format("YYYY-MM-DDTHH:mm:ss")),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),Se(!0),xe(!1),Me(!0),Fe([]);var t=!1;fetch(q.a+"/reports/fddcombinedequipmentfault?combinedequipmentid"+ce+"&reportingperiodstartdatetime="+ue.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+fe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),Se(!1),xe(!0),Me(!1),e.json()})).then((function(e){t?(console.log(e),Fe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),we([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:Je,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:qe,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:ze,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:Ke,align:"right"}]),Le(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:Oe,onChange:function(e,t){Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1]);var a=!1;fetch(q.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement(y.a,{className:$e,for:"combinedEquipmentSelect"},k("Combined Equipment")),i.a.createElement(Y.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return le(t.value)}},ne.map((function(e,t){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ue,onChange:function(e){de(e)},isValidDate:function(e){return e.isBefore(U()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:fe,onChange:function(e){ge(e)},isValidDate:function(e){return e.isAfter(U()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(T.a,{id:"submit"},i.a.createElement(D.a,{color:"success",disabled:ye},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(x.a,{color:"primary",hidden:De}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ce,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ve).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentfault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},at?i.a.createElement(N.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(Y.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(We)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Qe,bootstrap4:!0,keyField:"id",data:Re,columns:Ie,selectRow:Xe(it),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(D.a,{color:"falcon-default",size:"sm",onClick:ot(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(D.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:rt(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1591:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1017),T=a(1034),D=a(294),x=a(1616),N=a(1620),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(void 0),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(M.clone().startOf("month")),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(M),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(void 0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)(!0),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)(!0),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)([]),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),Ae=Object(r.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(o.useState)(void 0),Ge=Object(r.a)(Be,2),Ve=Ge[0],Le=Ge[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),je(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})));var a=!1;fetch(q.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))}else L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Je=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},qe=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},ze=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},Ke=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},We={custom:!0,sizePerPage:10,totalSize:Re.length},Ze=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Xe=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ze,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ze,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},$e="ls text-uppercase text-600 font-weight-semi-bold mb-0",Qe=Object(o.createRef)(),et=Object(o.useState)(!1),tt=Object(r.a)(et,2),at=tt[0],nt=tt[1],rt=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},ot=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},it=function(){e((function(){nt(!!Qe.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Equipment Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ce),console.log(ue.format("YYYY-MM-DDTHH:mm:ss")),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),Se(!0),xe(!1),Me(!0),Fe([]);var t=!1;fetch(q.a+"/reports/fddequipmentfault?equipmentid"+ce+"&reportingperiodstartdatetime="+ue.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+fe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),Se(!1),xe(!0),Me(!1),e.json()})).then((function(e){t?(console.log(e),Fe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),we([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:Je,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:qe,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:ze,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:Ke,align:"right"}]),Le(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:Oe,onChange:function(e,t){Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1]);var a=!1;fetch(q.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement(y.a,{className:$e,for:"equipmentSelect"},k("Equipment")),i.a.createElement(Y.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return le(t.value)}},ne.map((function(e,t){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ue,onChange:function(e){de(e)},isValidDate:function(e){return e.isBefore(U()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:fe,onChange:function(e){ge(e)},isValidDate:function(e){return e.isAfter(U()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(T.a,{id:"submit"},i.a.createElement(D.a,{color:"success",disabled:ye},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(x.a,{color:"primary",hidden:De}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ce,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ve).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentfault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},at?i.a.createElement(N.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(Y.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(We)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Qe,bootstrap4:!0,keyField:"id",data:Re,columns:Ie,selectRow:Xe(it),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(D.a,{color:"falcon-default",size:"sm",onClick:ot(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(D.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:rt(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1592:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1034),T=a(294),D=a(1616),x=a(1620),N=a(1017),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)(M.clone().startOf("month")),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(M),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(void 0),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(!0),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(!0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)([]),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)(void 0),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ge(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),de(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})))):L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var He=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},Ae=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},Ie=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},we=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},Be={custom:!0,sizePerPage:10,totalSize:De.length},Ge=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Ve=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ge,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ge,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},Le="ls text-uppercase text-600 font-weight-semi-bold mb-0",Je=Object(o.createRef)(),qe=Object(o.useState)(!1),ze=Object(r.a)(qe,2),Ke=ze[0],We=ze[1],Ze=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},Xe=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},$e=function(){e((function(){We(!!Je.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Space Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ne.format("YYYY-MM-DDTHH:mm:ss")),console.log(ce.format("YYYY-MM-DDTHH:mm:ss")),ge(!0),je(!1),Se(!0),xe([]);var t=!1;fetch(q.a+"/reports/fddspacefault?spaceid="+Q+"&reportingperiodstartdatetime="+ne.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ce.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),ge(!1),je(!0),Se(!1),e.json()})).then((function(e){t?(console.log(e),xe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),Me([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:He,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:Ae,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:Ie,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:we,align:"right"}]),Fe(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:Le,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:ue,onChange:function(e,t){console.log(e,t),Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:Le,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ne,onChange:function(e){re(e)},isValidDate:function(e){return e.isBefore(U()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:Le,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:ce,onChange:function(e){le(e)},isValidDate:function(e){return e.isAfter(U()(ne,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(Y.a,{id:"submit"},i.a.createElement(T.a,{color:"success",disabled:fe},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(D.a,{color:"primary",hidden:Oe}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ye,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Re).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacefault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},Ke?i.a.createElement(x.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(N.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(T.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(Be)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Je,bootstrap4:!0,keyField:"id",data:De,columns:Ce,selectRow:Ve($e),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(T.a,{color:"falcon-default",size:"sm",onClick:Xe(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(T.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(T.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:Ze(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1593:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1017),T=a(1034),D=a(294),x=a(1616),N=a(1620),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(void 0),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(M.clone().startOf("month")),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(M),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(void 0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)(!0),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)(!0),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)([]),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),Ae=Object(r.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(o.useState)(void 0),Ge=Object(r.a)(Be,2),Ve=Ge[0],Le=Ge[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),je(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})));var a=!1;fetch(q.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))}else L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Je=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},qe=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},ze=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},Ke=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},We={custom:!0,sizePerPage:10,totalSize:Re.length},Ze=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Xe=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ze,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ze,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},$e="ls text-uppercase text-600 font-weight-semi-bold mb-0",Qe=Object(o.createRef)(),et=Object(o.useState)(!1),tt=Object(r.a)(et,2),at=tt[0],nt=tt[1],rt=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},ot=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},it=function(){e((function(){nt(!!Qe.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Tenant Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ce),console.log(ue.format("YYYY-MM-DDTHH:mm:ss")),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),Se(!0),xe(!1),Me(!0),Fe([]);var t=!1;fetch(q.a+"/reports/fddtenantfault?tenantid"+ce+"&reportingperiodstartdatetime="+ue.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+fe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),Se(!1),xe(!0),Me(!1),e.json()})).then((function(e){t?(console.log(e),Fe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),we([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:Je,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:qe,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:ze,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:Ke,align:"right"}]),Le(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:Oe,onChange:function(e,t){Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1]);var a=!1;fetch(q.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement(y.a,{className:$e,for:"tenantSelect"},k("Tenant")),i.a.createElement(Y.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return le(t.value)}},ne.map((function(e,t){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ue,onChange:function(e){de(e)},isValidDate:function(e){return e.isBefore(U()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:fe,onChange:function(e){ge(e)},isValidDate:function(e){return e.isAfter(U()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(T.a,{id:"submit"},i.a.createElement(D.a,{color:"success",disabled:ye},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(x.a,{color:"primary",hidden:De}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ce,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ve).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantfault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},at?i.a.createElement(N.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(Y.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(We)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Qe,bootstrap4:!0,keyField:"id",data:Re,columns:Ie,selectRow:Xe(it),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(D.a,{color:"falcon-default",size:"sm",onClick:ot(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(D.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:rt(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1594:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1017),T=a(1034),D=a(294),x=a(1616),N=a(1620),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(void 0),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(M.clone().startOf("month")),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(M),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(void 0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)(!0),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)(!0),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)([]),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),Ae=Object(r.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(o.useState)(void 0),Ge=Object(r.a)(Be,2),Ve=Ge[0],Le=Ge[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),je(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})));var a=!1;fetch(q.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))}else L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Je=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},qe=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},ze=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},Ke=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},We={custom:!0,sizePerPage:10,totalSize:Re.length},Ze=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Xe=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ze,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ze,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},$e="ls text-uppercase text-600 font-weight-semi-bold mb-0",Qe=Object(o.createRef)(),et=Object(o.useState)(!1),tt=Object(r.a)(et,2),at=tt[0],nt=tt[1],rt=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},ot=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},it=function(){e((function(){nt(!!Qe.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Store Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ce),console.log(ue.format("YYYY-MM-DDTHH:mm:ss")),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),Se(!0),xe(!1),Me(!0),Fe([]);var t=!1;fetch(q.a+"/reports/fddstorefault?storeid"+ce+"&reportingperiodstartdatetime="+ue.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+fe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),Se(!1),xe(!0),Me(!1),e.json()})).then((function(e){t?(console.log(e),Fe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),we([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:Je,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:qe,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:ze,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:Ke,align:"right"}]),Le(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:Oe,onChange:function(e,t){Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1]);var a=!1;fetch(q.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement(y.a,{className:$e,for:"storeSelect"},k("Store")),i.a.createElement(Y.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return le(t.value)}},ne.map((function(e,t){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ue,onChange:function(e){de(e)},isValidDate:function(e){return e.isBefore(U()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:fe,onChange:function(e){ge(e)},isValidDate:function(e){return e.isAfter(U()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(T.a,{id:"submit"},i.a.createElement(D.a,{color:"success",disabled:ye},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(x.a,{color:"primary",hidden:De}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ce,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ve).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storefault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},at?i.a.createElement(N.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(Y.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(We)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Qe,bootstrap4:!0,keyField:"id",data:Re,columns:Ie,selectRow:Xe(it),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(D.a,{color:"falcon-default",size:"sm",onClick:ot(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(D.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:rt(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1595:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(1021),d=a(1016),p=a(1014),b=a(518),f=a(1614),g=a(1615),h=a(299),E=a(290),O=a(1024),j=a(300),v=a(171),_=a(1075),y=a(1018),S=a(1025),Y=a(1017),T=a(1034),D=a(294),x=a(1616),N=a(1620),k=a(1039),C=a.n(k),M=a(111),U=a.n(M),P=a(1038),R=a(13),F=a(521),H=a(23),A=a(46),I=a(31),w=a.n(I),B=a(5),G=a(301),V=a(1036),L=a(74),J=a(172),q=a(22),z=["indeterminate","rowIndex"],K=["mode"],W=["mode"];t.a=Object(V.a)()(Object(G.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,k=t.t,M=U()();Object(o.useEffect)((function(){var e=Object(B.e)("is_logged_in"),t=Object(B.e)("user_name"),n=Object(B.e)("user_display_name"),r=Object(B.e)("user_uuid"),o=Object(B.e)("token");null!==e&&e?(Object(B.d)("is_logged_in",!0,288e5),Object(B.d)("user_name",t,288e5),Object(B.d)("user_display_name",n,288e5),Object(B.d)("user_uuid",r,288e5),Object(B.d)("token",o,288e5)):(s("/authentication/basic/login"),a(!0))}));var I=Object(o.useState)(void 0),G=Object(r.a)(I,2),V=G[0],Z=G[1],X=Object(o.useState)(void 0),$=Object(r.a)(X,2),Q=$[0],ee=$[1],te=Object(o.useState)([]),ae=Object(r.a)(te,2),ne=ae[0],re=ae[1],oe=Object(o.useState)(void 0),ie=Object(r.a)(oe,2),ce=ie[0],le=ie[1],se=Object(o.useState)(M.clone().startOf("month")),me=Object(r.a)(se,2),ue=me[0],de=me[1],pe=Object(o.useState)(M),be=Object(r.a)(pe,2),fe=be[0],ge=be[1],he=Object(o.useState)(void 0),Ee=Object(r.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(o.useState)(!0),_e=Object(r.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(o.useState)(!0),Te=Object(r.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(o.useState)(!0),ke=Object(r.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(o.useState)([]),Pe=Object(r.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(o.useState)([{dataField:"startdatetime",text:k("Datetime"),sort:!0}]),Ae=Object(r.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(o.useState)(void 0),Ge=Object(r.a)(Be,2),Ve=Ge[0],Le=Ge[1];Object(o.useEffect)((function(){var e=!1;fetch(q.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),je(t),Z([t[0]].map((function(e){return e.label}))),ee([t[0]].map((function(e){return e.value})));var a=!1;fetch(q.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))}else L.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Je=function(e,t){var a=t.id,n=t.name,r=t.email;return i.a.createElement(o.Fragment,null,i.a.createElement(R.b,{to:"/e-commerce/order-details"},i.a.createElement("strong",null,"#",a))," ","by ",i.a.createElement("strong",null,n),i.a.createElement("br",null),i.a.createElement("a",{href:"mailto:".concat(r)},r))},qe=function(e,t){var a=t.shippingType;return i.a.createElement(o.Fragment,null,e,i.a.createElement("p",{className:"mb-0 text-500"},a))},ze=function(e){var t="",a="",n="";switch(e){case"success":t="success",a="check",n="Completed";break;case"hold":t="secondary",a="ban",n="On hold";break;case"processing":t="primary",a="redo",n="Processing";break;case"pending":t="warning",a="stream",n="Pending";break;default:t="warning",a="stream",n="Pending"}return i.a.createElement(F.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(H.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},Ke=function(e,t){var a=t.id;return i.a.createElement(u.a,null,i.a.createElement(d.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(H.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(p.a,{right:!0,className:"border py-2"},i.a.createElement(b.a,{onClick:function(){return console.log("Completed: ",a)}},"Completed"),i.a.createElement(b.a,{onClick:function(){return console.log("Processing: ",a)}},"Processing"),i.a.createElement(b.a,{onClick:function(){return console.log("On hold: ",a)}},"On hold"),i.a.createElement(b.a,{onClick:function(){return console.log("Pending: ",a)}},"Pending"),i.a.createElement(b.a,{divider:!0}),i.a.createElement(b.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},"Delete")))},We={custom:!0,sizePerPage:10,totalSize:Re.length},Ze=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,z));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},Xe=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,K);return i.a.createElement(Ze,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,W);return i.a.createElement(Ze,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},$e="ls text-uppercase text-600 font-weight-semi-bold mb-0",Qe=Object(o.createRef)(),et=Object(o.useState)(!1),tt=Object(r.a)(et,2),at=tt[0],nt=tt[1],rt=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},ot=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},it=function(){e((function(){nt(!!Qe.current.selectionContext.selected.length)}))};return i.a.createElement(o.Fragment,null,i.a.createElement("div",null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,k("Fault Detection & Diagnostics")),i.a.createElement(g.a,{active:!0},k("Shopfloor Faults Data")))),i.a.createElement(h.a,{className:"bg-light mb-3"},i.a.createElement(E.a,{className:"p-3"},i.a.createElement(O.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(Q),console.log(ce),console.log(ue.format("YYYY-MM-DDTHH:mm:ss")),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),Se(!0),xe(!1),Me(!0),Fe([]);var t=!1;fetch(q.a+"/reports/fddshopfloorfault?shopfloorid"+ce+"&reportingperiodstartdatetime="+ue.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+fe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),Se(!1),xe(!0),Me(!1),e.json()})).then((function(e){t?(console.log(e),Fe([{id:w()().split("-")[0],name:"Ricky Antony",email:"ricky@example.com",date:"20/04/2019",address:"Ricky Antony, 2392 Main Avenue, Penasauka, New Jersey 02149",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Kin Rossow",email:"kin@example.com",date:"20/04/2019",address:"Kin Rossow, 1 Hollywood Blvd,Beverly Hills, California 90210",shippingType:"Via Free Shipping",status:"success",amount:120},{id:w()().split("-")[0],name:"Merry Diana",email:"merry@example.com",date:"30/04/2019",address:"Merry Diana, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:70},{id:w()().split("-")[0],name:"Bucky Robert",email:"bucky@example.com",date:"30/04/2019",address:"Bucky Robert, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"pending",amount:92},{id:w()().split("-")[0],name:"Rocky Zampa",email:"rocky@example.com",date:"30/04/2019",address:"Rocky Zampa, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Road",status:"hold",amount:120},{id:w()().split("-")[0],name:"Ricky John",email:"ricky@example.com",date:"30/04/2019",address:"Ricky John, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Free Shipping",status:"processing",amount:145},{id:w()().split("-")[0],name:"Cristofer Henric",email:"cristofer@example.com",date:"30/04/2019",address:"Cristofer Henric, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brate Lee",email:"lee@example.com",date:"29/04/2019",address:"Brate Lee, 1 Infinite Loop, Cupertino, California 90210",shippingType:"Via Link Road",status:"hold",amount:90},{id:w()().split("-")[0],name:"Thomas Stephenson",email:"Stephenson@example.com",date:"29/04/2019",address:"Thomas Stephenson, 116 Ballifeary Road, Bamff",shippingType:"Via Flat Rate",status:"processing",amount:52},{id:w()().split("-")[0],name:"Evie Singh",email:"eviewsing@example.com",date:"29/04/2019",address:"Evie Singh, 54 Castledore Road, Tunstead",shippingType:"Via Flat Rate",status:"success",amount:90},{id:w()().split("-")[0],name:"David Peters",email:"peter@example.com",date:"29/04/2019",address:"David Peters, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Link Road",status:"success",amount:69},{id:w()().split("-")[0],name:"Jennifer Johnson",email:"jennifer@example.com",date:"28/04/2019",address:"Jennifer Johnson, Rhyd Y Groes, Rhosgoch, LL66 0AT",shippingType:"Via Flat Rate",status:"processing",amount:112},{id:w()().split("-")[0],name:" Demarcus Okuneva",email:"okuneva@example.com",date:"28/04/2019",address:" Demarcus Okuneva, 90555 Upton Drive Jeffreyview, UT 08771",shippingType:"Via Flat Rate",status:"success",amount:99},{id:w()().split("-")[0],name:"Simeon Harber",email:"simeon@example.com",date:"27/04/2019",address:"Simeon Harber, 702 Kunde Plain Apt. 634 East Bridgetview, HI 13134-1862",shippingType:"Via Free Shipping",status:"hold",amount:129},{id:w()().split("-")[0],name:"Lavon Haley",email:"lavon@example.com",date:"27/04/2019",address:"Lavon Haley, 30998 Adonis Locks McGlynnside, ID 27241",shippingType:"Via Free Shipping",status:"pending",amount:70},{id:w()().split("-")[0],name:"Ashley Kirlin",email:"ashley@example.com",date:"26/04/2019",address:"Ashley Kirlin, 43304 Prosacco Shore South Dejuanfurt, MO 18623-0505",shippingType:"Via Link Road",status:"processing",amount:39},{id:w()().split("-")[0],name:"Johnnie Considine",email:"johnnie@example.com",date:"26/04/2019",address:"Johnnie Considine, 6008 Hermann Points Suite 294 Hansenville, TN 14210",shippingType:"Via Flat Rate",status:"pending",amount:70},{id:w()().split("-")[0],name:"Trace Farrell",email:"trace@example.com",date:"26/04/2019",address:"Trace Farrell, 431 Steuber Mews Apt. 252 Germanland, AK 25882",shippingType:"Via Free Shipping",status:"success",amount:70},{id:w()().split("-")[0],name:"Estell Nienow",email:"nienow@example.com",date:"26/04/2019",address:"Estell Nienow, 4167 Laverna Manor Marysemouth, NV 74590",shippingType:"Via Free Shipping",status:"success",amount:59},{id:w()().split("-")[0],name:"Daisha Howe",email:"howe@example.com",date:"25/04/2019",address:"Daisha Howe, 829 Lavonne Valley Apt. 074 Stehrfort, RI 77914-0379",shippingType:"Via Free Shipping",status:"success",amount:39},{id:w()().split("-")[0],name:"Miles Haley",email:"haley@example.com",date:"24/04/2019",address:"Miles Haley, 53150 Thad Squares Apt. 263 Archibaldfort, MO 00837",shippingType:"Via Flat Rate",status:"success",amount:55},{id:w()().split("-")[0],name:"Brenda Watsica",email:"watsica@example.com",date:"24/04/2019",address:"Brenda Watsica, 9198 O'Kon Harbors Morarborough, IA 75409-7383",shippingType:"Via Free Shipping",status:"success",amount:89},{id:w()().split("-")[0],name:"Ellie O'Reilly",email:"ellie@example.com",date:"24/04/2019",address:"Ellie O'Reilly, 1478 Kaitlin Haven Apt. 061 Lake Muhammadmouth, SC 35848",shippingType:"Via Free Shipping",status:"success",amount:47},{id:w()().split("-")[0],name:"Garry Brainstrow",email:"garry@example.com",date:"23/04/2019",address:"Garry Brainstrow, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"success",amount:139},{id:w()().split("-")[0],name:"Estell Pollich",email:"estell@example.com",date:"23/04/2019",address:"Estell Pollich, 13572 Kurt Mews South Merritt, IA 52491",shippingType:"Via Free Shipping",status:"hold",amount:49},{id:w()().split("-")[0],name:"Ara Mueller",email:"ara@example.com",date:"23/04/2019",address:"Ara Mueller, 91979 Kohler Place Waelchiborough, CT 41291",shippingType:"Via Flat Rate",status:"hold",amount:19},{id:w()().split("-")[0],name:"Lucienne Blick",email:"blick@example.com",date:"23/04/2019",address:"Lucienne Blick, 6757 Giuseppe Meadows Geraldinemouth, MO 48819-4970",shippingType:"Via Flat Rate",status:"hold",amount:59},{id:w()().split("-")[0],name:"Laverne Haag",email:"haag@example.com",date:"22/04/2019",address:"Laverne Haag, 2327 Kaylee Mill East Citlalli, AZ 89582-3143",shippingType:"Via Flat Rate",status:"hold",amount:49},{id:w()().split("-")[0],name:"Brandon Bednar",email:"bednar@example.com",date:"22/04/2019",address:"Brandon Bednar, 25156 Isaac Crossing Apt. 810 Lonborough, CO 83774-5999",shippingType:"Via Flat Rate",status:"hold",amount:39},{id:w()().split("-")[0],name:"Dimitri Boehm",email:"dimitri@example.com",date:"23/04/2019",address:"Dimitri Boehm, 71603 Wolff Plains Apt. 885 Johnstonton, MI 01581",shippingType:"Via Flat Rate",status:"hold",amount:111}]),we([{dataField:"id",text:"Space",classes:"py-2 align-middle",formatter:Je,sort:!0},{dataField:"date",text:"Date",classes:"py-2 align-middle",sort:!0},{dataField:"address",text:"Description",classes:"py-2 align-middle",formatter:qe,sort:!0},{dataField:"status",text:"Status",classes:"py-2 align-middle",formatter:ze,sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:Ke,align:"right"}]),Le(e.excel_bytes_base64)):L.c.error(e.description)})).catch((function(e){console.log(e)}))}},i.a.createElement(j.a,{form:!0},i.a.createElement(v.a,{xs:6,sm:3},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"space"},k("Space")),i.a.createElement("br",null),i.a.createElement(P.a,{options:Oe,onChange:function(e,t){Z(t.map((function(e){return e.label})).join("/")),ee(e[e.length-1]);var a=!1;fetch(q.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(B.e)("user_uuid"),Token:Object(B.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),re(e[0]),e[0].length>0?(le(e[0][0].value),Se(!1)):(le(void 0),Se(!0))):L.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},i.a.createElement(S.a,{value:V||"",readOnly:!0})))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement(y.a,{className:$e,for:"shopfloorSelect"},k("Shopfloor")),i.a.createElement(Y.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return le(t.value)}},ne.map((function(e,t){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodBeginsDatetime"},k("Reporting Period Begins")),i.a.createElement(C.a,{id:"reportingPeriodBeginsDatetime",value:ue,onChange:function(e){de(e)},isValidDate:function(e){return e.isBefore(U()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,{className:"form-group"},i.a.createElement(y.a,{className:$e,for:"reportingPeriodEndsDatetime"},k("Reporting Period Ends")),i.a.createElement(C.a,{id:"reportingPeriodEndsDatetime",value:fe,onChange:function(e){ge(e)},isValidDate:function(e){return e.isAfter(U()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(T.a,{id:"submit"},i.a.createElement(D.a,{color:"success",disabled:ye},k("Submit"))))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement(_.a,null,i.a.createElement("br",null),i.a.createElement(x.a,{color:"primary",hidden:De}))),i.a.createElement(v.a,{xs:"auto"},i.a.createElement("br",null),i.a.createElement(J.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ce,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ve).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorfault.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},k("Export"))))))),i.a.createElement(h.a,{className:"mb-3"},i.a.createElement(A.a,{title:k("Fault List"),light:!1},at?i.a.createElement(N.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(Y.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,"Bulk actions"),i.a.createElement("option",{value:"Refund"},"Refund"),i.a.createElement("option",{value:"Delete"},"Delete"),i.a.createElement("option",{value:"Archive"},"Archive")),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2"},"Apply")):i.a.createElement(o.Fragment,null)),i.a.createElement(E.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(We)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Qe,bootstrap4:!0,keyField:"id",data:Re,columns:Ie,selectRow:Xe(it),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(j.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(v.a,{xs:"auto"},i.a.createElement(D.a,{color:"falcon-default",size:"sm",onClick:ot(t),disabled:1===t.page},i.a.createElement(H.a,{icon:"chevron-left"})),Object(B.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(D.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(D.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:rt(t),disabled:n>=t.totalSize},i.a.createElement(H.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1599:function(e,t,a){e.exports=a.p+"static/media/1.c8ae1c7f.png"},1600:function(e,t,a){e.exports=a.p+"static/media/2.1ac00024.png"},1601:function(e,t,a){e.exports=a.p+"static/media/4.e4d22cc3.png"},1602:function(e,t,a){e.exports=a.p+"static/media/3.49b82d25.png"},1603:function(e,t,a){e.exports=a.p+"static/media/8.830c0eca.png"},1604:function(e,t,a){e.exports=a.p+"static/media/6.b1f9653a.png"},1605:function(e,t,a){e.exports=a.p+"static/media/7.55ce5c6d.png"},1606:function(e,t,a){e.exports=a.p+"static/media/5.49dbf8dd.png"},1607:function(e,t,a){e.exports=a.p+"static/media/9.f2d3bbaf.png"},1608:function(e,t,a){"use strict";(function(e){var n=a(36),r=a(10),o=a(0),i=a.n(o),c=a(1049),l=a.n(c),s=a(1042),m=a.n(s),u=a(74),d=a(1021),p=a(1016),b=a(1014),f=a(518),g=a(299),h=a(1616),E=a(1620),O=a(1017),j=a(294),v=a(290),_=a(300),y=a(171),S=(a(172),a(521)),Y=a(23),T=a(46),D=(a(31),a(5)),x=a(301),N=a(1036),k=a(111),C=a.n(k),M=a(22),U=["indeterminate","rowIndex"],P=["mode"],R=["mode"];t.a=Object(N.a)()(Object(x.a)((function(t){var a=t.setRedirect,s=t.setRedirectUrl,x=t.t,N=C()(),k=Object(o.useState)(N.clone().subtract(1,"months")),F=Object(r.a)(k,2),H=F[0],A=(F[1],Object(o.useState)(N)),I=Object(r.a)(A,2),w=I[0],B=(I[1],Object(o.useState)(!1)),G=Object(r.a)(B,2),V=G[0],L=G[1],J=Object(o.useState)([]),q=Object(r.a)(J,2),z=q[0],K=q[1],W=Object(o.useState)(!1),Z=Object(r.a)(W,2),X=Z[0],$=Z[1];Object(o.useEffect)((function(){var e=Object(D.e)("is_logged_in"),t=Object(D.e)("user_name"),n=Object(D.e)("user_display_name"),r=Object(D.e)("user_uuid"),o=Object(D.e)("token");if(null!==e&&e){Object(D.d)("is_logged_in",!0,288e5),Object(D.d)("user_name",t,288e5),Object(D.d)("user_display_name",n,288e5),Object(D.d)("user_uuid",r,288e5),Object(D.d)("token",o,288e5);var i=!1;V||fetch(M.a+"/notifications?startdatetime="+H.format("YYYY-MM-DDTHH:mm:ss")+"&enddatetime="+w.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(D.e)("user_uuid"),Token:Object(D.e)("token")},body:null}).then((function(e){return e.ok&&(i=!0),e.json()})).then((function(e){if(i){console.log(e),L(!0);var t=[];e.length>0&&e.forEach((function(a,n){var r={};r.id=e[n].id,r.subject=e[n].subject,r.created_datetime=e[n].created_datetime,r.message=e[n].message,r.status=e[n].status,r.url=e[n].url,t.push(r)})),K(t),$(!0)}}))}else s("/authentication/basic/login"),a(!0)}));var Q=Object(o.createRef)(),ee=Object(o.useState)(!1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],re=function(e){var t=e.page,a=e.onPageChange;return function(){a(t+1)}},oe=function(e){var t=e.page,a=e.onPageChange;return function(){a(t-1)}},ie=function(){e((function(){ne(!!Q.current.selectionContext.selected.length)}))},ce=[{dataField:"subject",text:x("Notification Subject"),classes:"py-2 align-middle",formatter:function(e,t){var a=t.url;return i.a.createElement(o.Fragment,null,i.a.createElement("a",{href:"".concat(a)},e))},sort:!0},{dataField:"created_datetime",text:x("Notification Created Datetime"),classes:"py-2 align-middle",sort:!0},{dataField:"message",text:x("Notification Message"),classes:"py-2 align-middle",formatter:function(e){return i.a.createElement(o.Fragment,null,e)},sort:!0},{dataField:"status",text:x("Notification Status"),classes:"py-2 align-middle",formatter:function(e){var t="",a="",n="";switch(e){case"read":t="success",a="envelope-open",n=x("Notification Read");break;case"unread":t="primary",a="envelope",n=x("Notification Unread");break;default:t="primary",a="envelope",n=x("Notification Unread")}return i.a.createElement(S.a,{color:"soft-".concat(t),className:"rounded-capsule fs--1 d-block"},n,i.a.createElement(Y.a,{icon:a,transform:"shrink-2",className:"ml-1"}))},sort:!0},{dataField:"",text:"",classes:"py-2 align-middle",formatter:function(e,t){var a=t.id;return i.a.createElement(d.a,null,i.a.createElement(p.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},i.a.createElement(Y.a,{icon:"ellipsis-h",className:"fs--1"})),i.a.createElement(b.a,{right:!0,className:"border py-2"},i.a.createElement(f.a,{onClick:function(){return ue(a)}},x("Notification Mark As Read")),i.a.createElement(f.a,{onClick:function(){return console.log("Archive: ",a)}},x("Notification Archive")),i.a.createElement(f.a,{divider:!0}),i.a.createElement(f.a,{onClick:function(){return console.log("Delete: ",a)},className:"text-danger"},x("Notification Delete"))))},align:"right"}],le={custom:!0,sizePerPage:10,totalSize:z.length},se=function(e){var t=e.indeterminate,a=(e.rowIndex,Object(n.a)(e,U));return i.a.createElement("div",{className:"custom-control custom-checkbox"},i.a.createElement("input",Object.assign({className:"custom-control-input"},a,{onChange:function(){},ref:function(e){e&&(e.indeterminate=t)}})),i.a.createElement("label",{className:"custom-control-label"}))},me=function(e){return{mode:"checkbox",classes:"py-2 align-middle",clickToSelect:!1,selectionHeaderRenderer:function(e){e.mode;var t=Object(n.a)(e,P);return i.a.createElement(se,Object.assign({type:"checkbox"},t))},selectionRenderer:function(e){var t=e.mode,a=Object(n.a)(e,R);return i.a.createElement(se,Object.assign({type:t},a))},onSelect:e,onSelectAll:e}},ue=function(e){console.log("Mark As Read: ",e);var t=!1;fetch(M.a+"/notifications/"+e,{method:"PUT",headers:{"Content-type":"application/json","User-UUID":Object(D.e)("user_uuid"),Token:Object(D.e)("token")},body:JSON.stringify({data:{status:"read"}})}).then((function(e){return e.ok?(t=!0,null):e.json()})).then((function(e){console.log(t),t||u.c.error(e.description)})).catch((function(e){console.log(e)}))};return i.a.createElement(o.Fragment,null,i.a.createElement(g.a,{className:"mb-3"},i.a.createElement(h.a,{color:"primary",hidden:X}),i.a.createElement(T.a,{title:x("Notification List"),light:!1},ae?i.a.createElement(E.a,{size:"sm",className:"input-group input-group-sm"},i.a.createElement(O.a,{type:"select",id:"bulk-select"},i.a.createElement("option",null,x("Bulk actions")),i.a.createElement("option",{value:"MarkAsRead"},x("Notification Mark As Read")),i.a.createElement("option",{value:"Archive"},x("Notification Archive")),i.a.createElement("option",{value:"Delete"},x("Notification Delete"))),i.a.createElement(j.a,{color:"falcon-default",size:"sm",className:"ml-2"},x("Notification Apply"))):i.a.createElement(o.Fragment,null)),i.a.createElement(v.a,{className:"p-0"},i.a.createElement(c.PaginationProvider,{pagination:l()(le)},(function(e){var t=e.paginationProps,a=e.paginationTableProps,n=t.page*t.sizePerPage;return i.a.createElement(o.Fragment,null,i.a.createElement("div",{className:"table-responsive"},i.a.createElement(m.a,Object.assign({ref:Q,bootstrap4:!0,keyField:"id",data:z,columns:ce,selectRow:me(ie),bordered:!1,classes:"table-dashboard table-striped table-sm fs--1 border-bottom mb-0 table-dashboard-th-nowrap",rowClasses:"btn-reveal-trigger",headerClasses:"bg-200 text-900"},a))),i.a.createElement(_.a,{noGutters:!0,className:"px-1 py-3 flex-center"},i.a.createElement(y.a,{xs:"auto"},i.a.createElement(j.a,{color:"falcon-default",size:"sm",onClick:oe(t),disabled:1===t.page},i.a.createElement(Y.a,{icon:"chevron-left"})),Object(D.i)(t.totalSize,t.sizePerPage).map((function(e){return i.a.createElement(j.a,{color:t.page===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return t.onPageChange(e)},key:e},e)})),i.a.createElement(j.a,{color:"falcon-default",size:"sm",className:"ml-2",onClick:re(t),disabled:n>=t.totalSize},i.a.createElement(Y.a,{icon:"chevron-right"})))))})))))})))}).call(this,a(519).setImmediate)},1624:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(42),i=a(10),c=a(1614),l=a(1615),s=a(299),m=a(290),u=a(1024),d=a(300),p=a(171),b=a(1075),f=a(1018),g=a(1025),h=a(1017),E=a(1034),O=a(294),j=a(1616),v=a(89),_=a.n(v),y=a(1039),S=a.n(y),Y=a(111),T=a.n(Y),D=a(83),x=a(1038),N=a(112),k=a(224),C=a(144),M=a(5),U=a(301),P=a(1036),R=[{value:"yearly",label:"Yearly"},{value:"monthly",label:"Monthly"},{value:"daily",label:"Daily"},{value:"hourly",label:"Hourly"}],F=[{value:"year-over-year",label:"Year-Over-Year"},{value:"month-on-month",label:"Month-On-Month"},{value:"free-comparison",label:"Free Comparison"},{value:"none-comparison",label:"None Comparison"}],H=a(74),A=a(172),I=a(22),w=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),B=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),G=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),G=Object(i.a)(P,2),V=G[0],L=G[1],J=Object(n.useState)("month-on-month"),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)("daily"),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(v.clone().subtract(1,"months")),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(!0),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(v.clone().startOf("month")),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(v),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(void 0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!0),xe=Object(i.a)(De,2),Ne=xe[0],ke=xe[1],Ce=Object(n.useState)(!0),Me=Object(i.a)(Ce,2),Ue=Me[0],Pe=Me[1],Re=Object(n.useState)(!0),Fe=Object(i.a)(Re,2),He=Fe[0],Ae=Fe[1],Ie=Object(n.useState)([]),we=Object(i.a)(Ie,2),Be=we[0],Ge=we[1],Ve=Object(n.useState)([]),Le=Object(i.a)(Ve,2),Je=Le[0],qe=Le[1],ze=Object(n.useState)([]),Ke=Object(i.a)(ze,2),We=Ke[0],Ze=Ke[1],Xe=Object(n.useState)([]),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)({}),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)({}),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)([]),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)([]),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)({}),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)([]),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)([]),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)({}),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)([]),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1],Ht=Object(n.useState)([]),At=Object(i.a)(Ht,2),It=At[0],wt=At[1],Bt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Gt=Object(i.a)(Bt,2),Vt=Gt[0],Lt=Gt[1],Jt=Object(n.useState)([]),qt=Object(i.a)(Jt,2),zt=qt[0],Kt=qt[1],Wt=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),Zt=Object(i.a)(Wt,2),Xt=Zt[0],$t=Zt[1],Qt=Object(n.useState)(void 0),ea=Object(i.a)(Qt,2),ta=ea[0],aa=ea[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ke(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Te(t),U([t[0]].map((function(e){return e.label}))),L([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var na="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(V),console.log(z),console.log(X),console.log(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(he.format("YYYY-MM-DDTHH:mm:ss")),console.log(ve.format("YYYY-MM-DDTHH:mm:ss")),ke(!0),Pe(!1),Ae(!0),wt([]),Kt([]);var t=!1;fetch(I.a+"/reports/spaceenergycategory?spaceid="+V+"&periodtype="+X+"&baseperiodstartdatetime="+(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+he.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ve.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),et(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),Ge(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area/1e3,rt(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",i.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area/1e3,lt(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),qe(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),Ze(l);var s=[];e.child_space.energy_category_names.forEach((function(t,a){if(e.child_space.child_space_names_array[a].length>0){var n={data:[]};e.child_space.child_space_names_array[a].forEach((function(t,r){var o={};o.id=r,o.name=t,o.value=e.child_space.subtotals_array[a][r],o.color="#"+((1<<24)*Math.random()|0).toString(16),n.data.push(o)})),n.name=e.child_space.energy_category_names[a],n.unit=e.child_space.units[a],s.push(n)}})),dt(s);var m={};e.reporting_period.timestamps.forEach((function(e,t){m["a"+t]=e})),gt(m);var u={};e.reporting_period.values.forEach((function(e,t){u["a"+t]=e})),jt(u);var d=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];d.push({value:"a"+a,label:t+" ("+n+")"})})),St(d),m={},e.parameters.timestamps.forEach((function(e,t){m["a"+t]=e})),xt(m),u={},e.parameters.values.forEach((function(e,t){u["a"+t]=e})),Mt(u),d=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),d.push({value:"a"+t,label:e})})),Ft(d);var p=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),p.push(n)}));var b={};b.id=p.length,b.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){b["a"+t]=e.toFixed(2)})),p.push(b),wt(p);var f=[];f.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];f.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Lt(f);var g=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.child_space.energy_category_names.forEach((function(t,r){n["a"+r]=e.child_space.subtotals_array[r][a].toFixed(2)})),g.push(n)})),Kt(g);var h=[];h.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach((function(t,a){var n=e.child_space.units[a];h.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),$t(h),aa(e.excel_bytes_base64),ke(!1),Pe(!0),Ae(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ye,onChange:function(e,t){console.log(e,t),U(t.map((function(e){return e.label})).join("/")),L(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:na,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),K(t.value),"year-over-year"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"years")),ie(T()(ve).subtract(1,"years"))):"month-on-month"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"months")),ie(T()(ve).subtract(1,"months"))):"free-comparison"===t.value?(me(!1),be(!1)):"none-comparison"===t.value&&(ae(void 0),ie(void 0),me(!0),be(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:na,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return $(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:te,inputProps:{disabled:se},onChange:function(e){ae(e)},isValidDate:function(e){return e.isBefore(T()(oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:oe,inputProps:{disabled:pe},onChange:function(e){ie(e)},isValidDate:function(e){return e.isAfter(T()(te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:he,onChange:function(e){Ee(e),"year-over-year"===z?ae(e.clone().subtract(1,"years")):"month-on-month"===z&&ae(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ve,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ve,onChange:function(e){_e(e),"year-over-year"===z?ie(e.clone().subtract(1,"years")):"month-on-month"===z&&ie(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(he,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ne},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ue}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:He,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ta).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Qe.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:nt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:nt.value_per_unit_area,footunit:"(TCE/M\xb2)"},nt.value&&r.a.createElement(_.a,{end:nt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:ct.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:ct.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},ct.value&&r.a.createElement(_.a,{end:ct.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Be,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Je,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:We,title:o("Ton of Carbon Dioxide Emissions by Energy Category")})),ut.map((function(e){return r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:e.data,title:o("Child Space Proportion CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ft,data:Ot,options:yt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Dt,data:Ct,options:Rt}),r.a.createElement(B,{data:It,title:o("Detailed Data"),columns:Vt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(w,{data:zt,title:o("Child Spaces Data"),columns:Xt}))}))),V=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),L=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),J=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],J=Object(n.useState)("month-on-month"),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)("daily"),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(v.clone().subtract(1,"months")),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(!0),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(v.clone().startOf("month")),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(v),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(void 0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!0),xe=Object(i.a)(De,2),Ne=xe[0],ke=xe[1],Ce=Object(n.useState)(!0),Me=Object(i.a)(Ce,2),Ue=Me[0],Pe=Me[1],Re=Object(n.useState)(!0),Fe=Object(i.a)(Re,2),He=Fe[0],Ae=Fe[1],Ie=Object(n.useState)([]),we=Object(i.a)(Ie,2),Be=we[0],Ge=we[1],Ve=Object(n.useState)([]),Le=Object(i.a)(Ve,2),Je=Le[0],qe=Le[1],ze=Object(n.useState)([]),Ke=Object(i.a)(ze,2),We=Ke[0],Ze=Ke[1],Xe=Object(n.useState)({}),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)([]),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)([]),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)({}),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)([]),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)([]),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)([]),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)(void 0),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ke(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Te(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ht="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(z),console.log(X),console.log(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(he.format("YYYY-MM-DDTHH:mm:ss")),console.log(ve.format("YYYY-MM-DDTHH:mm:ss")),ke(!0),Pe(!1),Ae(!0),jt([]),xt([]);var t=!1;fetch(I.a+"/reports/spaceenergyitem?spaceid="+B+"&periodtype="+X+"&baseperiodstartdatetime="+(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+he.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ve.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),Ge(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}qe(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Ze(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),et(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),rt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),lt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),dt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),gt(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),jt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),St(b);var f=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.child_space.energy_item_names.forEach((function(t,r){n["a"+r]=e.child_space.subtotals_array[r][a].toFixed(2)})),f.push(n)})),xt(f);var g=[];g.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_item_names.forEach((function(t,a){var n=e.child_space.units[a];g.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Mt(g),Ft(e.excel_bytes_base64),ke(!1),Pe(!0),Ae(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ye,onChange:function(e,t){console.log(e,t),U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ht,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),K(t.value),"year-over-year"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"years")),ie(T()(ve).subtract(1,"years"))):"month-on-month"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"months")),ie(T()(ve).subtract(1,"months"))):"free-comparison"===t.value?(me(!1),be(!1)):"none-comparison"===t.value&&(ae(void 0),ie(void 0),me(!0),be(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ht,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return $(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:te,inputProps:{disabled:se},onChange:function(e){ae(e)},isValidDate:function(e){return e.isBefore(T()(oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:oe,inputProps:{disabled:pe},onChange:function(e){ie(e)},isValidDate:function(e){return e.isAfter(T()(te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:he,onChange:function(e){Ee(e),"year-over-year"===z?ae(e.clone().subtract(1,"years")):"month-on-month"===z&&ae(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ve,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ve,onChange:function(e){_e(e),"year-over-year"===z?ie(e.clone().subtract(1,"years")):"month-on-month"===z&&ie(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(he,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ne},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ue}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:He,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Rt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Be.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},Je.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:We,data:Qe,options:nt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ct,data:ut,options:ft}),r.a.createElement(L,{data:Ot,title:o("Detailed Data"),columns:yt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(V,{data:Dt,title:o("Child Spaces Data"),columns:Ct}))}))),q=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),z=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),K=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)("month-on-month"),L=Object(i.a)(V,2),J=L[0],K=L[1],W=Object(n.useState)("daily"),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(v.clone().subtract(1,"months")),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(!0),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(v.clone().startOf("month")),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(v),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(void 0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!0),xe=Object(i.a)(De,2),Ne=xe[0],ke=xe[1],Ce=Object(n.useState)(!0),Me=Object(i.a)(Ce,2),Ue=Me[0],Pe=Me[1],Re=Object(n.useState)(!0),Fe=Object(i.a)(Re,2),He=Fe[0],Ae=Fe[1],Ie=Object(n.useState)([]),we=Object(i.a)(Ie,2),Be=we[0],Ge=we[1],Ve=Object(n.useState)([]),Le=Object(i.a)(Ve,2),Je=Le[0],qe=Le[1],ze=Object(n.useState)([]),Ke=Object(i.a)(ze,2),We=Ke[0],Ze=Ke[1],Xe=Object(n.useState)([]),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)({}),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)([]),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)([]),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)({}),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)([]),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)([]),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)([]),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1],Ht=Object(n.useState)(void 0),At=Object(i.a)(Ht,2),It=At[0],wt=At[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ke(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Te(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Bt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(J),console.log(X),console.log(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(he.format("YYYY-MM-DDTHH:mm:ss")),console.log(ve.format("YYYY-MM-DDTHH:mm:ss")),ke(!0),Pe(!1),Ae(!0),St([]),Mt([]);var t=!1;fetch(I.a+"/reports/spacecost?spaceid="+B+"&periodtype="+X+"&baseperiodstartdatetime="+(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+he.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ve.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",n.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,a.push(n),Ze(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),Ge(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),qe(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),et(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),rt(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),lt(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),dt(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),gt(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),jt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),St(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),xt(p);var b=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t;var r=0;e.child_space.energy_category_names.forEach((function(t,o){n["a"+o]=e.child_space.subtotals_array[o][a].toFixed(2),r+=e.child_space.subtotals_array[o][a]})),n.total=r.toFixed(2),b.push(n)})),Mt(b);var f=[];f.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach((function(t,a){var n=e.child_space.units[a];f.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),f.push({dataField:"total",text:o("Total")+" ("+e.child_space.total_unit+")",sort:!0}),Ft(f),wt(e.excel_bytes_base64),ke(!1),Pe(!0),Ae(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Bt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ye,onChange:function(e,t){console.log(e,t),U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Bt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),K(t.value),"year-over-year"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"years")),ie(T()(ve).subtract(1,"years"))):"month-on-month"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"months")),ie(T()(ve).subtract(1,"months"))):"free-comparison"===t.value?(me(!1),be(!1)):"none-comparison"===t.value&&(ae(void 0),ie(void 0),me(!0),be(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Bt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return $(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Bt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:te,inputProps:{disabled:se},onChange:function(e){ae(e)},isValidDate:function(e){return e.isBefore(T()(oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Bt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:oe,inputProps:{disabled:pe},onChange:function(e){ie(e)},isValidDate:function(e){return e.isAfter(T()(te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Bt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:he,onChange:function(e){Ee(e),"year-over-year"===J?ae(e.clone().subtract(1,"years")):"month-on-month"===J&&ae(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ve,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Bt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ve,onChange:function(e){_e(e),"year-over-year"===J?ie(e.clone().subtract(1,"years")):"month-on-month"===J&&ie(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(he,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ne},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ue}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:He,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+It).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacecost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},We.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Be,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Je,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Qe,data:nt,options:ct}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ut,data:ft,options:Ot}),r.a.createElement(z,{data:yt,title:o("Detailed Data"),columns:Dt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(q,{data:Ct,title:o("Child Spaces Data"),columns:Rt}))}))),W=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),Z=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),X=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)("month-on-month"),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)("daily"),z=Object(i.a)(q,2),K=z[0],X=z[1],$=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(v.clone().subtract(1,"months")),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],me=Object(n.useState)(!0),ue=Object(i.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(v.clone().startOf("month")),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1],Ee=Object(n.useState)(v),Oe=Object(i.a)(Ee,2),je=Oe[0],ve=Oe[1],_e=Object(n.useState)(void 0),ye=Object(i.a)(_e,2),Se=ye[0],Ye=ye[1],Te=Object(n.useState)(!0),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(!0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)([]),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)([]),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)({}),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)({}),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)([]),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)([]),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)([]),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)(void 0),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,Ne(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ye(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Mt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Output")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(L),console.log(K),console.log(null!=ee?ee.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=re?re.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ge.format("YYYY-MM-DDTHH:mm:ss")),console.log(je.format("YYYY-MM-DDTHH:mm:ss")),Ne(!0),Ue(!1),He(!0),ft([]),yt([]);var t=!1;fetch(I.a+"/reports/spaceoutput?spaceid="+w+"&periodtype="+K+"&baseperiodstartdatetime="+(null!=ee?ee.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=re?re.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ge.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+je.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),Be(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Je(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),We(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),Qe(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),nt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),ct(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ut(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),ft(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ot(s);var m=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.child_space.energy_category_names.forEach((function(t,r){n["a"+r]=e.child_space.subtotals_array[r][a].toFixed(2)})),m.push(n)})),yt(m);var u=[];u.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach((function(t,a){var n=e.child_space.units[a];u.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Dt(u),Ct(e.excel_bytes_base64),Ne(!1),Ue(!0),He(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Se,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Mt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),J(t.value),"year-over-year"===t.value?(se(!0),pe(!0),te(T()(ge).subtract(1,"years")),oe(T()(je).subtract(1,"years"))):"month-on-month"===t.value?(se(!0),pe(!0),te(T()(ge).subtract(1,"months")),oe(T()(je).subtract(1,"months"))):"free-comparison"===t.value?(se(!1),pe(!1)):"none-comparison"===t.value&&(te(void 0),oe(void 0),se(!0),pe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Mt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return X(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ee,inputProps:{disabled:le},onChange:function(e){te(e)},isValidDate:function(e){return e.isBefore(T()(re,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:re,inputProps:{disabled:de},onChange:function(e){oe(e)},isValidDate:function(e){return e.isAfter(T()(ee,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ge,onChange:function(e){he(e),"year-over-year"===L?te(e.clone().subtract(1,"years")):"month-on-month"===L&&te(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(je,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:je,onChange:function(e){ve(e),"year-over-year"===L?oe(e.clone().subtract(1,"years")):"month-on-month"===L&&oe(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ge,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:xe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Me}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Fe,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+kt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceoutput.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},we.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Output CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Output CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Le,data:Ke,options:$e}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:at,data:it,options:mt}),r.a.createElement(Z,{data:bt,title:o("Detailed Data"),columns:Et,pagesize:50}),r.a.createElement("br",null),r.a.createElement(W,{data:_t,title:o("Child Spaces Data"),columns:Tt}))}))),$=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),Q=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ee=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)("month-on-month"),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)("daily"),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ee=Object(i.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(v.clone().subtract(1,"months")),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(!0),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(v.clone().startOf("month")),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(v),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(void 0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!0),xe=Object(i.a)(De,2),Ne=xe[0],ke=xe[1],Ce=Object(n.useState)(!0),Me=Object(i.a)(Ce,2),Ue=Me[0],Pe=Me[1],Re=Object(n.useState)(!0),Fe=Object(i.a)(Re,2),He=Fe[0],Ae=Fe[1],Ie=Object(n.useState)([]),we=Object(i.a)(Ie,2),Be=we[0],Ge=we[1],Ve=Object(n.useState)([]),Le=Object(i.a)(Ve,2),Je=Le[0],qe=Le[1],ze=Object(n.useState)([]),Ke=Object(i.a)(ze,2),We=Ke[0],Ze=Ke[1],Xe=Object(n.useState)({}),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)([]),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)([]),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)({}),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)([]),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)([]),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)([]),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)(void 0),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ke(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Te(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ht="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Income")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(J),console.log(W),console.log(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(he.format("YYYY-MM-DDTHH:mm:ss")),console.log(ve.format("YYYY-MM-DDTHH:mm:ss")),ke(!0),Pe(!1),Ae(!0),jt([]),xt([]);var t=!1;fetch(I.a+"/reports/spaceincome?spaceid="+B+"&periodtype="+W+"&baseperiodstartdatetime="+(null!=te?te.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=oe?oe.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+he.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ve.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",n.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,a.push(n),qe(a);var r=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)})),Ge(r);var i={};e.reporting_period.timestamps.forEach((function(e,t){i["a"+t]=e})),Ze(i);var c={};e.reporting_period.values.forEach((function(e,t){c["a"+t]=e})),et(c);var l=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({value:"a"+a,label:t+" ("+n+")"})})),rt(l),i={},e.parameters.timestamps.forEach((function(e,t){i["a"+t]=e})),lt(i),c={},e.parameters.values.forEach((function(e,t){c["a"+t]=e})),dt(c),l=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),l.push({value:"a"+t,label:e})})),gt(l);var s=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),s.push(n)}));var m={};m.id=s.length,m.startdatetime=o("Subtotal");var u=0;e.reporting_period.subtotals.forEach((function(e,t){m["a"+t]=e.toFixed(2),u+=e})),m.total=u.toFixed(2),s.push(m),jt(s);var d=[];d.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];d.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),d.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),St(d);var p=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t;var r=0;e.child_space.energy_category_names.forEach((function(t,o){n["a"+o]=e.child_space.subtotals_array[o][a].toFixed(2),r+=e.child_space.subtotals_array[o][a]})),n.total=r.toFixed(2),p.push(n)})),xt(p);var b=[];b.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach((function(t,a){var n=e.child_space.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),b.push({dataField:"total",text:o("Total")+" ("+e.child_space.total_unit+")",sort:!0}),Mt(b),Ft(e.excel_bytes_base64),ke(!1),Pe(!0),Ae(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ye,onChange:function(e,t){console.log(e,t),U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ht,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),q(t.value),"year-over-year"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"years")),ie(T()(ve).subtract(1,"years"))):"month-on-month"===t.value?(me(!0),be(!0),ae(T()(he).subtract(1,"months")),ie(T()(ve).subtract(1,"months"))):"free-comparison"===t.value?(me(!1),be(!1)):"none-comparison"===t.value&&(ae(void 0),ie(void 0),me(!0),be(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ht,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return Z(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:te,inputProps:{disabled:se},onChange:function(e){ae(e)},isValidDate:function(e){return e.isBefore(T()(oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:oe,inputProps:{disabled:pe},onChange:function(e){ie(e)},isValidDate:function(e){return e.isAfter(T()(te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:he,onChange:function(e){Ee(e),"year-over-year"===J?ae(e.clone().subtract(1,"years")):"month-on-month"===J&&ae(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ve,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ht,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ve,onChange:function(e){_e(e),"year-over-year"===J?ie(e.clone().subtract(1,"years")):"month-on-month"===J&&ie(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(he,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ne},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ue}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:He,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Rt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceincome.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Je.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Income CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Be,title:o("Incomes by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Income CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:We,data:Qe,options:nt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ct,data:ut,options:ft}),r.a.createElement(Q,{data:Ot,title:o("Detailed Data"),columns:yt,pagesize:50}),r.a.createElement("br",null),r.a.createElement($,{data:Dt,title:o("Child Spaces Data"),columns:Ct}))}))),te=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ae=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)("month-on-month"),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)("daily"),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)(v.clone().subtract(1,"months")),ae=Object(i.a)(ee,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!0),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(!0),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(v.clone().startOf("month")),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(v),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(void 0),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(!0),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(!0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)([]),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)([]),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)({}),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)(void 0),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,xe(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Se(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var yt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Efficiency")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(L),console.log(K),console.log(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ne?ne.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),console.log(Oe.format("YYYY-MM-DDTHH:mm:ss")),xe(!0),Me(!1),Fe(!0),bt([]);var t=!1;fetch(I.a+"/reports/spaceefficiency?spaceid="+w+"&periodtype="+K+"&baseperiodstartdatetime="+(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ne?ne.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+fe.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Oe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period_efficiency.names.forEach((function(t,n){var r={};r.name=e.reporting_period_efficiency.names[n],r.unit=e.reporting_period_efficiency.units[n],r.cumulation=e.reporting_period_efficiency.cumulations[n],r.increment_rate=parseFloat(100*e.reporting_period_efficiency.increment_rates[n]).toFixed(2)+"%",a.push(r)})),we(a);var n={};e.reporting_period_efficiency.timestamps.forEach((function(e,t){n["a"+t]=e})),Le(n);var r={};e.reporting_period_efficiency.values.forEach((function(e,t){r["a"+t]=e})),Ke(r);var i=Array();e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),$e(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),at(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),it(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),mt(i);var c=[];e.reporting_period_efficiency.timestamps.length>0&&e.reporting_period_efficiency.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period_efficiency.values.forEach((function(t,r){null!=e.reporting_period_efficiency.values[r][a]?n["a"+r]=e.reporting_period_efficiency.values[r][a].toFixed(2):n["a"+r]=""})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period_efficiency.cumulations.forEach((function(e,t){l["a"+t]=null!=e?e.toFixed(2):""})),c.push(l),bt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Et(s),_t(e.excel_bytes_base64),xe(!1),Me(!0),Fe(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ye,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),J(t.value),"year-over-year"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"years")),re(T()(Oe).subtract(1,"years"))):"month-on-month"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"months")),re(T()(Oe).subtract(1,"months"))):"free-comparison"===t.value?(le(!1),de(!1)):"none-comparison"===t.value&&(Q(void 0),re(void 0),le(!0),de(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return W(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:$,inputProps:{disabled:ce},onChange:function(e){Q(e)},isValidDate:function(e){return e.isBefore(T()(ne,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ne,inputProps:{disabled:ue},onChange:function(e){re(e)},isValidDate:function(e){return e.isAfter(T()($,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:fe,onChange:function(e){ge(e),"year-over-year"===L?Q(e.clone().subtract(1,"years")):"month-on-month"===L&&Q(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Oe,onChange:function(e){je(e),"year-over-year"===L?re(e.clone().subtract(1,"years")):"month-on-month"===L&&re(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:De},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ce}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Re,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+vt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceefficiency.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Ie.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Cumulative Efficiency NAME UNIT",{NAME:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.cumulation&&r.a.createElement(_.a,{end:e.cumulation,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Cumulative Efficiency VALUE UNIT",{VALUE:null,UNIT:null}),baseTitle:"",labels:Ve,data:ze,options:Xe}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(te,{data:pt,title:o("Detailed Data"),columns:ht,pagesize:50}),r.a.createElement("br",null))}))),ne=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),re=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)("month-on-month"),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)("daily"),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)(v.clone().subtract(1,"months")),te=Object(i.a)(ee,2),ae=te[0],re=te[1],oe=Object(n.useState)(!0),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(!0),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(v.clone().startOf("month")),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(v),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(void 0),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(!0),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(!0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)([]),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)([]),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)({}),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)(void 0),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,xe(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Se(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var yt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(L),console.log(K),console.log(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ae?ae.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),console.log(Oe.format("YYYY-MM-DDTHH:mm:ss")),xe(!0),Me(!1),Fe(!0),bt([]);var t=!1;fetch(I.a+"/reports/spaceload?spaceid="+w+"&periodtype="+K+"&baseperiodstartdatetime="+(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ae?ae.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+fe.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Oe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.average_per_unit_area=e.reporting_period.averages_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),we(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Le(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),Ke(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),$e(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),at(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),it(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),mt(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),bt(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Et(l),_t(e.excel_bytes_base64),xe(!1),Me(!0),Fe(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ye,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),J(t.value),"year-over-year"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"years")),re(T()(Oe).subtract(1,"years"))):"month-on-month"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"months")),re(T()(Oe).subtract(1,"months"))):"free-comparison"===t.value?(le(!1),de(!1)):"none-comparison"===t.value&&(Q(void 0),re(void 0),le(!0),de(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return W(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:$,inputProps:{disabled:ce},onChange:function(e){Q(e)},isValidDate:function(e){return e.isBefore(T()(ae,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ae,inputProps:{disabled:ue},onChange:function(e){re(e)},isValidDate:function(e){return e.isAfter(T()($,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:fe,onChange:function(e){ge(e),"year-over-year"===L?Q(e.clone().subtract(1,"years")):"month-on-month"===L&&Q(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Oe,onChange:function(e){je(e),"year-over-year"===L?re(e.clone().subtract(1,"years")):"month-on-month"===L&&re(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:De},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ce}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Re,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+vt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spaceload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),Ie.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.average_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Ve,data:ze,options:Xe}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(ne,{data:pt,title:o("Detailed Data"),columns:ht,pagesize:50}),r.a.createElement("br",null))}))),oe=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ie=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)("month-on-month"),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)("daily"),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)(v.clone().subtract(1,"months")),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!0),ie=Object(i.a)(re,2),ce=ie[0],le=ie[1],se=Object(n.useState)(!0),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(v.clone().startOf("month")),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(v),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(void 0),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(!0),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(!0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)([]),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)([]),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)({}),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)(void 0),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,xe(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Se(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var yt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(L),console.log(K),console.log(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ae?ae.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(fe.format("YYYY-MM-DDTHH:mm:ss")),console.log(Oe.format("YYYY-MM-DDTHH:mm:ss")),xe(!0),Me(!1),Fe(!0),bt([]);var t=!1;fetch(I.a+"/reports/spacestatistics?spaceid="+w+"&periodtype="+K+"&baseperiodstartdatetime="+(null!=$?$.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ae?ae.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+fe.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Oe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.mean_per_unit_area=e.reporting_period.means_per_unit_area[n],r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.median_per_unit_area=e.reporting_period.medians_per_unit_area[n],r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.minimum_per_unit_area=e.reporting_period.minimums_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.stdev_per_unit_area=e.reporting_period.stdevs_per_unit_area[n],r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",r.variance_per_unit_area=e.reporting_period.variances_per_unit_area[n],a.push(r)})),we(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Le(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),Ke(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),$e(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),at(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),it(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),mt(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),bt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Et(s),_t(e.excel_bytes_base64),xe(!1),Me(!0),Fe(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ye,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),J(t.value),"year-over-year"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"years")),ne(T()(Oe).subtract(1,"years"))):"month-on-month"===t.value?(le(!0),de(!0),Q(T()(fe).subtract(1,"months")),ne(T()(Oe).subtract(1,"months"))):"free-comparison"===t.value?(le(!1),de(!1)):"none-comparison"===t.value&&(Q(void 0),ne(void 0),le(!0),de(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:yt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return W(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:$,inputProps:{disabled:ce},onChange:function(e){Q(e)},isValidDate:function(e){return e.isBefore(T()(ae,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ae,inputProps:{disabled:ue},onChange:function(e){ne(e)},isValidDate:function(e){return e.isAfter(T()($,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:fe,onChange:function(e){ge(e),"year-over-year"===L?Q(e.clone().subtract(1,"years")):"month-on-month"===L&&Q(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:yt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Oe,onChange:function(e){je(e),"year-over-year"===L?ne(e.clone().subtract(1,"years")):"month-on-month"===L&&ne(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(fe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:De},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ce}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Re,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+vt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacestatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),Ie.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.mean_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.median_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.minimum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.stdev_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.variance_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ve,data:ze,options:Xe}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(oe,{data:pt,title:o("Detailed Data"),columns:ht,pagesize:50}),r.a.createElement("br",null))}))),ce=Object(D.a)((function(){return a.e(2).then(a.bind(null,1609))})),le=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),se=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)("month-on-month"),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)("daily"),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)(v.clone().subtract(1,"months")),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(!0),ie=Object(i.a)(oe,2),se=ie[0],me=ie[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(v.clone().startOf("month")),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(v),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(void 0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!0),xe=Object(i.a)(De,2),Ne=xe[0],ke=xe[1],Ce=Object(n.useState)(!0),Me=Object(i.a)(Ce,2),Ue=Me[0],Pe=Me[1],Re=Object(n.useState)(!0),Fe=Object(i.a)(Re,2),He=Fe[0],Ae=Fe[1],Ie=Object(n.useState)([]),we=Object(i.a)(Ie,2),Be=we[0],Ge=we[1],Ve=Object(n.useState)([]),Le=Object(i.a)(Ve,2),Je=Le[0],qe=Le[1],ze=Object(n.useState)([]),Ke=Object(i.a)(ze,2),We=Ke[0],Ze=Ke[1],Xe=Object(n.useState)({}),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)({}),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)([]),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)({}),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)([]),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)([]),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)({}),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)([]),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)([]),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1],Ht=Object(n.useState)([]),At=Object(i.a)(Ht,2),It=At[0],wt=At[1],Bt=Object(n.useState)([{dataField:"name",text:o("Child Spaces"),sort:!0}]),Gt=Object(i.a)(Bt,2),Vt=Gt[0],Lt=Gt[1],Jt=Object(n.useState)(void 0),qt=Object(i.a)(Jt,2),zt=qt[0],Kt=qt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0,ke(!1)),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Te(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Wt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Space Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(J),console.log(W),console.log(null!=Q?Q.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ne?ne.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(he.format("YYYY-MM-DDTHH:mm:ss")),console.log(ve.format("YYYY-MM-DDTHH:mm:ss")),ke(!0),Pe(!1),Ae(!0),Mt([]),wt([]);var t=!1;fetch(I.a+"/reports/spacesaving?spaceid="+B+"&periodtype="+W+"&baseperiodstartdatetime="+(null!=Q?Q.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ne?ne.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+he.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ve.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area_saving[n],a.push(r)})),Ze(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",n.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area_saving/1e3,et(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area_saving/1e3,rt(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Ge(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),qe(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),lt(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),dt(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),gt(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),jt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),St(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),xt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),Mt(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ft(p);var b=[];e.child_space.child_space_names_array.length>0&&e.child_space.child_space_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.child_space.energy_category_names.forEach((function(t,r){n["a"+r]=e.child_space.subtotals_saving_array[r][a].toFixed(2)})),b.push(n)})),wt(b);var f=[];f.push({dataField:"name",text:o("Child Spaces"),sort:!0}),e.child_space.energy_category_names.forEach((function(t,a){var n=e.child_space.units[a];f.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Lt(f),Kt(e.excel_bytes_base64),ke(!1),Pe(!0),Ae(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Wt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ye,onChange:function(e,t){console.log(e,t),U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Wt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),q(t.value),"year-over-year"===t.value?(me(!0),be(!0),ee(T()(he).subtract(1,"years")),re(T()(ve).subtract(1,"years"))):"month-on-month"===t.value?(me(!0),be(!0),ee(T()(he).subtract(1,"months")),re(T()(ve).subtract(1,"months"))):"free-comparison"===t.value?(me(!1),be(!1)):"none-comparison"===t.value&&(ee(void 0),re(void 0),me(!0),be(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Wt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return Z(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Wt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:Q,inputProps:{disabled:se},onChange:function(e){ee(e)},isValidDate:function(e){return e.isBefore(T()(ne,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Wt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ne,inputProps:{disabled:pe},onChange:function(e){re(e)},isValidDate:function(e){return e.isAfter(T()(Q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Wt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:he,onChange:function(e){Ee(e),"year-over-year"===J?ee(e.clone().subtract(1,"years")):"month-on-month"===J&&ee(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ve,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Wt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ve,onChange:function(e){_e(e),"year-over-year"===J?re(e.clone().subtract(1,"years")):"month-on-month"===J&&re(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(he,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ne},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ue}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:He,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+zt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="spacesaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},We.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:Qe.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:Qe.value_per_unit_area,footunit:"(TCE/M\xb2)"},Qe.value&&r.a.createElement(_.a,{end:Qe.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:nt.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:nt.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},nt.value&&r.a.createElement(_.a,{end:nt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Be,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Je,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ct,data:ut,options:ft}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ot,data:yt,options:Dt}),r.a.createElement(le,{data:Ct,title:o("Detailed Data"),columns:Rt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(ce,{data:It,title:o("Child Spaces Data"),columns:Vt}))}))),me=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ue=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),N=Object(i.a)(D,2),k=N[0],C=N[1],U=Object(n.useState)([]),P=Object(i.a)(U,2),R=P[0],F=P[1],w=Object(n.useState)(h.clone().startOf("month")),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(h),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!1),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],ue=Object(n.useState)([{dataField:"name",text:o("Name"),sort:!0},{dataField:"space",text:o("Space"),sort:!0}]),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(void 0),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),X(t),Y([t[0]].map((function(e){return e.label}))),C([t[0]].map((function(e){return e.value}))),te(!1),oe(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Oe="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Batch Analysis")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(G.format("YYYY-MM-DDTHH:mm:ss")),console.log(q.format("YYYY-MM-DDTHH:mm:ss")),te(!0),oe(!1),se(!0),F([]);var t=!1;fetch(I.a+"/reports/equipmentbatch?spaceid="+k+"&reportingperiodstartdatetime="+G.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+q.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.equipments.length>0&&e.equipments.forEach((function(e,t){var n={};n.id=e.id,n.name=e.equipment_name,n.space=e.space_name,n.costcenter=e.cost_center_name,e.values.forEach((function(e,t){n["a"+t]=e.toFixed(2)})),a.push(n)})),F(a);var n=[];n.push({dataField:"name",text:o("Name"),sort:!0}),n.push({dataField:"space",text:o("Space"),sort:!0}),e.energycategories.forEach((function(e,t){n.push({dataField:"a"+t,text:e.name+" ("+e.unit_of_measure+")",sort:!0})})),be(n),Ee(e.excel_bytes_base64),te(!1),oe(!0),se(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Oe,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Z,onChange:function(e,t){Y(t.map((function(e){return e.label})).join("/")),C(e[e.length-1]),F([]),se(!0),te(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Oe,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:G,onChange:function(e){V(e)},isValidDate:function(e){return e.isBefore(T()(q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Oe,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:q,onChange:function(e){z(e)},isValidDate:function(e){return e.isAfter(T()(G,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:ee},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:re}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+he).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentbatch.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(me,{data:R,title:o("Detailed Data"),columns:pe,pagesize:50}))}))),de=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),pe=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],pe=me[1],be=Object(n.useState)(!0),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1],Ee=Object(n.useState)(!0),Oe=Object(i.a)(Ee,2),je=Oe[0],ve=Oe[1],_e=Object(n.useState)(v.clone().startOf("month")),ye=Object(i.a)(_e,2),Se=ye[0],Ye=ye[1],Te=Object(n.useState)(v),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(void 0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)(!0),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)(!0),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)([]),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)([]),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)({}),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)([]),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)([]),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)({}),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)([]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1],Ft=Object(n.useState)(void 0),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ue(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var wt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Se.format("YYYY-MM-DDTHH:mm:ss")),console.log(xe.format("YYYY-MM-DDTHH:mm:ss")),He(!0),Be(!1),Je(!0),Ct([]);var t=!1;fetch(I.a+"/reports/equipmentcost?equipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Se.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+xe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.push(n),nt(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),We(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Qe(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),ct(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),ut(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),ft(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),Ot(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),yt(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),Dt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),Ct(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Rt(p),It(e.excel_bytes_base64),He(!1),Be(!0),Je(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Me,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(he(!0),ve(!0),le(T()(Se).subtract(1,"years")),pe(T()(xe).subtract(1,"years"))):"month-on-month"===t.value?(he(!0),ve(!0),le(T()(Se).subtract(1,"months")),pe(T()(xe).subtract(1,"months"))):"free-comparison"===t.value?(he(!1),ve(!1)):"none-comparison"===t.value&&(le(void 0),pe(void 0),he(!0),ve(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:ge},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:je},onChange:function(e){pe(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Se,onChange:function(e){Ye(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(xe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:xe,onChange:function(e){Ne(e),"year-over-year"===Q?pe(e.clone().subtract(1,"years")):"month-on-month"===Q&&pe(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Se,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Fe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:we}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+At).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentcost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},at.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Ke,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:$e,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:it,data:mt,options:bt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Et,data:_t,options:Tt}),r.a.createElement("br",null),r.a.createElement(de,{data:kt,title:o("Detailed Data"),columns:Pt,pagesize:50}))}))),be=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),fe=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),fe=pe[0],ge=pe[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)({}),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)(void 0),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Efficiency")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),_t([]);var t=!1;fetch(I.a+"/reports/equipmentefficiency?equipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period_efficiency.names.forEach((function(t,n){var r={};r.name=e.reporting_period_efficiency.names[n],r.unit=e.reporting_period_efficiency.units[n],r.cumulation=e.reporting_period_efficiency.cumulations[n],r.increment_rate=parseFloat(100*e.reporting_period_efficiency.increment_rates[n]).toFixed(2)+"%",a.push(r)})),Ke(a);var n={};e.reporting_period_efficiency.timestamps.forEach((function(e,t){n["a"+t]=e})),$e(n);var r={};e.reporting_period_efficiency.values.forEach((function(e,t){r["a"+t]=e})),at(r);var i=Array();e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),it(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),mt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),bt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),Et(i);var c=[];e.reporting_period_efficiency.timestamps.length>0&&e.reporting_period_efficiency.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period_efficiency.values.forEach((function(t,r){null!=e.reporting_period_efficiency.values[r][a]?n["a"+r]=e.reporting_period_efficiency.values[r][a].toFixed(2):n["a"+r]=""})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period_efficiency.cumulations.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),_t(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Tt(s),kt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0)),Le(!0)):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(ge(!0),je(!0),ce(T()(ye).subtract(1,"years")),ue(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),ce(T()(ye).subtract(1,"months")),ue(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:fe},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Oe},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Nt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentefficiency.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Cumulative Efficiency NAME UNIT",{NAME:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.cumulation&&r.a.createElement(_.a,{end:e.cumulation,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Cumulative Efficiency VALUE UNIT",{VALUE:null,UNIT:null}),baseTitle:"",labels:Xe,data:tt,options:ot}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:st,data:pt,options:ht}),r.a.createElement("br",null),r.a.createElement(be,{data:vt,title:o("Detailed Data"),columns:Yt,pagesize:50}))}))),ge=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),he=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],he=be[1],Ee=Object(n.useState)(!0),Oe=Object(i.a)(Ee,2),je=Oe[0],ve=Oe[1],_e=Object(n.useState)(v.clone().startOf("month")),ye=Object(i.a)(_e,2),Se=ye[0],Ye=ye[1],Te=Object(n.useState)(v),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(void 0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)(!0),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)(!0),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)([]),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)([]),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)({}),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)({}),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)([]),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)({}),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)([]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)({}),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1],Ft=Object(n.useState)([]),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1],wt=Object(n.useState)([]),Bt=Object(i.a)(wt,2),Gt=Bt[0],Vt=Bt[1],Lt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Jt=Object(i.a)(Lt,2),qt=Jt[0],zt=Jt[1],Kt=Object(n.useState)(void 0),Wt=Object(i.a)(Kt,2),Zt=Wt[0],Xt=Wt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ue(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var $t="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Se.format("YYYY-MM-DDTHH:mm:ss")),console.log(xe.format("YYYY-MM-DDTHH:mm:ss")),He(!0),Be(!1),Je(!0),Vt([]);var t=!1;fetch(I.a+"/reports/equipmentenergycategory?equipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Se.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+xe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),ct(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),We(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",ut(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",ft(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),Qe(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),nt(l);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Ot(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),yt(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),Dt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),Ct(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Rt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),It(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Vt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),zt(b),Xt(e.excel_bytes_base64),He(!1),Be(!0),Je(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Me,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(he(!0),ve(!0),le(T()(Se).subtract(1,"years")),de(T()(xe).subtract(1,"years"))):"month-on-month"===t.value?(he(!0),ve(!0),le(T()(Se).subtract(1,"months")),de(T()(xe).subtract(1,"months"))):"free-comparison"===t.value?(he(!1),ve(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),he(!0),ve(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:je},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Se,onChange:function(e){Ye(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(xe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:xe,onChange:function(e){Ne(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Se,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Fe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:we}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Zt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},it.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:mt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},mt.value&&r.a.createElement(_.a,{end:mt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:bt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning"},bt.value&&r.a.createElement(_.a,{end:bt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Ke,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:$e,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:at,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Et,data:_t,options:Tt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:kt,data:Pt,options:At}),r.a.createElement("br",null),r.a.createElement(ge,{data:Gt,title:o("Detailed Data"),columns:qt,pagesize:50}))}))),Ee=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Oe=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Oe=Object(i.a)(he,2),je=Oe[0],ve=Oe[1],_e=Object(n.useState)(v.clone().startOf("month")),ye=Object(i.a)(_e,2),Se=ye[0],Ye=ye[1],Te=Object(n.useState)(v),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(void 0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)(!0),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)(!0),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)([]),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)({}),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)([]),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)([]),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)({}),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)([]),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)(void 0),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ue(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ft="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Se.format("YYYY-MM-DDTHH:mm:ss")),console.log(xe.format("YYYY-MM-DDTHH:mm:ss")),He(!0),Be(!1),Je(!0),Dt([]);var t=!1;fetch(I.a+"/reports/equipmentenergyitem?equipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Se.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+xe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),We(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}Qe(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),nt(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),ct(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),ut(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),ft(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Ot(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),yt(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Dt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ct(b),Rt(e.excel_bytes_base64),He(!1),Be(!0),Je(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Me,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),ve(!0),le(T()(Se).subtract(1,"years")),de(T()(xe).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),ve(!0),le(T()(Se).subtract(1,"months")),de(T()(xe).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),ve(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),ve(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:je},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Se,onChange:function(e){Ye(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(xe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:xe,onChange:function(e){Ne(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Se,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Fe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:we}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Pt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Ke.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},$e.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:at,data:it,options:mt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:bt,data:Et,options:_t}),r.a.createElement("br",null),r.a.createElement(Ee,{data:Tt,title:o("Detailed Data"),columns:kt,pagesize:50}))}))),je=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ve=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],ve=Ee[1],_e=Object(n.useState)(v.clone().startOf("month")),ye=Object(i.a)(_e,2),Se=ye[0],Ye=ye[1],Te=Object(n.useState)(v),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(void 0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)(!0),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)(!0),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)([]),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)({}),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)([]),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)([]),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)({}),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)([]),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)(void 0),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ue(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ft="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Income")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Se.format("YYYY-MM-DDTHH:mm:ss")),console.log(xe.format("YYYY-MM-DDTHH:mm:ss")),He(!0),Be(!1),Je(!0),Dt([]);var t=!1;fetch(I.a+"/reports/equipmentincome?equipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Se.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+xe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.push(n),Qe(a);var r=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)})),We(r);var i={};e.reporting_period.timestamps.forEach((function(e,t){i["a"+t]=e})),nt(i);var c={};e.reporting_period.values.forEach((function(e,t){c["a"+t]=e})),ct(c);var l=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({value:"a"+a,label:t+" ("+n+")"})})),ut(l),i={},e.parameters.timestamps.forEach((function(e,t){i["a"+t]=e})),ft(i),c={},e.parameters.values.forEach((function(e,t){c["a"+t]=e})),Ot(c),l=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),l.push({value:"a"+t,label:e})})),yt(l);var s=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),s.push(n)}));var m={};m.id=s.length,m.startdatetime=o("Subtotal");var u=0;e.reporting_period.subtotals.forEach((function(e,t){m["a"+t]=e.toFixed(2),u+=e})),m.total=u.toFixed(2),s.push(m),Dt(s);var d=[];d.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];d.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),d.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Ct(d),Rt(e.excel_bytes_base64),He(!1),Be(!0),Je(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Me,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),ve(!0),le(T()(Se).subtract(1,"years")),de(T()(xe).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),ve(!0),le(T()(Se).subtract(1,"months")),de(T()(xe).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),ve(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),ve(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Se,onChange:function(e){Ye(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(xe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:xe,onChange:function(e){Ne(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Se,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Fe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:we}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Pt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentincome.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},$e.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Income CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Ke,title:o("Incomes by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Income CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:at,data:it,options:mt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:bt,data:Et,options:_t}),r.a.createElement("br",null),r.a.createElement(je,{data:Tt,title:o("Detailed Data"),columns:kt,pagesize:50}))}))),_e=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ye=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),ye=ve[0],Se=ve[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)({}),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)(void 0),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),_t([]);var t=!1;fetch(I.a+"/reports/equipmentload?equipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),Ke(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),$e(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),at(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),it(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),mt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),bt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),Et(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),_t(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Tt(l),kt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(ye).subtract(1,"years")),ue(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(ye).subtract(1,"months")),ue(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Nt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),ze.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Xe,data:tt,options:ot}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:st,data:pt,options:ht}),r.a.createElement("br",null),r.a.createElement(_e,{data:vt,title:o("Detailed Data"),columns:Yt,pagesize:50}))}))),Se=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ye=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)({}),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)(void 0),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Output")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),_t([]);var t=!1;fetch(I.a+"/reports/equipmentoutput?equipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),Ke(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),$e(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),at(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),it(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),mt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),bt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),Et(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),_t(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Tt(s),kt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Nt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentoutput.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Output CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Output CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Xe,data:tt,options:ot}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:st,data:pt,options:ht}),r.a.createElement("br",null),r.a.createElement(Se,{data:vt,title:o("Detailed Data"),columns:Yt,pagesize:50}))}))),Te=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),De=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),De=Object(i.a)(Ye,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(void 0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(!0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1],Ae=Object(n.useState)(!0),Ie=Object(i.a)(Ae,2),we=Ie[0],Be=Ie[1],Ge=Object(n.useState)(!0),Ve=Object(i.a)(Ge,2),Le=Ve[0],Je=Ve[1],qe=Object(n.useState)([]),ze=Object(i.a)(qe,2),Ke=ze[0],We=ze[1],Ze=Object(n.useState)([]),Xe=Object(i.a)(Ze,2),$e=Xe[0],Qe=Xe[1],et=Object(n.useState)([]),tt=Object(i.a)(et,2),at=tt[0],nt=tt[1],rt=Object(n.useState)({}),ot=Object(i.a)(rt,2),it=ot[0],ct=ot[1],lt=Object(n.useState)({}),st=Object(i.a)(lt,2),mt=st[0],ut=st[1],dt=Object(n.useState)([]),pt=Object(i.a)(dt,2),bt=pt[0],ft=pt[1],gt=Object(n.useState)({}),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)([]),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)({}),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)([]),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1],Ft=Object(n.useState)([]),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1],wt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Bt=Object(i.a)(wt,2),Gt=Bt[0],Vt=Bt[1],Lt=Object(n.useState)(void 0),Jt=Object(i.a)(Lt,2),qt=Jt[0],zt=Jt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ue(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(xe.format("YYYY-MM-DDTHH:mm:ss")),He(!0),Be(!1),Je(!0),It([]);var t=!1;fetch(I.a+"/reports/equipmentsaving?equipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+xe.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",a.push(r)})),nt(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",ct(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",ut(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),We(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),Qe(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),ft(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),Ot(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),yt(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),Dt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),Ct(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),Rt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),It(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Vt(p),zt(e.excel_bytes_base64),He(!1),Be(!0),Je(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Me,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),He(!1)):(Z(void 0),He(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(xe).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(xe).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(xe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:xe,onChange:function(e){Ne(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Fe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:we}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+qt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentsaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},at.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:it.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},it.value&&r.a.createElement(_.a,{end:it.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:mt.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning"},mt.value&&r.a.createElement(_.a,{end:mt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Ke,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:$e,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:bt,data:Et,options:_t}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Tt,data:kt,options:Pt}),r.a.createElement("br",null),r.a.createElement(Te,{data:At,title:o("Detailed Data"),columns:Gt,pagesize:50}))}))),xe=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ne=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)({}),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)(void 0),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Equipment Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),_t([]);var t=!1;fetch(I.a+"/reports/equipmentstatistics?equipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",a.push(r)})),Ke(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),$e(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),at(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),it(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),mt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),bt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),Et(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),_t(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Tt(s),kt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/equipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Fe(!1)):(W(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"equipmentSelect"},o("Equipment")),r.a.createElement(h.a,{type:"select",id:"equipmentSelect",name:"equipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Nt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmentstatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),ze.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Xe,data:tt,options:ot}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:st,data:pt,options:ht}),r.a.createElement("br",null),r.a.createElement(xe,{data:vt,title:o("Detailed Data"),columns:Yt,pagesize:50}))}))),ke=a(296),Ce=a(1021),Me=a(1016),Ue=a(1014),Pe=a(518),Re=a(31),Fe=a.n(Re),He=a(23),Ae=a(13),Ie=a(21),we=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,o=e.setRedirectUrl,h=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),a=Object(M.e)("user_name"),n=Object(M.e)("user_display_name"),r=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",a,288e5),Object(M.d)("user_display_name",n,288e5),Object(M.d)("user_uuid",r,288e5),Object(M.d)("token",i,288e5)):(o("/authentication/basic/login"),t(!0))}));Object(n.createRef)();var E=Object(n.useState)(void 0),O=Object(i.a)(E,2),v=O[0],_=O[1],y=Object(n.useState)(void 0),S=Object(i.a)(y,2),Y=S[0],T=S[1],N=Object(n.useState)([]),k=Object(i.a)(N,2),C=k[0],U=k[1],P=Object(n.useState)(!1),R=Object(i.a)(P,2),F=R[0],w=R[1],B=Object(n.useState)(!0),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)(void 0),q=Object(i.a)(J,2),z=q[0],K=q[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),T(t),_([t[0]].map((function(e){return e.label})));var a=[t[0]].map((function(e){return e.value})),n=!1;fetch(I.a+"/reports/equipmenttracking?spaceid="+a,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(n=!0),e.json()})).then((function(e){if(n){var t=JSON.parse(JSON.stringify([e.equipments]).split('"id":').join('"value":').split('"name":').join('"label":'));console.log(e);var a=[];t[0].forEach((function(e,t){a.push({key:t,id:e.id,name:e.equipment_name,space:e.space_name,costcenter:e.cost_center_name,description:e.description})})),U(a),K(e.excel_bytes_base64),w(!0),L(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var W=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Z=[{key:"a0",dataField:"equipmentname",headerClasses:"border-0",text:h("Name"),classes:"border-0 py-2 align-middle",formatter:function(e,t){var a=t.name;return r.a.createElement(Ae.b,{to:"#"},r.a.createElement(ke.a,{tag:Ie.a,align:"center"},r.a.createElement(ke.a,{body:!0,className:"ml-2"},r.a.createElement("h5",{className:"mb-0 fs--1"},a))))},sort:!0},{key:"a1",dataField:"space",headerClasses:"border-0",text:h("Space"),classes:"border-0 py-2 align-middle",sort:!0},{key:"a2",dataField:"costcenter",headerClasses:"border-0",text:h("Cost Center"),classes:"border-0 py-2 align-middle",sort:!0},{key:"a3",dataField:"description",headerClasses:"border-0",text:h("Description"),classes:"border-0 py-2 align-middle",sort:!0},{key:"a4",dataField:"",headerClasses:"border-0",text:"",classes:"border-0 py-2 align-middle",formatter:function(e,t){var a=t.id;return r.a.createElement(Ce.a,null,r.a.createElement(Me.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},r.a.createElement(He.a,{icon:"ellipsis-h",className:"fs--1"})),r.a.createElement(Ue.a,{right:!0,className:"border py-2"},r.a.createElement(Pe.a,{onClick:function(){return console.log("Edit: ",a)}},h("Edit Equipment"))))},align:"right"}];return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,h("Equipment Data")),r.a.createElement(l.a,{active:!0},h("Equipment Tracking")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,null,r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"space"},h("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Y,onChange:function(e,t){_(t.map((function(e){return e.label})).join("/"));var a=e[e.length-1];w(!1),L(!0);var n=!1;fetch(I.a+"/reports/equipmenttracking?spaceid="+a,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(n=!0),e.json()})).then((function(e){if(n){var t=JSON.parse(JSON.stringify([e.equipments]).split('"id":').join('"value":').split('"name":').join('"label":'));console.log(e);var a=[];t[0].forEach((function(e,t){a.push({key:t,id:e.id,name:e.equipment_name,space:e.space_name,costcenter:e.cost_center_name,description:e.description})})),U(a),K(e.excel_bytes_base64),w(!0),L(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:v||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:F}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:V,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+z).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="equipmenttracking.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},h("Export"))))))),r.a.createElement(W,{data:C,title:h("Equipment List"),columns:Z,pagesize:10}))}))),Be=function(e){return r.a.createElement(d.a,{className:"flex-center py-5"},r.a.createElement(p.a,{xs:"auto"},r.a.createElement(j.a,e)))};Be.defaultProps={type:"grow",size:"lg",color:"primary"};var Ge=Be,Ve=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Le=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)([]),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(void 0),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("month-on-month"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)("daily"),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(v.clone().subtract(1,"months")),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(!0),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v.clone().startOf("month")),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(v),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(void 0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Le=Be[1],Je=Object(n.useState)(!0),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)(!1),Ze=Object(i.a)(We,2),Xe=(Ze[0],Ze[1],Object(n.useState)({name:"",unit:""})),$e=Object(i.a)(Xe,2),Qe=$e[0],et=$e[1],tt=Object(n.useState)(0),at=Object(i.a)(tt,2),nt=at[0],rt=at[1],ot=Object(n.useState)(""),it=Object(i.a)(ot,2),ct=it[0],lt=it[1],st=Object(n.useState)(0),mt=Object(i.a)(st,2),ut=mt[0],dt=mt[1],pt=Object(n.useState)(0),bt=Object(i.a)(pt,2),ft=bt[0],gt=bt[1],ht=Object(n.useState)(0),Et=Object(i.a)(ht,2),Ot=Et[0],jt=Et[1],vt=Object(n.useState)([]),_t=Object(i.a)(vt,2),yt=_t[0],St=_t[1],Yt=Object(n.useState)({}),Tt=Object(i.a)(Yt,2),Dt=Tt[0],xt=Tt[1],Nt=Object(n.useState)([]),kt=Object(i.a)(Nt,2),Ct=kt[0],Mt=kt[1],Ut=Object(n.useState)([]),Pt=Object(i.a)(Ut,2),Rt=Pt[0],Ft=Pt[1],Ht=Object(n.useState)({}),At=Object(i.a)(Ht,2),It=At[0],wt=At[1],Bt=Object(n.useState)([]),Gt=Object(i.a)(Bt,2),Vt=Gt[0],Lt=Gt[1],Jt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),qt=Object(i.a)(Jt,2),zt=qt[0],Kt=qt[1],Wt=Object(n.useState)([]),Zt=Object(i.a)(Wt,2),Xt=Zt[0],$t=Zt[1],Qt=Object(n.useState)(void 0),ea=Object(i.a)(Qt,2),ta=ea[0],aa=ea[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Re(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),W(e[0]),e[0].length>0?(Q(e[0][0].value),Ie(!1)):(Q(void 0),Ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var na="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Meter Energy")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log($),console.log(ae),console.log(ie),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=be?be.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),console.log(ke.format("YYYY-MM-DDTHH:mm:ss")),Ie(!0),Le(!1),Ke(!0),$t([]);var t=!1;fetch(I.a+"/reports/meterenergy?meterid="+$+"&periodtype="+ie+"&baseperiodstartdatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=be?be.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Te.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ke.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),et({name:e.meter.energy_category_name,unit:e.meter.unit_of_measure}),lt(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),rt(e.reporting_period.total_in_category),dt(e.reporting_period.total_in_kgce/1e3),gt(e.reporting_period.total_in_kgco2e/1e3),jt(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.meter.energy_category_name}),St(a);var n={};n.a0=e.reporting_period.timestamps,Mt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),xt(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),Ft(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),Lt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),wt(r),Kt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.meter.energy_category_name+" ("+e.meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),$t(i),aa(e.excel_bytes_base64),Ie(!1),Le(!0),Ke(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Pe,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),W(e[0]),e[0].length>0?(Q(e[0][0].value),Ie(!1)):(Q(void 0),Ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:na,for:"meterSelect"},o("Meter")),r.a.createElement(u.a,{inline:!0},r.a.createElement(g.a,{placeholder:o("Search"),onChange:function(e){var t=e.target.value.toLowerCase(),a=L.filter((function(e){return e.label.toLowerCase().includes(t)}));W(t.length?a:L),a.length>0?(Q(a[0].value),Ie(!1)):(Q(void 0),Ie(!0))}}),r.a.createElement(h.a,{type:"select",id:"meterSelect",name:"meterSelect",onChange:function(e){var t=e.target;return Q(t.value)}},K.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:na,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ne(t.value),"year-over-year"===t.value?(Oe(!0),ye(!0),ue(T()(Te).subtract(1,"years")),fe(T()(ke).subtract(1,"years"))):"month-on-month"===t.value?(Oe(!0),ye(!0),ue(T()(Te).subtract(1,"months")),fe(T()(ke).subtract(1,"months"))):"free-comparison"===t.value?(Oe(!1),ye(!1)):"none-comparison"===t.value&&(ue(void 0),fe(void 0),Oe(!0),ye(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:na,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ce(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isBefore(T()(be,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:be,inputProps:{disabled:_e},onChange:function(e){fe(e)},isValidDate:function(e){return e.isAfter(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===ae?ue(e.clone().subtract(1,"years")):"month-on-month"===ae&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ke,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:na,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ke,onChange:function(e){Ce(e),"year-over-year"===ae?fe(e.clone().subtract(1,"years")):"month-on-month"===ae&&fe(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ae},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ge}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ze,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ta).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="meterenergy.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:ct,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:Qe.name,UNIT:"("+Qe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:nt,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:ct,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:ut,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:ct,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:ft,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:Qe.name,VALUE:nt.toFixed(2),UNIT:"("+Qe.unit+")"}),baseTitle:o("Base Period Consumption CATEGORY VALUE UNIT",{CATEGORY:Qe.name,VALUE:Ot.toFixed(2),UNIT:"("+Qe.unit+")"}),labels:Ct,data:Dt,options:yt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Vt,data:It,options:Rt}),r.a.createElement("br",null),r.a.createElement(Ve,{data:Xt,title:o("Detailed Data"),columns:zt,pagesize:50})))}))),Je=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),qe=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)([]),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(void 0),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("month-on-month"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)("daily"),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(v.clone().subtract(1,"months")),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(!0),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v.clone().startOf("month")),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(v),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(void 0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)(!0),qe=Object(i.a)(Le,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)({name:"",unit:""}),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)(0),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)(""),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)(0),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)(0),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)(0),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)({}),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)({}),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)([]),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1],Xt=Object(n.useState)(void 0),$t=Object(i.a)(Xt,2),Qt=$t[0],ea=$t[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Re(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),W(e[0]),e[0].length>0?(Q(e[0][0].value),Ie(!1)):(Q(void 0),Ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var ta="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Meter Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log($),console.log(ae),console.log(ie),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=be?be.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),console.log(ke.format("YYYY-MM-DDTHH:mm:ss")),Ie(!0),Ve(!1),Ke(!0),Zt([]);var t=!1;fetch(I.a+"/reports/metercost?meterid="+$+"&periodtype="+ie+"&baseperiodstartdatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=be?be.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+Te.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ke.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),$e({name:e.meter.energy_category_name,unit:e.meter.unit_of_measure}),it(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),at(e.reporting_period.total_in_category),mt(e.reporting_period.total_in_kgce/1e3),bt(e.reporting_period.total_in_kgco2e/1e3),Et(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.meter.energy_category_name}),_t(a);var n={a0:[]};e.reporting_period.timestamps.forEach((function(e,t){n.a0[t]=e})),kt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),Tt(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),Pt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),Gt(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),At(r),qt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.meter.energy_category_name+" ("+e.meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),Zt(i),ea(e.excel_bytes_base64),Ie(!1),Ve(!0),Ke(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Pe,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),W(e[0]),e[0].length>0?(Q(e[0][0].value),Ie(!1)):(Q(void 0),Ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"meterSelect"},o("Meter")),r.a.createElement(u.a,{inline:!0},r.a.createElement(g.a,{placeholder:o("Search"),onChange:function(e){var t=e.target.value.toLowerCase(),a=L.filter((function(e){return e.label.toLowerCase().includes(t)}));W(t.length?a:L),a.length>0?(Q(a[0].value),Ie(!1)):(Q(void 0),Ie(!0))}}),r.a.createElement(h.a,{type:"select",id:"meterSelect",name:"meterSelect",onChange:function(e){var t=e.target;return Q(t.value)}},K.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ne(t.value),"year-over-year"===t.value?(Oe(!0),ye(!0),ue(T()(Te).subtract(1,"years")),fe(T()(ke).subtract(1,"years"))):"month-on-month"===t.value?(Oe(!0),ye(!0),ue(T()(Te).subtract(1,"months")),fe(T()(ke).subtract(1,"months"))):"free-comparison"===t.value?(Oe(!1),ye(!1)):"none-comparison"===t.value&&(ue(void 0),fe(void 0),Oe(!0),ye(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ce(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isBefore(T()(be,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:be,inputProps:{disabled:_e},onChange:function(e){fe(e)},isValidDate:function(e){return e.isAfter(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===ae?ue(e.clone().subtract(1,"years")):"month-on-month"===ae&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(ke,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ke,onChange:function(e){Ce(e),"year-over-year"===ae?fe(e.clone().subtract(1,"years")):"month-on-month"===ae&&fe(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Ae},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ge}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:ze,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Qt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="metercost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:ot,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:Xe.name,UNIT:"("+Xe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:tt,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:ot,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:st,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:ot,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:pt,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:Xe.name,VALUE:tt.toFixed(2),UNIT:"("+Xe.unit+")"}),baseTitle:o("Base Period Costs CATEGORY VALUE UNIT",{CATEGORY:Xe.name,VALUE:ht.toFixed(2),UNIT:"("+Xe.unit+")"}),labels:Nt,data:Yt,options:vt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Bt,data:Ht,options:Ut}),r.a.createElement("br",null),r.a.createElement(Je,{data:Wt,title:o("Detailed Data"),columns:Jt,pagesize:50}))}))),ze=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ke=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var _=Object(n.useState)(void 0),y=Object(i.a)(_,2),Y=y[0],D=y[1],N=Object(n.useState)(void 0),C=Object(i.a)(N,2),U=C[0],P=C[1],R=Object(n.useState)([]),F=Object(i.a)(R,2),w=F[0],B=F[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(v.clone().startOf("day")),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)(v),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(void 0),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(!0),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)([]),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)({}),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)([]),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)([]),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)({}),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)([]),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Je=Object(i.a)(Le,2),qe=Je[0],Ke=Je[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)(void 0),et=Object(i.a)(Qe,2),tt=et[0],at=et[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),ce(t),D([t[0]].map((function(e){return e.label}))),P([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),B(e[0]),J(e[0]),e[0].length>0?(W(e[0][0].value),ue(!1)):(W(void 0),ue(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var nt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Meter Trend")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(U),console.log(K),console.log($.format("YYYY-MM-DDTHH:mm:ss")),console.log(ae.format("YYYY-MM-DDTHH:mm:ss")),ue(!0),fe(!1),Oe(!0),$e([]);var t=!1;fetch(I.a+"/reports/metertrend?meterid="+K+"&reportingperiodstartdatetime="+$.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+ae.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=Array();e.reporting_period.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),ye(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Ce(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),De(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),Re(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),Ve(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),Ie(r);var i=[{dataField:"startdatetime",text:o("Datetime"),sort:!0}];e.reporting_period.names.forEach((function(e,t){var a={};a.dataField="a"+t,a.text=e,a.sort=!0,i.push(a)})),Ke(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.names.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a]})),c.push(n)})),$e(c),at(e.excel_bytes_base64),ue(!1),fe(!0),Oe(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:nt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ie,onChange:function(e,t){D(t.map((function(e){return e.label})).join("/")),P(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),B(e[0]),J(e[0]),e[0].length>0?(W(e[0][0].value),ue(!1)):(W(void 0),ue(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:Y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:nt,for:"meterSelect"},o("Meter")),r.a.createElement(u.a,{inline:!0},r.a.createElement(g.a,{placeholder:o("Search"),onChange:function(e){var t=e.target.value.toLowerCase(),a=w.filter((function(e){return e.label.toLowerCase().includes(t)}));J(t.length?a:w),a.length>0?(W(a[0].value),ue(!1)):(W(void 0),ue(!0))}}),r.a.createElement(h.a,{type:"select",id:"meterSelect",name:"meterSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:nt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:$,onChange:function(e){Q(e)},isValidDate:function(e){return e.isBefore(T()(ae,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:nt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:ae,onChange:function(e){ne(e)},isValidDate:function(e){return e.isAfter(T()($,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:me},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:be}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ee,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+tt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="metertrend.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(k.a,{reportingTitle:o("Trend Values"),baseTitle:!0,labels:ke,data:Te,options:_e}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ge,data:Ae,options:Pe}),r.a.createElement("br",null),r.a.createElement(ze,{data:Xe,title:o("Detailed Data"),columns:qe,pagesize:50}))}))),We=a(1617),Ze=a(1618),Xe=a(1619),$e=a(47),Qe=a(62),et=a(63),tt=a(97),at=a(96),nt=a(320),rt=a(1159),ot=a.n(rt),it=a(956),ct=a(489),lt=a(297),st={legend:{display:!1},scales:{yAxes:[{display:!0,stacked:!1}],xAxes:[{stacked:!1,ticks:{display:!1},categoryPercentage:1,gridLines:{color:Object(M.m)("#fff",.1),display:!0}}]}},mt=function(e){Object(tt.a)(a,e);var t=Object(at.a)(a);function a(){var e;Object(Qe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={trendLog:[],currentEnergyValue:void 0,chartData:{labels:ot()(1,60),datasets:[{label:"",backgroundColor:Object(M.m)("#fff",.3)}]},pointList:[]},e}return Object(et.a)(a,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.refreshInterval),clearTimeout(this.refreshTimeout)}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0;var t=!1;fetch(I.a+"/reports/meterrealtime?meterid="+this.props.meterId,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(a){if(t){console.log(a);var n=a.energy_value.values,r=void 0,o=[];n.length>0&&(r=n[n.length-1]),a.parameters.names.forEach((function(e,t){var n={};n.name=e,n.value=void 0;var r=a.parameters.values[t];r.length>0&&(n.value=r[r.length-1]),o.push(n)})),e._isMounted&&e.setState({trendLog:n,currentEnergyValue:r,pointList:o})}else H.c.error(a.description)})).catch((function(e){console.log(e)})),this.refreshInterval=setInterval((function(){var t=!1;fetch(I.a+"/reports/meterrealtime?meterid="+e.props.meterId,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(a){if(t){console.log(a);var n=a.energy_value.values,r=void 0,o=[];n.length>0&&(r=n[n.length-1]),a.parameters.names.forEach((function(e,t){var n={};n.name=e,n.value=void 0;var r=a.parameters.values[t];r.length>0&&(n.value=r[r.length-1]),o.push(n)})),e._isMounted&&e.setState({trendLog:n,currentEnergyValue:r,pointList:o})}else H.c.error(a.description)})).catch((function(e){console.log(e)}))}),1e3*(60+Math.floor(Math.random()*Math.floor(10))))}},{key:"render",value:function(){var e=this.props.t,t=Object($e.a)(Object($e.a)({},this.state.chartData),{},{datasets:[Object($e.a)(Object($e.a)({},this.state.chartData.datasets[0]),{},{data:this.state.trendLog})]});return r.a.createElement(s.a,{className:"h-100 bg-gradient"},r.a.createElement(it.a,{className:"bg-transparent"},r.a.createElement("h5",{className:"text-white"},this.props.meterName),r.a.createElement("div",{className:"real-time-user display-4 font-weight-normal text-white"},this.state.currentEnergyValue)),r.a.createElement(m.a,{className:"text-white fs--1"},r.a.createElement("p",{className:"pb-2",style:{borderBottom:"1px solid rgba(255, 255, 255, 0.15)"}},e("Trend in the last hour of Energy Value Point (UNIT)",{UNIT:"kWh"})),r.a.createElement(nt.Line,{data:t,options:st,width:10,height:4}),r.a.createElement(ct.a,{flush:!0,className:"mt-4"},r.a.createElement(lt.a,{className:"bg-transparent d-flex justify-content-between px-0 py-1 font-weight-semi-bold border-top-0",style:{borderColor:"rgba(255, 255, 255, 0.05)"}},r.a.createElement("p",{className:"mb-0"},e("Related Parameters")),r.a.createElement("p",{className:"mb-0"},e("Realtime Value"))),this.state.pointList.map((function(e){return r.a.createElement(lt.a,{key:Fe()(),className:"bg-transparent d-flex justify-content-between px-0 py-1",style:{borderColor:"rgba(255, 255, 255, 0.05)"}},r.a.createElement("p",{className:"mb-0"},e.name),r.a.createElement("p",{className:"mb-0"},e.value))})))))}}]),a}(n.Component),ut=Object(P.a)()(mt),dt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=Object(n.useState)(0),E=Object(i.a)(h,2),O=E[0],v=E[1],_=Object(n.useState)(0),y=Object(i.a)(_,2),S=y[0],Y=y[1],T=Object(n.useState)([]),D=Object(i.a)(T,2),N=D[0],k=D[1];Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));Object(n.createRef)();var C=Object(n.useState)(void 0),U=Object(i.a)(C,2),P=U[0],R=U[1],F=Object(n.useState)(void 0),A=Object(i.a)(F,2),w=A[0],B=A[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(!1),z=Object(i.a)(q,2),K=z[0],W=z[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),B(t),R([t[0]].map((function(e){return e.label})));var a=[t[0]].map((function(e){return e.value})),n=!1;fetch(I.a+"/spaces/"+a+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(n=!0),e.json()})).then((function(e){n?(e=JSON.parse(JSON.stringify([e])),console.log(e),J(e[0]),W(!0)):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);return Object(n.useEffect)((function(){var e=L.length,t=Math.ceil(e/8);v(1),Y(t)}),[L]),Object(n.useEffect)((function(){k(L.slice(8*O-8,8*O))}),[O,L]),r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Meter Realtime")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,null,r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:w,onChange:function(e,t){R(t.map((function(e){return e.label})).join("/"));var a=e[e.length-1];W(!1);var n=!1;fetch(I.a+"/spaces/"+a+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(n=!0),e.json()})).then((function(e){n?(e=JSON.parse(JSON.stringify([e])),console.log(e),J(e[0]),W(!0)):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:P||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:K}))))))),r.a.createElement(d.a,{noGutters:!0},N.map((function(e){return r.a.createElement(p.a,{lg:"3",className:"pr-lg-2",key:Fe()()},r.a.createElement(ut,{meterId:e.id,meterName:e.name}))}))),r.a.createElement(We.a,null,r.a.createElement(Ze.a,null,r.a.createElement(Xe.a,{first:!0,href:"#",onClick:function(){return v(1)}})),r.a.createElement(Ze.a,null,r.a.createElement(Xe.a,{previous:!0,href:"#",onClick:function(){return O-1>=1?v(O-1):null}})),r.a.createElement(Ze.a,null,r.a.createElement(Xe.a,{href:"#"},O)),r.a.createElement(Ze.a,null,r.a.createElement(Xe.a,{next:!0,href:"#",onClick:function(){return O+1<=S?v(O+1):null}})),r.a.createElement(Ze.a,null,r.a.createElement(Xe.a,{last:!0,href:"#",onClick:function(){return v(S)}}))))}))),pt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),bt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),F=P[0],w=P[1],B=Object(n.useState)([]),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)([]),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)(void 0),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)("daily"),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(v.clone().startOf("month")),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(v),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(void 0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(!0),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(!0),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(!0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=Se[1],De=Object(n.useState)(!1),xe=Object(i.a)(De,2),Ne=(xe[0],xe[1],Object(n.useState)({name:"",unit:""})),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)(0),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)({}),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),bt=dt[0],ft=dt[1],gt=Object(n.useState)([]),ht=Object(i.a)(gt,2),Et=ht[0],Ot=ht[1],jt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),vt=Object(i.a)(jt,2),_t=vt[0],yt=vt[1],St=Object(n.useState)([]),Yt=Object(i.a)(St,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)(void 0),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),be(t),C([t[0]].map((function(e){return e.label}))),w([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),L(e[0]),K(e[0]),e[0].length>0?($(e[0][0].value),Ee(!1)):($(void 0),Ee(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var Mt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Master Meter Submeters Balance")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(F),console.log(X),console.log(te),console.log(oe.format("YYYY-MM-DDTHH:mm:ss")),console.log(se.format("YYYY-MM-DDTHH:mm:ss")),Ee(!0),_e(!1),Te(!0),Dt([]);var t=!1;fetch(I.a+"/reports/metersubmetersbalance?meterid="+X+"&periodtype="+te+"&reportingperiodstartdatetime="+oe.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+se.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),Me({name:e.meter.energy_category_name,unit:e.meter.unit_of_measure}),Fe(e.reporting_period.master_meter_consumption_in_category),we(e.reporting_period.submeters_consumption_in_category),Le(e.reporting_period.difference_in_category),Ke(parseFloat((100*e.reporting_period.percentage_difference).toFixed(2)));var a=Array();a.push({value:"a0",label:e.meter.energy_category_name}),$e(a);var n={};n.a0=e.reporting_period.timestamps,it(n);var r={a0:[]};e.reporting_period.difference_values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),at(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),mt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),Ot(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),ft(r),yt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.meter.energy_category_name+" ("+e.meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.difference_values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.difference_in_category.toFixed(2),i.push(c),Dt(i),Ct(e.excel_bytes_base64),Ee(!1),_e(!0),Te(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:pe,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),w(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/meters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),L(e[0]),K(e[0]),e[0].length>0?($(e[0][0].value),Ee(!1)):($(void 0),Ee(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Mt,for:"meterSelect"},o("Meter")),r.a.createElement(u.a,{inline:!0},r.a.createElement(g.a,{placeholder:o("Search"),onChange:function(e){var t=e.target.value.toLowerCase(),a=V.filter((function(e){return e.label.toLowerCase().includes(t)}));K(t.length?a:V),a.length>0?($(a[0].value),Ee(!1)):($(void 0),Ee(!0))}}),r.a.createElement(h.a,{type:"select",id:"meterSelect",name:"meterSelect",onChange:function(e){var t=e.target;return $(t.value)}},z.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)})))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Mt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ae(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:oe,onChange:function(e){ie(e)},isValidDate:function(e){return e.isBefore(T()(se,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Mt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:se,onChange:function(e){me(e)},isValidDate:function(e){return e.isAfter(T()(oe,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:he},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:ve}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ye,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+kt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="metersubmetersbalance.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{title:o("Reporting Period Master Meter Consumption CATEGORY UNIT",{CATEGORY:Ce.name,UNIT:"("+Ce.unit+")"}),color:"success"},r.a.createElement(_.a,{end:Re,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{title:o("Reporting Period Submeters Consumption CATEGORY UNIT",{CATEGORY:Ce.name,UNIT:"("+Ce.unit+")"}),color:"warning"},r.a.createElement(_.a,{end:Ie,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{title:o("Reporting Period Difference CATEGORY UNIT",{CATEGORY:Ce.name,UNIT:"("+Ce.unit+")"}),color:"warning"},r.a.createElement(_.a,{end:Ve,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{title:o("Reporting Period Percentage Difference")+"(%)",color:"warning"},r.a.createElement(_.a,{end:ze,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Difference CATEGORY VALUE UNIT",{CATEGORY:Ce.name,VALUE:Ve.toFixed(2),UNIT:"("+Ce.unit+")"}),baseTitle:o("Reporting Period Master Meter Consumption CATEGORY VALUE UNIT",{CATEGORY:Ce.name,VALUE:Re.toFixed(2),UNIT:"("+Ce.unit+")"})+" - "+o("Reporting Period Submeters Consumption CATEGORY VALUE UNIT",{CATEGORY:Ce.name,VALUE:Ie.toFixed(2),UNIT:"("+Ce.unit+")"}),labels:ot,data:tt,options:Xe}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Et,data:bt,options:st}),r.a.createElement("br",null),r.a.createElement(pt,{data:Tt,title:o("Detailed Data"),columns:_t,pagesize:50})))}))),ft=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),gt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)({name:"",unit:""}),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)(0),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)(""),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)(0),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)(0),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)(0),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),gt=Object(i.a)(bt,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)(void 0),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/offlinemeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var Xt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Offline Meter Energy")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),qt([]);var t=!1;fetch(I.a+"/reports/offlinemeterenergy?offlinemeterid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),ze({name:e.offline_meter.energy_category_name,unit:e.offline_meter.unit_of_measure}),tt(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),Xe(e.reporting_period.total_in_category),ot(e.reporting_period.total_in_kgce/1e3),st(e.reporting_period.total_in_kgco2e/1e3),pt(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.offline_meter.energy_category_name}),Et(a);var n={};n.a0=e.reporting_period.timestamps,Tt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),_t(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),kt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),At(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),Pt(r),Gt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.offline_meter.energy_category_name+" ("+e.offline_meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),qt(i),Zt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/offlinemeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"offlineMeterSelect"},o("Offline Meter")),r.a.createElement(h.a,{type:"select",id:"offlineMeterSelect",name:"offlineMeterSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Wt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="offlinemeterenergy.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:qe.name,UNIT:"("+qe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:Ze,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:rt,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:lt,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:Ze.toFixed(2),UNIT:"("+qe.unit+")"}),baseTitle:o("Base Period Consumption CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:dt.toFixed(2),UNIT:"("+qe.unit+")"}),labels:Yt,data:vt,options:ht}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ht,data:Ut,options:Nt}),r.a.createElement("br",null),r.a.createElement(ft,{data:Jt,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),ht=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Et=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)({name:"",unit:""}),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)(0),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)(""),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)(0),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)(0),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)(0),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],Et=ft[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)(void 0),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/offlinemeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var Xt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Offline Meter Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),qt([]);var t=!1;fetch(I.a+"/reports/offlinemetercost?offlinemeterid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),ze({name:e.offline_meter.energy_category_name,unit:e.offline_meter.unit_of_measure}),tt(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),Xe(e.reporting_period.total_in_category),ot(e.reporting_period.total_in_kgce/1e3),st(e.reporting_period.total_in_kgco2e/1e3),pt(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.offline_meter.energy_category_name}),Et(a);var n={};n.a0=e.reporting_period.timestamps,Tt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),_t(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),kt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),At(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),Pt(r),Gt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.offline_meter.energy_category_name+" ("+e.offline_meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),qt(i),Zt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/offlinemeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"offlineMeterSelect"},o("Offline Meter")),r.a.createElement(h.a,{type:"select",id:"offlineMeterSelect",name:"offlineMeterSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Wt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="offlinemetercost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:et,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:qe.name,UNIT:"("+qe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:Ze,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:rt,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:lt,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:Ze.toFixed(2),UNIT:"("+qe.unit+")"}),baseTitle:o("Base Period Costs CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:dt.toFixed(2),UNIT:"("+qe.unit+")"}),labels:Yt,data:vt,options:gt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ht,data:Ut,options:Nt}),r.a.createElement("br",null),r.a.createElement(ht,{data:Jt,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),Ot=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),jt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)({name:"",unit:""}),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)(0),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)(""),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)(0),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)(0),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)(0),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)({}),jt=Object(i.a)(Et,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)(void 0),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/virtualmeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var Xt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Virtual Meter Energy")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),qt([]);var t=!1;fetch(I.a+"/reports/virtualmeterenergy?virtualmeterid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),ze({name:e.virtual_meter.energy_category_name,unit:e.virtual_meter.unit_of_measure}),tt(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),Xe(e.reporting_period.total_in_category),ot(e.reporting_period.total_in_kgce/1e3),st(e.reporting_period.total_in_kgco2e/1e3),pt(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.virtual_meter.energy_category_name}),ht(a);var n={};n.a0=e.reporting_period.timestamps,Tt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),_t(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),kt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),At(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),Pt(r),Gt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.virtual_meter.energy_category_name+" ("+e.virtual_meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),qt(i),Zt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/virtualmeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"virtualMeterSelect"},o("Virtual Meter")),r.a.createElement(h.a,{type:"select",id:"virtualMeterSelect",name:"virtualMeterSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Wt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="virtualmeterenergy.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:qe.name,UNIT:"("+qe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:Ze,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:rt,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:lt,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:Ze.toFixed(2),UNIT:"("+qe.unit+")"}),baseTitle:o("Base Period Consumption CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:dt.toFixed(2),UNIT:"("+qe.unit+")"}),labels:Yt,data:vt,options:gt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ht,data:Ut,options:Nt}),r.a.createElement("br",null),r.a.createElement(Ot,{data:Jt,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),vt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),_t=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)({name:"",unit:""}),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)(0),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)(""),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)(0),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)(0),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)(0),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)({}),Ot=Object(i.a)(Et,2),jt=Ot[0],_t=Ot[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)(void 0),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/virtualmeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[o]);var Xt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Meter Data")),r.a.createElement(l.a,{active:!0},o("Virtual Meter Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),qt([]);var t=!1;fetch(I.a+"/reports/virtualmetercost?virtualmeterid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e),ze({name:e.virtual_meter.energy_category_name,unit:e.virtual_meter.unit_of_measure}),tt(parseFloat(100*e.reporting_period.increment_rate).toFixed(2)+"%"),Xe(e.reporting_period.total_in_category),ot(e.reporting_period.total_in_kgce/1e3),st(e.reporting_period.total_in_kgco2e/1e3),pt(e.base_period.total_in_category);var a=Array();a.push({value:"a0",label:e.virtual_meter.energy_category_name}),ht(a);var n={};n.a0=e.reporting_period.timestamps,Tt(n);var r={a0:[]};e.reporting_period.values.forEach((function(e,t){r.a0[t]=e.toFixed(2)})),_t(r),a=Array(),e.parameters.names.forEach((function(e,t){a.push({value:"a"+t,label:e})})),kt(a),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),At(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),Pt(r),Gt([{dataField:"startdatetime",text:o("Datetime"),sort:!0},{dataField:"a0",text:e.virtual_meter.energy_category_name+" ("+e.virtual_meter.unit_of_measure+")",sort:!0}]);var i=[];e.reporting_period.timestamps.forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,n.a0=e.reporting_period.values[a].toFixed(2),i.push(n)}));var c={};c.id=i.length,c.startdatetime=o("Total"),c.a0=e.reporting_period.total_in_category.toFixed(2),i.push(c),qt(i),Zt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/virtualmeters",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"virtualMeterSelect"},o("Virtual Meter")),r.a.createElement(h.a,{type:"select",id:"virtualMeterSelect",name:"virtualMeterSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Wt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="virtualmetercost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},r.a.createElement(N.a,{rate:et,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:qe.name,UNIT:"("+qe.unit+")"}),color:"success"},r.a.createElement(_.a,{end:Ze,duration:2,prefix:"",separator:",",decimals:2,decimal:"."})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},r.a.createElement(_.a,{end:rt,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:et,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(T)"}),color:"warning"},r.a.createElement(_.a,{end:lt,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:Ze.toFixed(2),UNIT:"("+qe.unit+")"}),baseTitle:o("Base Period Costs CATEGORY VALUE UNIT",{CATEGORY:qe.name,VALUE:dt.toFixed(2),UNIT:"("+qe.unit+")"}),labels:Yt,data:jt,options:gt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Ht,data:Ut,options:Nt}),r.a.createElement("br",null),r.a.createElement(vt,{data:Jt,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),yt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,o=e.setRedirectUrl,h=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),a=Object(M.e)("user_name"),n=Object(M.e)("user_display_name"),r=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",a,288e5),Object(M.d)("user_display_name",n,288e5),Object(M.d)("user_uuid",r,288e5),Object(M.d)("token",i,288e5)):(o("/authentication/basic/login"),t(!0))}));Object(n.createRef)();var _=Object(n.useState)(void 0),y=Object(i.a)(_,2),Y=y[0],N=y[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),w=F[0],B=F[1],G=Object(n.useState)(!1),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(!0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)(void 0),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)(void 0),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),B(t),N([t[0]].map((function(e){return e.label}))),ne([t[0]].map((function(e){return e.value}))),fe(!1),J(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var ge=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),he=[{dataField:"metername",headerClasses:"border-0",text:h("Name"),classes:"border-0 py-2 align-middle",formatter:function(e,t){var a=t.name;return r.a.createElement(Ae.b,{to:"#"},r.a.createElement(ke.a,{tag:Ie.a,align:"center"},r.a.createElement(ke.a,{body:!0,className:"ml-2"},r.a.createElement("h5",{className:"mb-0 fs--1"},a))))},sort:!0},{dataField:"space",headerClasses:"border-0",text:h("Space"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"costcenter",headerClasses:"border-0",text:h("Cost Center"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"energycategory",headerClasses:"border-0",text:h("Energy Category"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"description",headerClasses:"border-0",text:h("Description"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"startvalue",headerClasses:"border-0",text:h("Start Value"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"endvalue",headerClasses:"border-0",text:h("End Value"),classes:"border-0 py-2 align-middle",sort:!0},{dataField:"",headerClasses:"border-0",text:"",classes:"border-0 py-2 align-middle",formatter:function(e,t){var a=t.id;return r.a.createElement(Ce.a,null,r.a.createElement(Me.a,{color:"link",size:"sm",className:"text-600 btn-reveal mr-3"},r.a.createElement(He.a,{icon:"ellipsis-h",className:"fs--1"})),r.a.createElement(Ue.a,{right:!0,className:"border py-2"},r.a.createElement(Pe.a,{onClick:function(){return console.log("Edit: ",a)}},h("Edit Meter"))))},align:"right"}],Ee="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,h("Meter Data")),r.a.createElement(l.a,{active:!0},h("Meter Tracking")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(ae),console.log(ie.format("YYYY-MM-DDTHH:mm:ss")),console.log(me.format("YYYY-MM-DDTHH:mm:ss")),fe(!0),J(!1),W(!0),P([]);var t=!1;fetch(I.a+"/reports/metertracking?spaceid="+ae+"&reportingperiodstartdatetime="+ie.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+me.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){var a=[];e.meters.forEach((function(e,t){a.push({id:e.id,name:e.meter_name,space:e.space_name,costcenter:e.cost_center_name,energycategory:e.energy_category_name,description:e.description,startvalue:e.start_value,endvalue:e.end_value})})),P(a),Q(e.excel_bytes_base64),J(!0),W(!1),fe(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"space"},h("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:w,onChange:function(e,t){N(t.map((function(e){return e.label})).join("/")),ne(e[e.length-1]),P([]),W(!0),fe(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:Y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodBeginsDatetime"},h("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ie,onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodEndsDatetime"},h("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:me,onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:be},h("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:L}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:K,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+$).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="metertracking.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},h("Export"))))))),r.a.createElement(ge,{data:U,title:h("Meter List"),columns:he,pagesize:50}))}))),St=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Yt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),Yt=Object(i.a)(yt,2),Tt=Yt[0],Dt=Yt[1],xt=Object(n.useState)([]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)({}),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1],Ft=Object(n.useState)([]),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1],wt=Object(n.useState)([]),Bt=Object(i.a)(wt,2),Gt=Bt[0],Vt=Bt[1],Lt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Jt=Object(i.a)(Lt,2),qt=Jt[0],zt=Jt[1],Kt=Object(n.useState)(void 0),Wt=Object(i.a)(Kt,2),Zt=Wt[0],Xt=Wt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var $t="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Vt([]);var t=!1;fetch(I.a+"/reports/tenantenergycategory?tenantid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),it(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),Ke(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area/1e3,mt(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",i.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area/1e3,bt(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),at(l);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Et(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),_t(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),Dt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),Ct(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Rt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),It(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Vt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),zt(b),Xt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Zt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ot.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCE/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:pt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:pt.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},pt.value&&r.a.createElement(_.a,{end:pt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:tt,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ht,data:vt,options:Tt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:kt,data:Pt,options:At}),r.a.createElement("br",null),r.a.createElement(St,{data:Gt,title:o("Detailed Data"),columns:qt,pagesize:50}))}))),Tt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Dt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Dt=St[1],xt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Nt=Object(i.a)(xt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)(void 0),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ft="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Dt([]);var t=!1;fetch(I.a+"/reports/tenantenergyitem?tenantid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),Ke(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}$e(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),at(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),it(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),mt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),bt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Et(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),_t(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Dt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ct(b),Rt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ft,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ft,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Pt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},Xe.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement("br",null),r.a.createElement(Tt,{data:Yt,title:o("Detailed Data"),columns:kt,pagesize:50}))}))),xt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Nt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),Nt=Object(i.a)(Dt,2),kt=Nt[0],Ct=Nt[1],Mt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Ut=Object(i.a)(Mt,2),Pt=Ut[0],Rt=Ut[1],Ft=Object(n.useState)(void 0),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var wt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Ct([]);var t=!1;fetch(I.a+"/reports/tenantcost?tenantid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",n.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,a.push(n),at(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),Ke(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),$e(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),it(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),mt(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),bt(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),Et(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),_t(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),Tt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),Ct(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Rt(p),It(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:wt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:wt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+At).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantcost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ot,data:st,options:pt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement("br",null),r.a.createElement(xt,{data:kt,title:o("Detailed Data"),columns:Pt,pagesize:50}))}))),kt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ct=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ct="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/tenantload?tenantid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.average_per_unit_area=e.reporting_period.averages_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),vt(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Yt(l),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ct,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ct,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.average_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(kt,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),Mt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ut=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/tenantstatistics?tenantid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.mean_per_unit_area=e.reporting_period.means_per_unit_area[n],r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.median_per_unit_area=e.reporting_period.medians_per_unit_area[n],r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.minimum_per_unit_area=e.reporting_period.minimums_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.stdev_per_unit_area=e.reporting_period.stdevs_per_unit_area[n],r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",r.variance_per_unit_area=e.reporting_period.variances_per_unit_area[n],a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantstatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.mean_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.median_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.minimum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.stdev_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.variance_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(Mt,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),Pt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Rt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)({}),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Rt=Mt[1],Ft=Object(n.useState)([]),Ht=Object(i.a)(Ft,2),At=Ht[0],It=Ht[1],wt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Bt=Object(i.a)(wt,2),Gt=Bt[0],Vt=Bt[1],Lt=Object(n.useState)(void 0),Jt=Object(i.a)(Lt,2),qt=Jt[0],zt=Jt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),It([]);var t=!1;fetch(I.a+"/reports/tenantsaving?tenantid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area_saving[n],a.push(r)})),at(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",n.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area_saving/1e3,it(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area_saving/1e3,mt(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Ke(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),bt(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),Et(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),_t(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),Tt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),kt(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),Rt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),It(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Vt(p),zt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+qt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantsaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:ot.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:ot.value_per_unit_area,footunit:"(TCE/M\xb2)"},ot.value&&r.a.createElement(_.a,{end:ot.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Yt,data:Nt,options:Ut}),r.a.createElement("br",null),r.a.createElement(Pt,{data:At,title:o("Detailed Data"),columns:Gt,pagesize:50}))}))),Ft=a(1022),Ht=a(311),At=a(461),It=a.n(At),wt=function(e,t){return"".concat(t).concat(e.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))},Bt=function(e){var t=e.name,a=e.description,n=e.startdate,o=e.enddate,i=e.subtotalinput,c=e.unit,l=e.subtotalcost;return r.a.createElement("tr",null,r.a.createElement("td",{className:"align-middle"},r.a.createElement("h6",{className:"mb-0 text-nowrap"},t),r.a.createElement("p",{className:"mb-0"},a)),r.a.createElement("td",{className:"align-middle text-center"},n),r.a.createElement("td",{className:"align-middle text-center"},o),r.a.createElement("td",{className:"align-middle text-center"},i.toFixed(3).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")),r.a.createElement("td",{className:"align-middle text-right"},c),r.a.createElement("td",{className:"align-middle text-right"},l.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")))},Gt=function(e){var t=e.institution,a=e.logo,n=e.address,o=e.t;return r.a.createElement(d.a,{className:"align-items-center text-center mb-3"},r.a.createElement(p.a,{sm:6,className:"text-sm-left"},r.a.createElement("img",{src:a,alt:"invoice",width:150})),r.a.createElement(p.a,{className:"text-sm-right mt-3 mt-sm-0"},r.a.createElement("h2",{className:"mb-3"},o("Payment Notice")),r.a.createElement("h5",null,t),n&&r.a.createElement("p",{className:"fs--1 mb-0",dangerouslySetInnerHTML:Object(Ht.a)(n)})),r.a.createElement(p.a,{xs:12},r.a.createElement("hr",null)))},Vt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var _=Object(n.useState)(void 0),y=Object(i.a)(_,2),Y=y[0],D=y[1],N=Object(n.useState)(void 0),k=Object(i.a)(N,2),C=k[0],U=k[1],P=Object(n.useState)([]),R=Object(i.a)(P,2),F=R[0],w=R[1],B=Object(n.useState)(void 0),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)(v.clone().subtract(1,"months").endOf("month")),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(void 0),ee=Object(i.a)(Q,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!0),re=Object(i.a)(ne,2),oe=re[0],ie=re[1],ce=Object(n.useState)(!0),le=Object(i.a)(ce,2),se=le[0],me=le[1],ue=Object(n.useState)(!0),de=Object(i.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(void 0),ge=Object(i.a)(fe,2),he=ge[0],Ee=ge[1],Oe=Object(n.useState)(0),je=Object(i.a)(Oe,2),ve=je[0],_e=je[1],ye=Object(n.useState)(0),Se=Object(i.a)(ye,2),Ye=Se[0],Te=(Se[1],Object(n.useState)(0)),De=Object(i.a)(Te,2),xe=De[0],Ne=De[1],ke=Object(n.useState)(0),Ce=Object(i.a)(ke,2),Me=Ce[0],Ue=Ce[1],Pe=Object(n.useState)(void 0),Re=Object(i.a)(Pe,2),Fe=Re[0],He=Re[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),ae(t),D([t[0]].map((function(e){return e.label}))),U([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),w(e[0]),e[0].length>0?(L(e[0][0].value),ie(!1)):(L(void 0),ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ae="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Tenant Bill")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(C),console.log(V),console.log(z.format("YYYY-MM-DDTHH:mm:ss")),console.log(X.format("YYYY-MM-DDTHH:mm:ss")),ie(!0),me(!1),be(!0);var t=!1;fetch(I.a+"/reports/tenantbill?tenantid="+V+"&reportingperiodstartdatetime="+z.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+X.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.startdate=z.format("YYYY-MM-DD"),r.enddate=X.format("YYYY-MM-DD"),r.subtotalinput=e.reporting_period.subtotals_input[n],r.subtotalcost=e.reporting_period.subtotals_cost[n],a.push(r)})),Ee({institution:e.tenant.name,logo:It.a,address:e.tenant.rooms+"<br />"+e.tenant.floors+"<br />"+e.tenant.buildings,tax:.01,currency:e.reporting_period.currency_unit,user:{name:e.tenant.name,address:e.tenant.rooms+"<br />"+e.tenant.floors+"<br />"+e.tenant.buildings,email:e.tenant.email,cell:e.tenant.phone},summary:{invoice_no:v.format("YYYYMMDDHHmmss"),lease_number:e.tenant.lease_number,invoice_date:v.format("YYYY-MM-DD"),payment_due:v.clone().add(7,"days").format("YYYY-MM-DD"),amount_due:e.reporting_period.total_cost},products:a}),_e(e.reporting_period.total_cost),Ne(e.reporting_period.total_cost*Ye),Ue(e.reporting_period.total_cost*(1+Ye)),He(e.excel_bytes_base64),ie(!1),me(!0),be(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ae,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:te,onChange:function(e,t){D(t.map((function(e){return e.label})).join("/")),U(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),w(e[0]),e[0].length>0?(L(e[0][0].value),ie(!1)):(L(void 0),ie(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:Y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Ae,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return L(t.value)}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ae,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:z,onChange:function(e){K(e)},isValidDate:function(e){return e.isBefore(T()(X,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ae,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:X,onChange:function(e){$(e)},isValidDate:function(e){return e.isAfter(T()(z,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:oe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:se}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:pe,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Fe).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantbill.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(s.a,{className:"mb-3"},void 0!==he&&r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{md:!0},r.a.createElement("h5",{className:"mb-2 mb-md-0"},o("Lease Contract Number"),": ",he.summary.lease_number))))),r.a.createElement(s.a,null,void 0!==he&&r.a.createElement(m.a,null,r.a.createElement(Gt,{institution:he.institution,logo:he.logo,address:he.address,t:o}),r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,null,r.a.createElement("h6",{className:"text-500"},o("Bill To")),r.a.createElement("h5",null,he.user.name),r.a.createElement("p",{className:"fs--1",dangerouslySetInnerHTML:Object(Ht.a)(he.user.address)}),r.a.createElement("p",{className:"fs--1"},r.a.createElement("a",{href:"mailto:".concat(he.user.email)},he.user.email),r.a.createElement("br",null),r.a.createElement("a",{href:"tel:".concat(he.user.cell.split("-").join(""))},he.user.cell))),r.a.createElement(p.a,{sm:"auto",className:"ml-auto"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement(Ft.a,{size:"sm",borderless:!0,className:"fs--1"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-sm-right"},o("Bill Number"),":"),r.a.createElement("td",null,he.summary.invoice_no)),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-sm-right"},o("Lease Contract Number"),":"),r.a.createElement("td",null,he.summary.lease_number)),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-sm-right"},o("Bill Date"),":"),r.a.createElement("td",null,he.summary.invoice_date)),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-sm-right"},o("Payment Due Date"),":"),r.a.createElement("td",null,he.summary.payment_due)),r.a.createElement("tr",{className:"alert-success font-weight-bold"},r.a.createElement("th",{className:"text-sm-right"},o("Amount Payable"),":"),r.a.createElement("td",null,wt(he.summary.amount_due,he.currency)))))))),r.a.createElement("div",{className:"table-responsive mt-4 fs--1"},r.a.createElement(Ft.a,{striped:!0,className:"border-bottom"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"bg-primary text-white"},r.a.createElement("th",{className:"border-0"},o("Energy Category")),r.a.createElement("th",{className:"border-0 text-center"},o("Billing Period Start")),r.a.createElement("th",{className:"border-0 text-center"},o("Billing Period End")),r.a.createElement("th",{className:"border-0 text-center"},o("Quantity")),r.a.createElement("th",{className:"border-0 text-right"},o("Unit")),r.a.createElement("th",{className:"border-0 text-right"},o("Amount")))),r.a.createElement("tbody",null,Object(M.k)(he.products)&&he.products.map((function(e,t){return r.a.createElement(Bt,Object.assign({},e,{key:t}))}))))),r.a.createElement(d.a,{noGutters:!0,className:"justify-content-end"},r.a.createElement(p.a,{xs:"auto"},r.a.createElement(Ft.a,{size:"sm",borderless:!0,className:"fs--1 text-right"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"text-900"},o("Subtotal"),":"),r.a.createElement("td",{className:"font-weight-semi-bold"},wt(ve,he.currency))),r.a.createElement("tr",null,r.a.createElement("th",{className:"text-900"},o("VAT Output Tax"),":"),r.a.createElement("td",{className:"font-weight-semi-bold"},wt(xe,he.currency))),r.a.createElement("tr",{className:"border-top"},r.a.createElement("th",{className:"text-900"},o("Total Amount Payable"),":"),r.a.createElement("td",{className:"font-weight-semi-bold"},wt(Me,he.currency))))))))))}))),Lt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Jt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),N=Object(i.a)(D,2),k=N[0],C=N[1],U=Object(n.useState)([]),P=Object(i.a)(U,2),R=P[0],F=P[1],w=Object(n.useState)(h.clone().startOf("month")),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(h),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!1),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],me=Object(n.useState)([{dataField:"name",text:o("Name"),sort:!0},{dataField:"space",text:o("Space"),sort:!0}]),ue=Object(i.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(void 0),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),X(t),Y([t[0]].map((function(e){return e.label}))),C([t[0]].map((function(e){return e.value}))),te(!1),oe(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ee="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Tenant Data")),r.a.createElement(l.a,{active:!0},o("Batch Analysis")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(G.format("YYYY-MM-DDTHH:mm:ss")),console.log(q.format("YYYY-MM-DDTHH:mm:ss")),te(!0),oe(!1),se(!0),F([]);var t=!1;fetch(I.a+"/reports/tenantbatch?spaceid="+k+"&reportingperiodstartdatetime="+G.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+q.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.tenants.length>0&&e.tenants.forEach((function(e,t){var n={};n.id=e.id,n.name=e.tenant_name,n.space=e.space_name,n.costcenter=e.cost_center_name,e.values.forEach((function(e,t){n["a"+t]=e.toFixed(2)})),a.push(n)})),F(a);var n=[];n.push({dataField:"name",text:o("Name"),sort:!0}),n.push({dataField:"space",text:o("Space"),sort:!0}),e.energycategories.forEach((function(e,t){n.push({dataField:"a"+t,text:e.name+" ("+e.unit_of_measure+")",sort:!0})})),pe(n),he(e.excel_bytes_base64),te(!1),oe(!0),se(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Z,onChange:function(e,t){Y(t.map((function(e){return e.label})).join("/")),C(e[e.length-1]),F([]),se(!0),te(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:G,onChange:function(e){V(e)},isValidDate:function(e){return e.isBefore(T()(q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:q,onChange:function(e){z(e)},isValidDate:function(e){return e.isAfter(T()(G,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:ee},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:re}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ge).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="tenantbatch.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(Lt,{data:R,title:o("Detailed Data"),columns:de,pagesize:50}))}))),qt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),zt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],zt=Lt[1],Kt=Object(n.useState)(void 0),Wt=Object(i.a)(Kt,2),Zt=Wt[0],Xt=Wt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var $t="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Gt([]);var t=!1;fetch(I.a+"/reports/storeenergycategory?storeid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),it(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),Ke(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area/1e3,mt(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",i.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area/1e3,bt(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),at(l);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Et(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),_t(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),Tt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),kt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Pt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),At(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Gt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),zt(b),Xt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:$t,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:$t,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Zt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storeenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ot.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCE/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:pt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:pt.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},pt.value&&r.a.createElement(_.a,{end:pt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:tt,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Nt,data:Ut,options:Ht}),r.a.createElement("br",null),r.a.createElement(qt,{data:Bt,title:o("Detailed Data"),columns:Jt,pagesize:50}))}))),Kt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Wt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)(void 0),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Rt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Tt([]);var t=!1;fetch(I.a+"/reports/storeenergyitem?storeid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),Ke(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}$e(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),at(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),it(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),mt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),bt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Et(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),_t(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Tt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),kt(b),Pt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ut).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storeenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},Xe.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement("br",null),r.a.createElement(Kt,{data:Yt,title:o("Detailed Data"),columns:Nt,pagesize:50}))}))),Zt=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Xt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)(void 0),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var It="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(Q),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),kt([]);var t=!1;fetch(I.a+"/reports/storecost?storeid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",n.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,a.push(n),at(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),Ke(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),$e(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),it(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),mt(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),bt(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),Et(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),_t(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),Tt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),kt(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Pt(p),At(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ht).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storecost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ot,data:st,options:pt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement("br",null),r.a.createElement(Zt,{data:Nt,title:o("Detailed Data"),columns:Ut,pagesize:50}))}))),$t=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Qt=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/storeload?storeid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.average_per_unit_area=e.reporting_period.averages_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),vt(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Yt(l),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storeload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.average_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement($t,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),ea=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ta=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/storestatistics?storeid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.mean_per_unit_area=e.reporting_period.means_per_unit_area[n],r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.median_per_unit_area=e.reporting_period.medians_per_unit_area[n],r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.minimum_per_unit_area=e.reporting_period.minimums_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.stdev_per_unit_area=e.reporting_period.stdevs_per_unit_area[n],r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",r.variance_per_unit_area=e.reporting_period.variances_per_unit_area[n],a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storestatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.mean_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.median_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.minimum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.stdev_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.variance_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(ea,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),aa=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),na=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)({}),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)(void 0),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var zt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),At([]);var t=!1;fetch(I.a+"/reports/storesaving?storeid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area_saving[n],a.push(r)})),at(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",n.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area_saving/1e3,it(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area_saving/1e3,mt(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Ke(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),bt(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),Et(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),_t(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),Tt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),kt(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),Pt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),At(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Gt(p),qt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Jt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storesaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:ot.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:ot.value_per_unit_area,footunit:"(TCE/M\xb2)"},ot.value&&r.a.createElement(_.a,{end:ot.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Yt,data:Nt,options:Ut}),r.a.createElement("br",null),r.a.createElement(aa,{data:Ht,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),ra=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),oa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),N=Object(i.a)(D,2),k=N[0],C=N[1],U=Object(n.useState)([]),P=Object(i.a)(U,2),R=P[0],F=P[1],w=Object(n.useState)(h.clone().startOf("month")),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(h),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!1),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],me=Object(n.useState)([{dataField:"name",text:o("Name"),sort:!0},{dataField:"space",text:o("Space"),sort:!0}]),ue=Object(i.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(void 0),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),X(t),Y([t[0]].map((function(e){return e.label}))),C([t[0]].map((function(e){return e.value}))),te(!1),oe(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ee="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Store Data")),r.a.createElement(l.a,{active:!0},o("Batch Analysis")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(G.format("YYYY-MM-DDTHH:mm:ss")),console.log(q.format("YYYY-MM-DDTHH:mm:ss")),te(!0),oe(!1),se(!0),F([]);var t=!1;fetch(I.a+"/reports/storebatch?spaceid="+k+"&reportingperiodstartdatetime="+G.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+q.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.stores.length>0&&e.stores.forEach((function(e,t){var n={};n.id=e.id,n.name=e.store_name,n.space=e.space_name,n.costcenter=e.cost_center_name,e.values.forEach((function(e,t){n["a"+t]=e.toFixed(2)})),a.push(n)})),F(a);var n=[];n.push({dataField:"name",text:o("Name"),sort:!0}),n.push({dataField:"space",text:o("Space"),sort:!0}),e.energycategories.forEach((function(e,t){n.push({dataField:"a"+t,text:e.name+" ("+e.unit_of_measure+")",sort:!0})})),pe(n),he(e.excel_bytes_base64),te(!1),oe(!0),se(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Z,onChange:function(e,t){Y(t.map((function(e){return e.label})).join("/")),C(e[e.length-1]),F([]),se(!0),te(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:G,onChange:function(e){V(e)},isValidDate:function(e){return e.isBefore(T()(q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:q,onChange:function(e){z(e)},isValidDate:function(e){return e.isAfter(T()(G,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:ee},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:re}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ge).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="storebatch.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(ra,{data:R,title:o("Detailed Data"),columns:de,pagesize:50}))}))),ia=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ca=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)(void 0),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Xt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Gt([]);var t=!1;fetch(I.a+"/reports/shopfloorenergycategory?shopfloorid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),it(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),Ke(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area/1e3,mt(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",i.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area/1e3,bt(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),at(l);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Et(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),_t(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),Tt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),kt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Pt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),At(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Gt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),qt(b),Zt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Xt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Xt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Wt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ot.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCE/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:pt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:pt.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},pt.value&&r.a.createElement(_.a,{end:pt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:tt,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Nt,data:Ut,options:Ht}),r.a.createElement("br",null),r.a.createElement(ia,{data:Bt,title:o("Detailed Data"),columns:Jt,pagesize:50}))}))),la=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),sa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)(void 0),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Rt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Tt([]);var t=!1;fetch(I.a+"/reports/shopfloorenergyitem?shopfloorid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)})),Ke(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}$e(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),at(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),it(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),mt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),bt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Et(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),_t(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Tt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),kt(b),Pt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Rt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Rt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ut).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},Xe.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement(la,{data:Yt,title:o("Detailed Data"),columns:Nt,pagesize:50}))}))),ma=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ua=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)(void 0),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var It="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),kt([]);var t=!1;fetch(I.a+"/reports/shopfloorcost?shopfloorid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area[n],a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",n.subtotal_per_unit_area=e.reporting_period.total_per_unit_area,a.push(n),at(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),Ke(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),$e(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),it(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),mt(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),bt(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),Et(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),_t(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),Tt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),kt(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Pt(p),At(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:It,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:It,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ht).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorcost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ot,data:st,options:pt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement("br",null),r.a.createElement(ma,{data:Nt,title:o("Detailed Data"),columns:Ut,pagesize:50}))}))),da=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),pa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/shopfloorload?shopfloorid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.average_per_unit_area=e.reporting_period.averages_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),vt(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Yt(l),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.average_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/H/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(da,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),ba=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),fa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/shopfloorstatistics?shopfloorid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.mean_per_unit_area=e.reporting_period.means_per_unit_area[n],r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.median_per_unit_area=e.reporting_period.medians_per_unit_area[n],r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.minimum_per_unit_area=e.reporting_period.minimums_per_unit_area[n],r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.maximum_per_unit_area=e.reporting_period.maximums_per_unit_area[n],r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.stdev_per_unit_area=e.reporting_period.stdevs_per_unit_area[n],r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",r.variance_per_unit_area=e.reporting_period.variances_per_unit_area[n],a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorstatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.mean_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.median_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.minimum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.maximum_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.stdev_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.variance_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(ba,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),ga=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ha=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)({}),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)(void 0),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var zt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),At([]);var t=!1;fetch(I.a+"/reports/shopfloorsaving?shopfloorid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",r.subtotal_per_unit_area=e.reporting_period.subtotals_per_unit_area_saving[n],a.push(r)})),at(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",n.value_per_unit_area=e.reporting_period.total_in_kgce_per_unit_area_saving/1e3,it(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",r.value_per_unit_area=e.reporting_period.total_in_kgco2e_per_unit_area_saving/1e3,mt(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Ke(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),bt(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),Et(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),_t(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),Tt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),kt(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),Pt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),At(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Gt(p),qt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Jt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorsaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success",footnote:o("Per Unit Area"),footvalue:e.subtotal_per_unit_area,footunit:"("+e.unit+"/M\xb2)"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:ot.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:ot.value_per_unit_area,footunit:"(TCE/M\xb2)"},ot.value&&r.a.createElement(_.a,{end:ot.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning",footnote:o("Per Unit Area"),footvalue:st.value_per_unit_area,footunit:"(TCO2E/M\xb2)"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Yt,data:Nt,options:Ut}),r.a.createElement("br",null),r.a.createElement(ga,{data:Ht,title:o("Detailed Data"),columns:Bt,pagesize:50}))}))),Ea=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Oa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),N=Object(i.a)(D,2),k=N[0],C=N[1],U=Object(n.useState)([]),P=Object(i.a)(U,2),R=P[0],F=P[1],w=Object(n.useState)(h.clone().startOf("month")),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(h),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!1),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],me=Object(n.useState)([{dataField:"name",text:o("Name"),sort:!0},{dataField:"space",text:o("Space"),sort:!0}]),ue=Object(i.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(void 0),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),X(t),Y([t[0]].map((function(e){return e.label}))),C([t[0]].map((function(e){return e.value}))),te(!1),oe(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ee="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Shopfloor Data")),r.a.createElement(l.a,{active:!0},o("Batch Analysis")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(G.format("YYYY-MM-DDTHH:mm:ss")),console.log(q.format("YYYY-MM-DDTHH:mm:ss")),te(!0),oe(!1),se(!0),F([]);var t=!1;fetch(I.a+"/reports/shopfloorbatch?spaceid="+k+"&reportingperiodstartdatetime="+G.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+q.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.shopfloors.length>0&&e.shopfloors.forEach((function(e,t){var n={};n.id=e.id,n.name=e.shopfloor_name,n.space=e.space_name,n.costcenter=e.cost_center_name,e.values.forEach((function(e,t){n["a"+t]=e.toFixed(2)})),a.push(n)})),F(a);var n=[];n.push({dataField:"name",text:o("Name"),sort:!0}),n.push({dataField:"space",text:o("Space"),sort:!0}),e.energycategories.forEach((function(e,t){n.push({dataField:"a"+t,text:e.name+" ("+e.unit_of_measure+")",sort:!0})})),pe(n),he(e.excel_bytes_base64),te(!1),oe(!0),se(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Z,onChange:function(e,t){Y(t.map((function(e){return e.label})).join("/")),C(e[e.length-1]),F([]),se(!0),te(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:G,onChange:function(e){V(e)},isValidDate:function(e){return e.isBefore(T()(q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:q,onChange:function(e){z(e)},isValidDate:function(e){return e.isAfter(T()(G,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:ee},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:re}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ge).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="shopfloorbatch.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(Ea,{data:R,title:o("Detailed Data"),columns:de,pagesize:50}))}))),ja=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),va=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,h=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),N=Object(i.a)(D,2),k=N[0],C=N[1],U=Object(n.useState)([]),P=Object(i.a)(U,2),R=P[0],F=P[1],w=Object(n.useState)(h.clone().startOf("month")),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(h),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(void 0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!1),Q=Object(i.a)($,2),ee=Q[0],te=Q[1],ae=Object(n.useState)(!0),ne=Object(i.a)(ae,2),re=ne[0],oe=ne[1],ie=Object(n.useState)(!0),ce=Object(i.a)(ie,2),le=ce[0],se=ce[1],me=Object(n.useState)([{dataField:"name",text:o("Name"),sort:!0},{dataField:"space",text:o("Space"),sort:!0}]),ue=Object(i.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(void 0),fe=Object(i.a)(be,2),ge=fe[0],he=fe[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),X(t),Y([t[0]].map((function(e){return e.label}))),C([t[0]].map((function(e){return e.value}))),te(!1),oe(!0)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Ee="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Batch Analysis")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(k),console.log(G.format("YYYY-MM-DDTHH:mm:ss")),console.log(q.format("YYYY-MM-DDTHH:mm:ss")),te(!0),oe(!1),se(!0),F([]);var t=!1;fetch(I.a+"/reports/combinedequipmentbatch?spaceid="+k+"&reportingperiodstartdatetime="+G.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+q.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.combined_equipments.length>0&&e.combined_equipments.forEach((function(e,t){var n={};n.id=e.id,n.name=e.combined_equipment_name,n.space=e.space_name,n.costcenter=e.cost_center_name,e.values.forEach((function(e,t){n["a"+t]=e.toFixed(2)})),a.push(n)})),F(a);var n=[];n.push({dataField:"name",text:o("Name"),sort:!0}),n.push({dataField:"space",text:o("Space"),sort:!0}),e.energycategories.forEach((function(e,t){n.push({dataField:"a"+t,text:e.name+" ("+e.unit_of_measure+")",sort:!0})})),pe(n),he(e.excel_bytes_base64),te(!1),oe(!0),se(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Z,onChange:function(e,t){Y(t.map((function(e){return e.label})).join("/")),C(e[e.length-1]),F([]),se(!0),te(!1)},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:G,onChange:function(e){V(e)},isValidDate:function(e){return e.isBefore(T()(q,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Ee,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:q,onChange:function(e){z(e)},isValidDate:function(e){return e.isAfter(T()(G,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:ee},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:re}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:le,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+ge).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentbatch.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement(ja,{data:R,title:o("Detailed Data"),columns:de,pagesize:50}))}))),_a=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),ya=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Sa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)(void 0),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var zt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Cost")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),kt([]),At([]);var t=!1;fetch(I.a+"/reports/combinedequipmentcost?combinedequipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.push(n),at(a);var r=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var n={id:1};n.name=o("Top-Peak"),n.value=e.reporting_period.toppeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=2,n.name=o("On-Peak"),n.value=e.reporting_period.onpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=3,n.name=o("Mid-Peak"),n.value=e.reporting_period.midpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n),(n={}).id=4,n.name=o("Off-Peak"),n.value=e.reporting_period.offpeaks[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)}})),Ke(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),$e(i);var c={};e.reporting_period.timestamps.forEach((function(e,t){c["a"+t]=e})),it(c);var l={};e.reporting_period.values.forEach((function(e,t){l["a"+t]=e})),mt(l);var s=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({value:"a"+a,label:t+" ("+n+")"})})),bt(s),c={},e.parameters.timestamps.forEach((function(e,t){c["a"+t]=e})),Et(c),l={},e.parameters.values.forEach((function(e,t){l["a"+t]=e})),_t(l),s=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),s.push({value:"a"+t,label:e})})),Tt(s);var m=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),m.push(n)}));var u={};u.id=m.length,u.startdatetime=o("Subtotal");var d=0;e.reporting_period.subtotals.forEach((function(e,t){u["a"+t]=e.toFixed(2),d+=e})),u.total=d.toFixed(2),m.push(u),kt(m);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),p.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),Pt(p);var b=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t;var r=0;e.associated_equipment.energy_category_names.forEach((function(t,o){n["a"+o]=e.associated_equipment.subtotals_array[o][a].toFixed(2),r+=e.associated_equipment.subtotals_array[o][a]})),n.total=r.toFixed(2),b.push(n)})),At(b);var f=[];f.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];f.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),f.push({dataField:"total",text:o("Total")+" ("+e.associated_equipment.total_unit+")",sort:!0}),Gt(f),qt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:zt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:zt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Jt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentcost.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Costs CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Cost by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Costs by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Costs CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ot,data:st,options:pt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement("br",null),r.a.createElement(_a,{data:Nt,title:o("Detailed Data"),columns:Ut,pagesize:50}),r.a.createElement("br",null),r.a.createElement(ya,{data:Ht,title:o("Associated Equipment Data"),columns:Bt}))}))),Ya=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ta=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)(void 0),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var kt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Efficiency")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log($),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentefficiency?combinedequipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period_efficiency.names.forEach((function(t,n){var r={};r.name=e.reporting_period_efficiency.names[n],r.unit=e.reporting_period_efficiency.units[n],r.cumulation=e.reporting_period_efficiency.cumulations[n],r.increment_rate=parseFloat(100*e.reporting_period_efficiency.increment_rates[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period_efficiency.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period_efficiency.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period_efficiency.timestamps.length>0&&e.reporting_period_efficiency.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period_efficiency.values.forEach((function(t,r){null!=e.reporting_period_efficiency.values[r][a]?n["a"+r]=e.reporting_period_efficiency.values[r][a].toFixed(2):n["a"+r]=""})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period_efficiency.cumulations.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period_efficiency.names.forEach((function(t,a){var n=e.reporting_period_efficiency.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s),Nt(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){console.log(e,t),C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0)),Ve(!0)):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:kt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:kt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+xt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentefficiency.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},qe.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Cumulative Efficiency NAME UNIT",{NAME:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.cumulation&&r.a.createElement(_.a,{end:e.cumulation,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Cumulative Efficiency VALUE UNIT",{VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(Ya,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}))}))),Da=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),xa=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Na=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)([]),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)({}),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)([]),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)({}),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)({}),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)([]),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1],Xt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),$t=Object(i.a)(Xt,2),Qt=$t[0],ea=$t[1],ta=Object(n.useState)(void 0),aa=Object(i.a)(ta,2),na=aa[0],ra=aa[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var oa="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Energy Category Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Gt([]),Zt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentenergycategory?combinedequipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),it(a);var n=[];e.reporting_period.energy_category_ids.forEach((function(t,a){if(1==t){var r={id:1};r.name=o("Top-Peak"),r.value=e.reporting_period.toppeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=2,r.name=o("On-Peak"),r.value=e.reporting_period.onpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=3,r.name=o("Mid-Peak"),r.value=e.reporting_period.midpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r),(r={}).id=4,r.name=o("Off-Peak"),r.value=e.reporting_period.offpeaks[a],r.color="#"+((1<<24)*Math.random()|0).toString(16),n.push(r)}})),Ke(n);var r={};r.value=e.reporting_period.total_in_kgce/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce).toFixed(2)+"%",mt(r);var i={};i.value=e.reporting_period.total_in_kgco2e/1e3,i.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e).toFixed(2)+"%",bt(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),l.push(n)})),at(l);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),Et(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),_t(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),Tt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),kt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Pt(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),At(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Gt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),qt(b);var f=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_category_names.forEach((function(t,r){n["a"+r]=e.associated_equipment.subtotals_array[r][a].toFixed(2)})),f.push(n)})),Zt(f);var g=[];g.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];g.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),ea(g),ra(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:oa,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:oa,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:oa,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:oa,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:oa,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:oa,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:oa,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:oa,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+na).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentenergycategory.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ot.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:pt.increment_rate||"",title:o("Reporting Period Consumption CATEGORY UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning"},pt.value&&r.a.createElement(_.a,{end:pt.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Electricity Consumption by Time-Of-Use")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:tt,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:ht,data:vt,options:Yt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Nt,data:Ut,options:Ht}),r.a.createElement("br",null),r.a.createElement(Da,{data:Bt,title:o("Detailed Data"),columns:Jt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(xa,{data:Wt,title:o("Associated Equipment Data"),columns:Qt}))}))),ka=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ca=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Ma=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)(void 0),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Vt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Energy Item Data")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Tt([]),Pt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentenergyitem?combinedequipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.energy_category_name=e.reporting_period.energy_category_names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),Ke(a);var n={},r={};e.reporting_period.names.forEach((function(t,a){var o={};o.id=a,o.name=e.reporting_period.names[a],o.value=e.reporting_period.subtotals[a],o.color="#"+((1<<24)*Math.random()|0).toString(16);var i=e.reporting_period.energy_category_ids[a];i in n||(n[i]=[]),n[i].push(o),i in r||(r[i]={name:e.reporting_period.energy_category_names[a],unit:e.reporting_period.units[a]})}));var i=[];for(var c in n){var l={};l.data=n[c],l.energy_category_name=r[c].name,l.unit=r[c].unit,i.push(l)}$e(i);var s={};e.reporting_period.timestamps.forEach((function(e,t){s["a"+t]=e})),at(s);var m={};e.reporting_period.values.forEach((function(e,t){m["a"+t]=e})),it(m);var u=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];u.push({value:"a"+a,label:t+" ("+n+")"})})),mt(u),s={},e.parameters.timestamps.forEach((function(e,t){s["a"+t]=e})),bt(s),m={},e.parameters.values.forEach((function(e,t){m["a"+t]=e})),Et(m),u=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),u.push({value:"a"+t,label:e})})),_t(u);var d=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),d.push(n)}));var p={};p.id=d.length,p.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){p["a"+t]=e.toFixed(2)})),d.push(p),Tt(d);var b=[];b.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),kt(b);var f=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_item_names.forEach((function(t,r){n["a"+r]=e.associated_equipment.subtotals_array[r][a].toFixed(2)})),f.push(n)})),Pt(f);var g=[];g.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_item_names.forEach((function(t,a){var n=e.associated_equipment.units[a];g.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),At(g),Gt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Bt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentenergyitem.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},ze.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Consumption ITEM CATEGORY UNIT",{ITEM:e.name,CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},Xe.map((function(e){return r.a.createElement(p.a,{key:e.energy_category_name,className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{key:e.energy_category_name,data:e.data,title:o("CATEGORY UNIT Consumption by Energy Items",{CATEGORY:e.energy_category_name,UNIT:"("+e.unit+")"})}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption ITEM CATEGORY VALUE UNIT",{ITEM:null,CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement("br",null),r.a.createElement(ka,{data:Yt,title:o("Detailed Data"),columns:Nt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(Ca,{data:Ut,title:o("Associated Equipment Data"),columns:Ht}))}))),Ua=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Pa=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Ra=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)([]),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1],kt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Ct=Object(i.a)(kt,2),Mt=Ct[0],Ut=Ct[1],Pt=Object(n.useState)(void 0),Rt=Object(i.a)(Pt,2),Ft=Rt[0],Ht=Rt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var At="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Load")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]),Nt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentload?combinedequipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.average=e.reporting_period.averages[n],r.average_increment_rate=parseFloat(100*e.reporting_period.averages_increment_rate[n]).toFixed(2)+"%",r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.factor=e.reporting_period.factors[n],r.factor_increment_rate=parseFloat(100*e.reporting_period.factors_increment_rate[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.sub_maximums.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+"/H)"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.sub_averages.forEach((function(t,r){null!=e.reporting_period.sub_averages[r][a]?n["a"+2*r]=e.reporting_period.sub_averages[r][a].toFixed(2):n["a"+2*r]="",null!=e.reporting_period.sub_maximums[r][a]?n["a"+(2*r+1)]=e.reporting_period.sub_maximums[r][a].toFixed(2):n["a"+(2*r+1)]=""})),c.push(n)})),vt(c);var l=[];l.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),l.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Yt(l);var s=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_category_names.forEach((function(t,r){null!=e.associated_equipment.sub_averages_array[r][a]?n["a"+2*r]=e.associated_equipment.sub_averages_array[r][a].toFixed(2):n["a"+2*r]="",null!=e.associated_equipment.sub_maximums_array[r][a]?n["a"+(2*r+1)]=e.associated_equipment.sub_maximums_array[r][a].toFixed(2):n["a"+(2*r+1)]=""})),s.push(n)})),Nt(s);var m=[];m.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];m.push({dataField:"a"+2*a,text:t+" "+o("Average Load")+" ("+n+"/H)",sort:!0}),m.push({dataField:"a"+(2*a+1),text:t+" "+o("Maximum Load")+" ("+n+"/H)",sort:!0})})),Ut(m),Ht(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ft).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentload.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"average",rate:e.average_increment_rate,title:o("Reporting Period CATEGORY Average Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success"},e.average&&r.a.createElement(_.a,{end:e.average,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+"/H)"}),color:"success"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"factor",rate:e.factor_increment_rate,title:o("Reporting Period CATEGORY Load Factor",{CATEGORY:e.name}),color:"success",footnote:o("Ratio of Average Load to Maximum Load")},e.factor&&r.a.createElement(_.a,{end:e.factor,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period CATEGORY Maximum Load UNIT",{CATEGORY:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(Ua,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}),r.a.createElement("br",null),r.a.createElement(Pa,{data:xt,title:o("Associated Equipment Data"),columns:Mt}))}))),Fa=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Ha=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Aa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)([]),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)(void 0),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var Vt="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Income")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),Tt([]),Pt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentincome?combinedequipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)}));var n={};n.name=o("Total"),n.unit=e.reporting_period.total_unit,n.subtotal=e.reporting_period.total,n.increment_rate=parseFloat(100*e.reporting_period.total_increment_rate).toFixed(2)+"%",a.push(n),$e(a);var r=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals[a],n.color="#"+((1<<24)*Math.random()|0).toString(16),r.push(n)})),Ke(r);var i={};e.reporting_period.timestamps.forEach((function(e,t){i["a"+t]=e})),at(i);var c={};e.reporting_period.values.forEach((function(e,t){c["a"+t]=e})),it(c);var l=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];l.push({value:"a"+a,label:t+" ("+n+")"})})),mt(l),i={},e.parameters.timestamps.forEach((function(e,t){i["a"+t]=e})),bt(i),c={},e.parameters.values.forEach((function(e,t){c["a"+t]=e})),Et(c),l=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),l.push({value:"a"+t,label:e})})),_t(l);var s=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t;var r=0;e.reporting_period.values.forEach((function(t,o){n["a"+o]=e.reporting_period.values[o][a].toFixed(2),r+=e.reporting_period.values[o][a]})),n.total=r.toFixed(2),s.push(n)}));var m={};m.id=s.length,m.startdatetime=o("Subtotal");var u=0;e.reporting_period.subtotals.forEach((function(e,t){m["a"+t]=e.toFixed(2),u+=e})),m.total=u.toFixed(2),s.push(m),Tt(s);var d=[];d.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];d.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),d.push({dataField:"total",text:o("Total")+" ("+e.reporting_period.total_unit+")",sort:!0}),kt(d);var p=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t;var r=0;e.associated_equipment.energy_category_names.forEach((function(t,o){n["a"+o]=e.associated_equipment.subtotals_array[o][a].toFixed(2),r+=e.associated_equipment.subtotals_array[o][a]})),n.total=r.toFixed(2),p.push(n)})),Pt(p);var b=[];b.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];b.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),b.push({dataField:"total",text:o("Total")+" ("+e.associated_equipment.total_unit+")",sort:!0}),At(b),Gt(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:Vt,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:Vt,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Bt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentincome.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},Xe.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Income CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Incomes by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Income CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:tt,data:ot,options:st}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement("br",null),r.a.createElement(Fa,{data:Yt,title:o("Detailed Data"),columns:Nt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(Ha,{data:Ut,title:o("Associated Equipment Data"),columns:Ht}))}))),Ia=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),wa=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),Ba=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)([]),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1],kt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Ct=Object(i.a)(kt,2),Mt=Ct[0],Ut=Ct[1],Pt=Object(n.useState)(void 0),Rt=Object(i.a)(Pt,2),Ft=Rt[0],Ht=Rt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var At="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Output")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]),Nt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentoutput?combinedequipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s);var m=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_category_names.forEach((function(t,r){n["a"+r]=e.associated_equipment.subtotals_array[r][a].toFixed(2)})),m.push(n)})),Nt(m);var u=[];u.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];u.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ut(u),Ht(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ft).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentoutput.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},qe.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Output CATEGORY UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Output CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(Ia,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}),r.a.createElement("br",null),r.a.createElement(wa,{data:xt,title:o("Associated Equipment Data"),columns:Mt}))}))),Ga=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),Va=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),La=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],U=Y[1],P=Object(n.useState)(void 0),w=Object(i.a)(P,2),B=w[0],G=w[1],V=Object(n.useState)([]),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(void 0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)("month-on-month"),$=Object(i.a)(X,2),Q=$[0],ee=$[1],te=Object(n.useState)("daily"),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),ie=Object(i.a)(oe,2),ce=ie[0],le=ie[1],se=Object(n.useState)(v.clone().subtract(1,"months")),me=Object(i.a)(se,2),ue=me[0],de=me[1],pe=Object(n.useState)(!0),be=Object(i.a)(pe,2),fe=be[0],ge=be[1],he=Object(n.useState)(!0),Ee=Object(i.a)(he,2),Oe=Ee[0],je=Ee[1],ve=Object(n.useState)(v.clone().startOf("month")),_e=Object(i.a)(ve,2),ye=_e[0],Se=_e[1],Ye=Object(n.useState)(v),Te=Object(i.a)(Ye,2),De=Te[0],xe=Te[1],Ne=Object(n.useState)(void 0),ke=Object(i.a)(Ne,2),Ce=ke[0],Me=ke[1],Ue=Object(n.useState)(!0),Pe=Object(i.a)(Ue,2),Re=Pe[0],Fe=Pe[1],He=Object(n.useState)(!0),Ae=Object(i.a)(He,2),Ie=Ae[0],we=Ae[1],Be=Object(n.useState)(!0),Ge=Object(i.a)(Be,2),Ve=Ge[0],Le=Ge[1],Je=Object(n.useState)([]),qe=Object(i.a)(Je,2),ze=qe[0],Ke=qe[1],We=Object(n.useState)([]),Ze=Object(i.a)(We,2),Xe=Ze[0],$e=Ze[1],Qe=Object(n.useState)([]),et=Object(i.a)(Qe,2),tt=et[0],at=et[1],nt=Object(n.useState)({}),rt=Object(i.a)(nt,2),ot=rt[0],it=rt[1],ct=Object(n.useState)({}),lt=Object(i.a)(ct,2),st=lt[0],mt=lt[1],ut=Object(n.useState)([]),dt=Object(i.a)(ut,2),pt=dt[0],bt=dt[1],ft=Object(n.useState)({}),gt=Object(i.a)(ft,2),ht=gt[0],Et=gt[1],Ot=Object(n.useState)([]),jt=Object(i.a)(Ot,2),vt=jt[0],_t=jt[1],yt=Object(n.useState)([]),St=Object(i.a)(yt,2),Yt=St[0],Tt=St[1],Dt=Object(n.useState)({}),xt=Object(i.a)(Dt,2),Nt=xt[0],kt=xt[1],Ct=Object(n.useState)([]),Mt=Object(i.a)(Ct,2),Ut=Mt[0],Pt=Mt[1],Rt=Object(n.useState)([]),Ft=Object(i.a)(Rt,2),Ht=Ft[0],At=Ft[1],It=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),wt=Object(i.a)(It,2),Bt=wt[0],Gt=wt[1],Vt=Object(n.useState)([]),Lt=Object(i.a)(Vt,2),Jt=Lt[0],qt=Lt[1],zt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Kt=Object(i.a)(zt,2),Wt=Kt[0],Zt=Kt[1],Xt=Object(n.useState)(void 0),$t=Object(i.a)(Xt,2),Qt=$t[0],ea=$t[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Me(t),U([t[0]].map((function(e){return e.label}))),G([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var ta="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Saving")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(B),console.log(W),console.log(ne),console.log(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(ye.format("YYYY-MM-DDTHH:mm:ss")),console.log(De.format("YYYY-MM-DDTHH:mm:ss")),Fe(!0),we(!1),Le(!0),At([]),qt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentsaving?combinedequipmentid="+W+"&periodtype="+ne+"&baseperiodstartdatetime="+(null!=ce?ce.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=ue?ue.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+ye.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+De.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.subtotal=e.reporting_period.subtotals_saving[n],r.increment_rate=parseFloat(100*e.reporting_period.increment_rates_saving[n]).toFixed(2)+"%",a.push(r)})),at(a);var n={};n.value=e.reporting_period.total_in_kgce_saving/1e3,n.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgce_saving).toFixed(2)+"%",it(n);var r={};r.value=e.reporting_period.total_in_kgco2e_saving/1e3,r.increment_rate=parseFloat(100*e.reporting_period.increment_rate_in_kgco2e_saving).toFixed(2)+"%",mt(r);var i=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgce_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),i.push(n)})),Ke(i);var c=[];e.reporting_period.names.forEach((function(t,a){var n={};n.id=a,n.name=t,n.value=e.reporting_period.subtotals_in_kgco2e_saving[a]/1e3,n.color="#"+((1<<24)*Math.random()|0).toString(16),c.push(n)})),$e(c);var l={};e.reporting_period.timestamps.forEach((function(e,t){l["a"+t]=e})),bt(l);var s={};e.reporting_period.values_saving.forEach((function(e,t){s["a"+t]=e})),Et(s);var m=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];m.push({value:"a"+a,label:t+" ("+n+")"})})),_t(m),l={},e.parameters.timestamps.forEach((function(e,t){l["a"+t]=e})),Tt(l),s={},e.parameters.values.forEach((function(e,t){s["a"+t]=e})),kt(s),m=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),m.push({value:"a"+t,label:e})})),Pt(m);var u=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values_saving.forEach((function(t,r){n["a"+r]=e.reporting_period.values_saving[r][a].toFixed(2)})),u.push(n)}));var d={};d.id=u.length,d.startdatetime=o("Subtotal"),e.reporting_period.subtotals_saving.forEach((function(e,t){d["a"+t]=e.toFixed(2)})),u.push(d),At(u);var p=[];p.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];p.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Gt(p);var b=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_category_names.forEach((function(t,r){n["a"+r]=e.associated_equipment.subtotals_saving_array[r][a].toFixed(2)})),b.push(n)})),qt(b);var f=[];f.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];f.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Zt(f),ea(e.excel_bytes_base64),Fe(!1),we(!0),Le(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:Ce,onChange:function(e,t){U(t.map((function(e){return e.label})).join("/")),G(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),q(e[0]),e[0].length>0?(Z(e[0][0].value),Fe(!1)):(Z(void 0),Fe(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return Z(t.value)}},J.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),ee(t.value),"year-over-year"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"years")),de(T()(De).subtract(1,"years"))):"month-on-month"===t.value?(ge(!0),je(!0),le(T()(ye).subtract(1,"months")),de(T()(De).subtract(1,"months"))):"free-comparison"===t.value?(ge(!1),je(!1)):"none-comparison"===t.value&&(le(void 0),de(void 0),ge(!0),je(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ta,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return re(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ce,inputProps:{disabled:fe},onChange:function(e){le(e)},isValidDate:function(e){return e.isBefore(T()(ue,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:ue,inputProps:{disabled:Oe},onChange:function(e){de(e)},isValidDate:function(e){return e.isAfter(T()(ce,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:ye,onChange:function(e){Se(e),"year-over-year"===Q?le(e.clone().subtract(1,"years")):"month-on-month"===Q&&le(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(De,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ta,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:De,onChange:function(e){xe(e),"year-over-year"===Q?de(e.clone().subtract(1,"years")):"month-on-month"===Q&&de(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(ye,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Re},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ie}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ve,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Qt).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentsaving.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),r.a.createElement("div",{className:"card-deck"},tt.map((function(e){return r.a.createElement(N.a,{key:e.name,rate:e.increment_rate,title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.subtotal&&r.a.createElement(_.a,{end:e.subtotal,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))})),r.a.createElement(N.a,{rate:ot.increment_rate||"",title:o("Reporting Period Savings CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Standard Coal"),UNIT:"(TCE)"}),color:"warning"},ot.value&&r.a.createElement(_.a,{end:ot.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{rate:st.increment_rate||"",title:o("Reporting Period Decreased CATEGORY (Baseline - Actual) UNIT",{CATEGORY:o("Ton of Carbon Dioxide Emissions"),UNIT:"(TCO2E)"}),color:"warning"},st.value&&r.a.createElement(_.a,{end:st.value,duration:2,prefix:"",separator:",",decimal:".",decimals:2}))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:ze,title:o("Ton of Standard Coal by Energy Category")})),r.a.createElement(p.a,{className:"mb-3 pr-lg-2 mb-3"},r.a.createElement(C.a,{data:Xe,title:o("Ton of Carbon Dioxide Emissions by Energy Category")}))),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Savings CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:pt,data:ht,options:vt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:Yt,data:Nt,options:Ut}),r.a.createElement("br",null),r.a.createElement(Ga,{data:Ht,title:o("Detailed Data"),columns:Bt,pagesize:50}),r.a.createElement("br",null),r.a.createElement(Va,{data:Jt,title:o("Associated Equipment Data"),columns:Wt}))}))),Ja=Object(D.a)((function(){return a.e(0).then(a.bind(null,1622))})),qa=Object(D.a)((function(){return a.e(1).then(a.bind(null,1623))})),za=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,v=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var y=Object(n.useState)(void 0),Y=Object(i.a)(y,2),D=Y[0],C=Y[1],U=Object(n.useState)(void 0),P=Object(i.a)(U,2),w=P[0],B=P[1],G=Object(n.useState)([]),V=Object(i.a)(G,2),L=V[0],J=V[1],q=Object(n.useState)(void 0),z=Object(i.a)(q,2),K=z[0],W=z[1],Z=Object(n.useState)("month-on-month"),X=Object(i.a)(Z,2),$=X[0],Q=X[1],ee=Object(n.useState)("daily"),te=Object(i.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(v.clone().subtract(1,"months").startOf("month")),oe=Object(i.a)(re,2),ie=oe[0],ce=oe[1],le=Object(n.useState)(v.clone().subtract(1,"months")),se=Object(i.a)(le,2),me=se[0],ue=se[1],de=Object(n.useState)(!0),pe=Object(i.a)(de,2),be=pe[0],fe=pe[1],ge=Object(n.useState)(!0),he=Object(i.a)(ge,2),Ee=he[0],Oe=he[1],je=Object(n.useState)(v.clone().startOf("month")),ve=Object(i.a)(je,2),_e=ve[0],ye=ve[1],Se=Object(n.useState)(v),Ye=Object(i.a)(Se,2),Te=Ye[0],De=Ye[1],xe=Object(n.useState)(void 0),Ne=Object(i.a)(xe,2),ke=Ne[0],Ce=Ne[1],Me=Object(n.useState)(!0),Ue=Object(i.a)(Me,2),Pe=Ue[0],Re=Ue[1],Fe=Object(n.useState)(!0),He=Object(i.a)(Fe,2),Ae=He[0],Ie=He[1],we=Object(n.useState)(!0),Be=Object(i.a)(we,2),Ge=Be[0],Ve=Be[1],Le=Object(n.useState)([]),Je=Object(i.a)(Le,2),qe=Je[0],ze=Je[1],Ke=Object(n.useState)([]),We=Object(i.a)(Ke,2),Ze=We[0],Xe=We[1],$e=Object(n.useState)({}),Qe=Object(i.a)($e,2),et=Qe[0],tt=Qe[1],at=Object(n.useState)([]),nt=Object(i.a)(at,2),rt=nt[0],ot=nt[1],it=Object(n.useState)([]),ct=Object(i.a)(it,2),lt=ct[0],st=ct[1],mt=Object(n.useState)({}),ut=Object(i.a)(mt,2),dt=ut[0],pt=ut[1],bt=Object(n.useState)([]),ft=Object(i.a)(bt,2),gt=ft[0],ht=ft[1],Et=Object(n.useState)([]),Ot=Object(i.a)(Et,2),jt=Ot[0],vt=Ot[1],_t=Object(n.useState)([{dataField:"startdatetime",text:o("Datetime"),sort:!0}]),yt=Object(i.a)(_t,2),St=yt[0],Yt=yt[1],Tt=Object(n.useState)([]),Dt=Object(i.a)(Tt,2),xt=Dt[0],Nt=Dt[1],kt=Object(n.useState)([{dataField:"name",text:o("Associated Equipment"),sort:!0}]),Ct=Object(i.a)(kt,2),Mt=Ct[0],Ut=Ct[1],Pt=Object(n.useState)(void 0),Rt=Object(i.a)(Pt,2),Ft=Rt[0],Ht=Rt[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),Ce(t),C([t[0]].map((function(e){return e.label}))),B([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var At="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Combined Equipment Data")),r.a.createElement(l.a,{active:!0},o("Statistics")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(w),console.log(K),console.log(ae),console.log(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):void 0),console.log(_e.format("YYYY-MM-DDTHH:mm:ss")),console.log(Te.format("YYYY-MM-DDTHH:mm:ss")),Re(!0),Ie(!1),Ve(!0),vt([]),Nt([]);var t=!1;fetch(I.a+"/reports/combinedequipmentstatistics?combinedequipmentid="+K+"&periodtype="+ae+"&baseperiodstartdatetime="+(null!=ie?ie.format("YYYY-MM-DDTHH:mm:ss"):"")+"&baseperiodenddatetime="+(null!=me?me.format("YYYY-MM-DDTHH:mm:ss"):"")+"&reportingperiodstartdatetime="+_e.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Te.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.reporting_period.names.forEach((function(t,n){var r={};r.name=e.reporting_period.names[n],r.unit=e.reporting_period.units[n],r.mean=e.reporting_period.means[n],r.mean_increment_rate=parseFloat(100*e.reporting_period.means_increment_rate[n]).toFixed(2)+"%",r.median=e.reporting_period.medians[n],r.median_increment_rate=parseFloat(100*e.reporting_period.medians_increment_rate[n]).toFixed(2)+"%",r.minimum=e.reporting_period.minimums[n],r.minimum_increment_rate=parseFloat(100*e.reporting_period.minimums_increment_rate[n]).toFixed(2)+"%",r.maximum=e.reporting_period.maximums[n],r.maximum_increment_rate=parseFloat(100*e.reporting_period.maximums_increment_rate[n]).toFixed(2)+"%",r.stdev=e.reporting_period.stdevs[n],r.stdev_increment_rate=parseFloat(100*e.reporting_period.stdevs_increment_rate[n]).toFixed(2)+"%",r.variance=e.reporting_period.variances[n],r.variance_increment_rate=parseFloat(100*e.reporting_period.variances_increment_rate[n]).toFixed(2)+"%",a.push(r)})),ze(a);var n={};e.reporting_period.timestamps.forEach((function(e,t){n["a"+t]=e})),Xe(n);var r={};e.reporting_period.values.forEach((function(e,t){r["a"+t]=e})),tt(r);var i=Array();e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];i.push({value:"a"+a,label:t+" ("+n+")"})})),ot(i),n={},e.parameters.timestamps.forEach((function(e,t){n["a"+t]=e})),st(n),r={},e.parameters.values.forEach((function(e,t){r["a"+t]=e})),pt(r),i=Array(),e.parameters.names.forEach((function(e,t){e.startsWith("TARIFF-")&&(e=o("Tariff")+e.replace("TARIFF-","-")),i.push({value:"a"+t,label:e})})),ht(i);var c=[];e.reporting_period.timestamps.length>0&&e.reporting_period.timestamps[0].forEach((function(t,a){var n={};n.id=a,n.startdatetime=t,e.reporting_period.values.forEach((function(t,r){n["a"+r]=e.reporting_period.values[r][a].toFixed(2)})),c.push(n)}));var l={};l.id=c.length,l.startdatetime=o("Subtotal"),e.reporting_period.subtotals.forEach((function(e,t){l["a"+t]=e.toFixed(2)})),c.push(l),vt(c);var s=[];s.push({dataField:"startdatetime",text:o("Datetime"),sort:!0}),e.reporting_period.names.forEach((function(t,a){var n=e.reporting_period.units[a];s.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Yt(s);var m=[];e.associated_equipment.associated_equipment_names_array.length>0&&e.associated_equipment.associated_equipment_names_array[0].forEach((function(t,a){var n={};n.id=a,n.name=t,e.associated_equipment.energy_category_names.forEach((function(t,r){n["a"+r]=e.associated_equipment.subtotals_array[r][a].toFixed(2)})),m.push(n)})),Nt(m);var u=[];u.push({dataField:"name",text:o("Associated Equipment"),sort:!0}),e.associated_equipment.energy_category_names.forEach((function(t,a){var n=e.associated_equipment.units[a];u.push({dataField:"a"+a,text:t+" ("+n+")",sort:!0})})),Ut(u),Ht(e.excel_bytes_base64),Re(!1),Ie(!0),Ve(!1)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:ke,onChange:function(e,t){C(t.map((function(e){return e.label})).join("/")),B(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),J(e[0]),e[0].length>0?(W(e[0][0].value),Re(!1)):(W(void 0),Re(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:D||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return W(t.value)}},L.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"comparisonType"},o("Comparison Types")),r.a.createElement(h.a,{type:"select",id:"comparisonType",name:"comparisonType",defaultValue:"month-on-month",onChange:function(e){var t=e.target;console.log(t.value),Q(t.value),"year-over-year"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"years")),ue(T()(Te).subtract(1,"years"))):"month-on-month"===t.value?(fe(!0),Oe(!0),ce(T()(_e).subtract(1,"months")),ue(T()(Te).subtract(1,"months"))):"free-comparison"===t.value?(fe(!1),Oe(!1)):"none-comparison"===t.value&&(ce(void 0),ue(void 0),fe(!0),Oe(!0))}},F.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:At,for:"periodType"},o("Period Types")),r.a.createElement(h.a,{type:"select",id:"periodType",name:"periodType",defaultValue:"daily",onChange:function(e){var t=e.target;return ne(t.value)}},R.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},o(e.label))}))))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodBeginsDatetime"},o("Base Period Begins"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodBeginsDatetime",value:ie,inputProps:{disabled:be},onChange:function(e){ce(e)},isValidDate:function(e){return e.isBefore(T()(me,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"basePeriodEndsDatetime"},o("Base Period Ends"),o("(Optional)")),r.a.createElement(S.a,{id:"basePeriodEndsDatetime",value:me,inputProps:{disabled:Ee},onChange:function(e){ue(e)},isValidDate:function(e){return e.isAfter(T()(ie,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:_e,onChange:function(e){ye(e),"year-over-year"===$?ce(e.clone().subtract(1,"years")):"month-on-month"===$&&ce(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isBefore(T()(Te,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:At,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Te,onChange:function(e){De(e),"year-over-year"===$?ue(e.clone().subtract(1,"years")):"month-on-month"===$&&ue(e.clone().subtract(1,"months"))},isValidDate:function(e){return e.isAfter(T()(_e,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Pe},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:Ae}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement("br",null),r.a.createElement(A.a,{icon:"external-link-alt",transform:"shrink-3 down-2",color:"falcon-default",hidden:Ge,onClick:function(e){e.preventDefault();var t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";fetch("data:"+t+";base64,"+Ft).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:t}),a.download="combinedequipmentstatistics.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a)}))}},o("Export"))))))),qe.map((function(e){return r.a.createElement("div",{className:"card-deck",key:e.name},r.a.createElement(N.a,{key:e.name+"mean",rate:e.mean_increment_rate,title:o("Reporting Period CATEGORY Mean UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.mean&&r.a.createElement(_.a,{end:e.mean,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"median",rate:e.median_increment_rate,title:o("Reporting Period CATEGORY Median UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.median&&r.a.createElement(_.a,{end:e.median,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"minimum",rate:e.minimum_increment_rate,title:o("Reporting Period CATEGORY Minimum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.minimum&&r.a.createElement(_.a,{end:e.minimum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"maximum",rate:e.maximum_increment_rate,title:o("Reporting Period CATEGORY Maximum UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.maximum&&r.a.createElement(_.a,{end:e.maximum,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"stdev",rate:e.stdev_increment_rate,title:o("Reporting Period CATEGORY Stdev UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.stdev&&r.a.createElement(_.a,{end:e.stdev,duration:2,prefix:"",separator:",",decimal:".",decimals:2})),r.a.createElement(N.a,{key:e.name+"variance",rate:e.variance_increment_rate,title:o("Reporting Period CATEGORY Variance UNIT",{CATEGORY:e.name,UNIT:"("+e.unit+")"}),color:"success"},e.variance&&r.a.createElement(_.a,{end:e.variance,duration:2,prefix:"",separator:",",decimal:".",decimals:2})))})),r.a.createElement(k.a,{reportingTitle:o("Reporting Period Consumption CATEGORY VALUE UNIT",{CATEGORY:null,VALUE:null,UNIT:null}),baseTitle:"",labels:Ze,data:et,options:rt}),r.a.createElement(k.a,{reportingTitle:o("Related Parameters"),baseTitle:"",labels:lt,data:dt,options:gt}),r.a.createElement("br",null),r.a.createElement(Ja,{data:jt,title:o("Detailed Data"),columns:St,pagesize:50}),r.a.createElement("br",null),r.a.createElement(qa,{data:xt,title:o("Associated Equipment Data"),columns:Mt}))}))),Ka=a(1328),Wa=a.n(Ka),Za=a(27),Xa=a.n(Za),$a=a(16),Qa=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,g=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)([]),_=Object(i.a)(v,2),y=_[0],Y=_[1],D=Object(n.useState)(void 0),x=Object(i.a)(D,2),N=x[0],k=x[1],C=Object(n.useState)(g.clone().subtract(1,"months").startOf("month")),U=Object(i.a)(C,2),P=U[0],R=U[1],F=Object(n.useState)(g.clone().subtract(1,"months").endOf("month")),A=Object(i.a)(F,2),w=A[0],B=A[1],G=Object(n.useContext)($a.c).isDark,V=Object(n.useState)(!0),L=Object(i.a)(V,2),J=L[0],q=L[1],z=Object(n.useState)(!0),K=Object(i.a)(z,2),W=K[0],Z=K[1],X=Object(n.useState)({nodes:[],links:[]}),$=Object(i.a)(X,2),Q=$[0],ee=$[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/energyflowdiagrams",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify(t).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),Y(t),k([t[0]].map((function(e){return e.value}))),q(!1)):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var te="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Auxiliary System")),r.a.createElement(l.a,{active:!0},o("Energy Flow Diagram")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(N),console.log(P.format("YYYY-MM-DDTHH:mm:ss")),console.log(w.format("YYYY-MM-DDTHH:mm:ss")),q(!0),Z(!1);var t=!1;fetch(I.a+"/reports/energyflowdiagram?energyflowdiagramid="+N+"&reportingperiodstartdatetime="+P.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+w.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){t?(console.log(e),ee(e),console.log(Q),q(!1),Z(!0)):H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:te,for:"energyFlowDiagramSelect"},o("Energy Flow Diagram")),r.a.createElement(h.a,{type:"select",id:"energyFlowDiagramSelect",name:"energyFlowDiagramSelect",value:N,onChange:function(e){var t=e.target;return k(t.value)}},y.map((function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:te,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:P,onChange:function(e){R(e)},isValidDate:function(e){return e.isBefore(T()(w,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:te,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:w,onChange:function(e){B(e)},isValidDate:function(e){return e.isAfter(T()(P,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:J},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:W}))))))),r.a.createElement(s.a,{className:"mb-3 fs--1"},r.a.createElement(m.a,{className:"rounded-soft bg-gradient"},r.a.createElement(Wa.a,{echarts:Xa.a,option:function(){var e=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],t="#FFFFFF",a="rgba(0, 0, 0, 1)",n="rgba(255, 255, 255, 1)";G&&(e=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],t="#100C2A",a="rgba(255, 255, 255, 1)",n="rgba(0, 0, 0, 1)");for(var r=0,o=0;o<Q.nodes.length;o++){Q.nodes[o].itemStyle={color:e[r%9]},r++}return Q.links.forEach((function(e){null==e.value&&(e.value=0);for(var t=null,a=null,n=0;n<Q.nodes.length&&(e.source===Q.nodes[n].name&&(t=Q.nodes[n].itemStyle.color),e.target===Q.nodes[n].name&&(a=Q.nodes[n].itemStyle.color),null==t||null==a);n++);var r={type:"linear",x:0,y:0,x2:1,y2:0,colorStops:[{offset:0,color:t},{offset:1,color:a}],globalCoord:!1};e.lineStyle={color:r}})),{backgroundColor:t,tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{name:"sankey",type:"sankey",data:Q.nodes,links:Q.links,focusNodeAdjacency:"allEdges",itemStyle:{borderWidth:1,borderColor:"#aaa"},lineStyle:{color:"gradient",curveness:.5},label:{color:a,fontFamily:"sans-serif",fontSize:13,fontStyle:"normal",fontWeight:"normal",textBorderWidth:1.5,textBorderColor:n}}]}}(),data:Q,style:{width:"100%",height:600}}))))}))),en=function(e){Object(tt.a)(a,e);var t=Object(at.a)(a);function a(){var e;Object(Qe.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._isMounted=!1,e.state={pointList:[]},e}return Object(et.a)(a,[{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.refreshInterval),clearTimeout(this.refreshTimeout)}},{key:"componentDidMount",value:function(){var e=this;console.log(this.props),this._isMounted=!0;var t=!1;void 0!=this.props.distributionSystemID&&fetch(I.a+"/reports/distributionsystem?distributionsystemid="+this.props.distributionSystemID,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(a){if(t){console.log(a);var n=[];a.forEach((function(e,t){a[t].points.forEach((function(t,a){var r={};r.circuit=e.name,r.point=t.name,r.value=t.value,r.units=t.units,n.push(r)}))})),e._isMounted&&e.setState({pointList:n})}else H.c.error(a.description)})).catch((function(e){console.log(e)})),this.refreshInterval=setInterval((function(){var t=!1;void 0!=e.props.distributionSystemID&&fetch(I.a+"/reports/distributionsystem?distributionsystemid="+e.props.distributionSystemID,{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(a){if(t){console.log(a);var n=[];a.forEach((function(e,t){a[t].points.forEach((function(t,a){var r={};r.circuit=e.name,r.point=t.name,r.value=t.value,r.units=t.units,n.push(r)}))})),e._isMounted&&e.setState({pointList:n})}else H.c.error(a.description)})).catch((function(e){console.log(e)}))}),1e3*(60+Math.floor(Math.random()*Math.floor(10))))}},{key:"render",value:function(){var e=this.props.t;return r.a.createElement(s.a,{className:"h-100 bg-gradient"},r.a.createElement(it.a,{className:"bg-transparent"},r.a.createElement("h5",{className:"text-white"},this.props.distributionSystemName),r.a.createElement("div",{className:"real-time-user display-1 font-weight-normal text-white"},this.state.latestUpdateDatetime)),r.a.createElement(m.a,{className:"text-white fs--1"},r.a.createElement(ct.a,{flush:!0,className:"mt-4"},r.a.createElement(lt.a,{className:"bg-transparent d-flex justify-content-between px-0 py-1 font-weight-semi-bold border-top-0",style:{borderColor:"rgba(255, 255, 255, 0.05)"}},r.a.createElement("p",{className:"mb-0"},e("Circuit")),r.a.createElement("p",{className:"mb-0"},e("Point")),r.a.createElement("p",{className:"mb-0"},e("Realtime Value")),r.a.createElement("p",{className:"mb-0"},e("Unit"))),this.state.pointList.map((function(e){return r.a.createElement(lt.a,{key:Fe()(),className:"bg-transparent d-flex justify-content-between px-0 py-1",style:{borderColor:"rgba(255, 255, 255, 0.05)"}},r.a.createElement("p",{className:"mb-0"},e.circuit),r.a.createElement("p",{className:"mb-0 "},e.point),r.a.createElement("p",{className:"mb-0"},e.value),r.a.createElement("p",{className:"mb-0"},e.units))})))))}}]),a}(n.Component),tn=Object(P.a)()(en),an=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));Object(n.createRef)();var g=Object(n.useState)([]),E=Object(i.a)(g,2),O=E[0],v=E[1],_=Object(n.useState)(void 0),y=Object(i.a)(_,2),S=y[0],Y=y[1],T=Object(n.useState)(void 0),D=Object(i.a)(T,2),x=D[0],N=D[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(!1),F=Object(i.a)(R,2),A=F[0],w=F[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/distributionsystems",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify(t).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(t),v(t),N([t[0]].map((function(e){return e.value}))),Y([t[0]].map((function(e){return e.label})));var a={};t.forEach((function(e,t){a[e.value]={__html:e.svg}})),P(a),w(!0)}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Auxiliary System")),r.a.createElement(l.a,{active:!0},o("Distribution System")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,null,r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"distributionSystemSelect"},o("Distribution System")),r.a.createElement(h.a,{type:"select",id:"distributionSystemSelect",name:"distributionSystemSelect",value:x,onChange:function(e){N(e.target.value),O.forEach((function(t,a){t.value==e.target.value&&Y(t.label)}))}},O.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:A}))))))),r.a.createElement(d.a,{noGutters:!0},r.a.createElement(p.a,{lg:"4",className:"pr-lg-2",key:Fe()()},r.a.createElement(tn,{distributionSystemID:x,distributionSystemName:S})),r.a.createElement(p.a,{lg:"8",className:"pr-lg-2"},r.a.createElement("div",{dangerouslySetInnerHTML:U[x]}))))}))),nn=a(1547),rn=a(1591),on=a(1592),cn=a(1593),ln=a(1594),sn=a(1595),mn=a(234),un=a(4),dn=a.n(un),pn=a(521),bn=a(1137),fn=a.n(bn),gn=function(e){var t=e.id,a=e.files,o=e.title,c=e.category,l=e.features,s=e.parameter1,m=e.parameter2,u=e.parameter3,b=e.parameter4,f=e.parameter5,g=e.parameter6,h=e.parameter7,E=e.alarms,O=e.isOnline,j=e.isRunning,v=e.sliderSettings,_=e.index,y=e.t,S=Object(n.useContext)($a.c).isDark,Y=Object(n.useContext)($a.b).favouriteItemsDispatch,T=Object(n.useState)(!1),D=Object(i.a)(T,2),x=D[0],N=D[1];return r.a.createElement(p.a,{xs:12,className:dn()("p-3",{"bg-100":S&&_%2!==0})},r.a.createElement("div",{className:"p-1"},r.a.createElement(d.a,null,r.a.createElement(p.a,{sm:5,md:4},r.a.createElement("div",{className:"position-relative h-sm-100"},Object(M.k)(a)&&1===a.length&&r.a.createElement("img",{className:"img-fluid fit-cover w-sm-100 h-sm-100 rounded absolute-sm-centered",src:a[0].src||a[0].base64,alt:a[0].path}),Object(M.k)(a)&&a.length>1&&r.a.createElement(fn.a,v,a.map((function(e){return r.a.createElement("img",{className:"img-fluid fit-cover w-sm-100 h-sm-100 rounded",src:e.src||e.base64,alt:e.path})}))),j&&r.a.createElement(pn.a,{color:"success",pill:!0,className:"position-absolute t-0 r-0 mr-2 mt-2 fs--2 z-index-2"},"\u8fd0\u884c"))),r.a.createElement(p.a,{sm:7,md:8},r.a.createElement(d.a,null,r.a.createElement(p.a,{lg:8},r.a.createElement("h5",{className:"mt-3 mt-sm-0"},o),r.a.createElement("p",{className:"fs--1 mb-2 mb-md-3"},r.a.createElement("a",{className:"text-500",href:"#!"},c)),Object(M.k)(l)&&r.a.createElement("ul",{className:"list-unstyled d-none d-lg-block"},l.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(He.a,{icon:"circle",transform:"shrink-12"}),r.a.createElement("span",null,e))})))),r.a.createElement(p.a,{lg:4,tag:Ie.a,justify:"between",column:!0},r.a.createElement("div",null,r.a.createElement("h4",{className:"fs-1 fs-md-2 text-warning mb-0"},y("Instantaneous Efficiency VALUE UNIT",{VALUE:s,UNIT:"(kWh/kWh)"})),r.a.createElement("div",{className:"d-none d-lg-block"},r.a.createElement("p",{className:"fs--1 mb-1"},"\u7d2f\u8ba1\u6548\u7387:",r.a.createElement("strong",null,m," kW/kW")),r.a.createElement("p",{className:"fs--1 mb-1"},"\u603b\u77ac\u65f6\u529f\u7387:",r.a.createElement("strong",null,u," kW")),r.a.createElement("p",{className:"fs--1 mb-1"},"\u603b\u529f\u7387\u56e0\u6570:",r.a.createElement("strong",null,b)),r.a.createElement("p",{className:"fs--1 mb-1"},"\u6709\u529f\u529f\u7387:",r.a.createElement("strong",null,f," kW")),r.a.createElement("p",{className:"fs--1 mb-1"},"\u51b7\u51bb\u6c34\u51fa\u6c34\u6e29\u5ea6:",r.a.createElement("strong",null,g," degree C")),r.a.createElement("p",{className:"fs--1 mb-1"},"\u51b7\u51bb\u6c34\u56de\u6c34\u6e29\u5ea6:",r.a.createElement("strong",null,h," degree C")),r.a.createElement("p",{className:"fs--1 mb-1"},y("Communication Status"),":"," ",r.a.createElement("strong",{className:dn()({"text-success":O,"text-danger":!O})},y(O?"Communication Online":"Communication Offline"))),r.a.createElement("p",{className:"fs--1 mb-1"},y("Equipment Status"),":"," ",r.a.createElement("strong",{className:dn()({"text-success":j,"text-danger":!j})},y(j?"Equipment Running":"Equipment Stopped"))))),r.a.createElement("div",{className:"mt-md-2"},r.a.createElement(A.a,{color:j?"outline-danger":"outline-secondary",size:"sm",className:dn()("w-lg-100 mt-2 mr-2 mr-lg-0",{"border-300":!j}),icon:[j?"fas":"far","exclamation-triangle"],onClick:function(){return Y(j?{type:"REMOVE",id:t}:{type:"ADD",payload:{id:t}})}},y("Fault Alarms"),"(",E.length,")"),x?r.a.createElement(A.a,{color:"primary",size:"sm",icon:"circle-notch",iconClassName:"fa-spin ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",style:{cursor:"progress"},disabled:!0},"Processing"):r.a.createElement(A.a,{color:"primary",size:"sm",icon:"users",iconClassName:"ml-2 d-none d-md-inline-block",className:"w-lg-100 mt-2",onClick:function(){N(!0),setTimeout((function(){N(!1)}),1e3)}},y("Run Commands")))))))))};gn.defaultProps={isRunning:!1,isOnline:!1,files:[]};var hn=Object(P.a)()(gn),En=a(1023),On=function(e){var t=e.meta,a=e.handler,o=Object(n.useContext)($a.c).isRTL,i=t.total,c=t.pageNo,l=t.itemsPerPage,s=t.nextPageNo,m=t.prevPageNo,u=a.nextPage,d=a.prevPage,p=a.currentPage;return r.a.createElement(En.a,{tag:Ie.a,justify:"center",align:"center",className:"bg-light border-top"},r.a.createElement(O.a,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:d,disabled:!m},r.a.createElement(He.a,{icon:"chevron-".concat(o?"right":"left")})),Object(M.i)(i,l).map((function(e){return r.a.createElement(O.a,{color:c===e?"falcon-primary":"falcon-default",size:"sm",className:"ml-2",onClick:function(){return p(e)},key:e},e)})),r.a.createElement(O.a,{color:"falcon-default",size:"sm",className:"ml-1 ml-sm-2",onClick:u,disabled:!s},r.a.createElement(He.a,{icon:"chevron-".concat(o?"left":"right")})))},jn=a(1596),vn=a.n(jn),_n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=Object(n.useState)([]),r=Object(i.a)(a,2),o=r[0],c=r[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)(0),p=Object(i.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)(0),h=Object(i.a)(g,2),E=h[0],O=h[1],j=Object(n.useState)(t),v=Object(i.a)(j,2),_=v[0],y=v[1],S=Object(n.useState)(null),Y=Object(i.a)(S,2),T=Y[0],D=Y[1],x=Object(n.useState)(1),N=Object(i.a)(x,2),k=N[0],C=N[1],U=Object(n.useState)(_),P=Object(i.a)(U,2),R=P[0],F=P[1],H=Object(n.useState)(!0),A=Object(i.a)(H,2),I=A[0],w=A[1],B=Object(n.useState)(!0),G=Object(i.a)(B,2),V=G[0],L=G[1];Object(n.useEffect)((function(){c(Object(M.k)(m[T-1])?m[T-1]:[])}),[c,_,m,T]),Object(n.useEffect)((function(){u(vn()(e,_)),D(1),f(e.length)}),[_,D,e]),Object(n.useEffect)((function(){C(_*(T-1)+1),F(_*(T-1)+o.length),w(T>1?T-1:null),L(T<E?T+1:null)}),[_,T,o,E]),Object(n.useEffect)((function(){O(m.length)}),[m]);var J=function(){return D(T+1)},q=function(){return D(T-1)};return{data:o,meta:{total:b,pageNo:T,lastPageNo:E,itemsPerPage:_,from:k,to:R,nextPageNo:V,prevPageNo:I},handler:{nextPage:J,prevPage:q,currentPage:D,perPage:y}}},yn=a(1599),Sn=a.n(yn),Yn=a(1600),Tn=a.n(Yn),Dn=a(1601),xn=a.n(Dn),Nn=a(1602),kn=a.n(Nn),Cn=a(1603),Mn=a.n(Cn),Un=a(1604),Pn=a.n(Un),Rn=a(1605),Fn=a.n(Rn),Hn=a(1606),An=a.n(Hn),In=a(1607),wn=a.n(In),Bn=[{id:Fe()(),files:[{id:Fe()(),path:" product2",src:Tn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-01",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product1",src:Sn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-02",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product4",src:xn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-03",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product3",src:kn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-04",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product8",src:Mn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-05",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product6",src:Pn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-06",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product7",src:Fn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-07",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product5",src:An.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-08",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0},{id:Fe()(),files:[{id:Fe()(),path:" product9",src:wn.a}],title:"\u9ad8\u538b\u5236\u51b7\u673aCH-ZL-09",category:"\u6210\u90fd\u9879\u76ee/\u516c\u533a\u5546\u573a/\u7a7a\u8c03\u6c34\u7cfb\u7edf/\u51b7\u6c34\u673a\u7ec4",features:["Brand: York","Manufactured: 2011","Ton:  800 Ton","Model#:  YKK8K3H9-CUG","Serial#:  SNXM-143960","Type:  Water-Cooled","Compressor Type:  Centrifugal","Power:  460 Volts / 60 Hz / 3 Ph","Refrigerant:  R-134a"],parameter1:5.6,parameter2:6.7,parameter3:26.2,parameter4:.86,parameter5:24,parameter6:5,parameter7:25.1,alarms:["supply temperature is high","return temperature is low"],isOnline:!0,isRunning:!0}],Gn=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],S=_[1],Y=Object(n.useState)(void 0),T=Object(i.a)(Y,2),D=T[0],N=T[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),A=F[0],w=F[1],B=Object(n.useState)(!0),G=Object(i.a)(B,2),V=G[0],L=(G[1],Object(n.useState)(!0)),J=Object(i.a)(L,2),q=J[0];J[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){console.log(t),e?(t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),w(t),S([t[0]].map((function(e){return e.label}))),N([t[0]].map((function(e){return e.value})))):H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var z={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},K=Object(mn.a)(Bn).loading,W=_n(U,4),Z=W.data,X=W.meta,$=W.handler,Q=X.total,ee=X.itemsPerPage,te=X.from,ae=X.to,ne=$.perPage;Object(n.useEffect)((function(){P(Bn.map((function(e){return e.id})))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Monitoring")),r.a.createElement(l.a,{active:!0},o("Space Equipments")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(D)}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:"ls text-uppercase text-600 font-weight-semi-bold mb-0",for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:A,onChange:function(e,t){console.log(e,t),S(t.map((function(e){return e.label})).join("/")),N(e[e.length-1])},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:V},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:q}))))))),r.a.createElement(s.a,null,r.a.createElement(m.a,{className:dn()({"p-0  overflow-hidden":!0,"pb-0":!1})},K?r.a.createElement(Ge,null):r.a.createElement(d.a,{noGutters:!0},Object(M.k)(Bn)&&Bn.filter((function(e){return Z.includes(e.id)})).map((function(e,t){return r.a.createElement(hn,Object.assign({},e,{sliderSettings:z,key:e.id,index:t}))})))),r.a.createElement(On,{meta:X,handler:$})),r.a.createElement(s.a,{className:"mb-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{sm:"auto",className:"mb-2 mb-sm-0",tag:Ie.a,align:"center"},r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("Show Up to")),r.a.createElement(h.a,{id:"itemsPerPage",type:"select",bsSize:"sm",value:ee,onChange:function(e){var t=e.target;return ne(Number(t.value))}},r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:6},"6"),r.a.createElement("option",{value:Q},o("All"))),r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("FROM - TO of TOTAL Equipments",{FROM:te,TO:ae,TOTAL:Q})))))))}))),Vn=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],S=_[1],Y=Object(n.useState)(void 0),T=Object(i.a)(Y,2),D=T[0],N=T[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),A=F[0],w=F[1],B=Object(n.useState)([]),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)(void 0),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)(!0),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(!0),ee=Object(i.a)(Q,2),te=ee[0];ee[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),K(t),S([t[0]].map((function(e){return e.label}))),N([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var ae="ls text-uppercase text-600 font-weight-semi-bold mb-0",ne={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},re=Object(mn.a)(Bn).loading,oe=_n(V,4),ie=oe.data,ce=oe.meta,le=oe.handler,se=ce.total,me=ce.itemsPerPage,ue=ce.from,de=ce.to,pe=le.perPage;Object(n.useEffect)((function(){L(Bn.map((function(e){return e.id})))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Monitoring")),r.a.createElement(l.a,{active:!0},o("Combined Equipments")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(D),console.log(A)}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ae,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:z,onChange:function(e,t){S(t.map((function(e){return e.label})).join("/")),N(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/combinedequipments",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ae,for:"combinedEquipmentSelect"},o("Combined Equipment")),r.a.createElement(h.a,{type:"select",id:"combinedEquipmentSelect",name:"combinedEquipmentSelect",onChange:function(e){var t=e.target;return w(t.value)}},U.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:X},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:te}))))))),r.a.createElement(s.a,null,r.a.createElement(m.a,{className:dn()({"p-0  overflow-hidden":!0,"pb-0":!1})},re?r.a.createElement(Ge,null):r.a.createElement(d.a,{noGutters:!0},Object(M.k)(Bn)&&Bn.filter((function(e){return ie.includes(e.id)})).map((function(e,t){return r.a.createElement(hn,Object.assign({},e,{sliderSettings:ne,key:e.id,index:t}))})))),r.a.createElement(On,{meta:ce,handler:le})),r.a.createElement(s.a,{className:"mb-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{sm:"auto",className:"mb-2 mb-sm-0",tag:Ie.a,align:"center"},r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("Show Up to")),r.a.createElement(h.a,{id:"itemsPerPage",type:"select",bsSize:"sm",value:me,onChange:function(e){var t=e.target;return pe(Number(t.value))}},r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:6},"6"),r.a.createElement("option",{value:se},o("All"))),r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("FROM - TO of TOTAL Equipments",{FROM:ue,TO:de,TOTAL:se})))))))}))),Ln=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],S=_[1],Y=Object(n.useState)(void 0),T=Object(i.a)(Y,2),D=T[0],N=T[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),A=F[0],w=F[1],B=Object(n.useState)([]),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)(void 0),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)(!0),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(!0),ee=Object(i.a)(Q,2),te=ee[0];ee[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),K(t),S([t[0]].map((function(e){return e.label}))),N([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var ae="ls text-uppercase text-600 font-weight-semi-bold mb-0",ne={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},re=Object(mn.a)(Bn).loading,oe=_n(V,4),ie=oe.data,ce=oe.meta,le=oe.handler,se=ce.total,me=ce.itemsPerPage,ue=ce.from,de=ce.to,pe=le.perPage;Object(n.useEffect)((function(){L(Bn.map((function(e){return e.id})))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Monitoring")),r.a.createElement(l.a,{active:!0},o("Tenant Equipments")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(D),console.log(A)}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ae,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:z,onChange:function(e,t){S(t.map((function(e){return e.label})).join("/")),N(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/tenants",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ae,for:"tenantSelect"},o("Tenant")),r.a.createElement(h.a,{type:"select",id:"tenantSelect",name:"tenantSelect",onChange:function(e){var t=e.target;return w(t.value)}},U.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:X},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:te}))))))),r.a.createElement(s.a,null,r.a.createElement(m.a,{className:dn()({"p-0  overflow-hidden":!0,"pb-0":!1})},re?r.a.createElement(Ge,null):r.a.createElement(d.a,{noGutters:!0},Object(M.k)(Bn)&&Bn.filter((function(e){return ie.includes(e.id)})).map((function(e,t){return r.a.createElement(hn,Object.assign({},e,{sliderSettings:ne,key:e.id,index:t}))})))),r.a.createElement(On,{meta:ce,handler:le})),r.a.createElement(s.a,{className:"mb-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{sm:"auto",className:"mb-2 mb-sm-0",tag:Ie.a,align:"center"},r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("Show Up to")),r.a.createElement(h.a,{id:"itemsPerPage",type:"select",bsSize:"sm",value:me,onChange:function(e){var t=e.target;return pe(Number(t.value))}},r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:6},"6"),r.a.createElement("option",{value:se},o("All"))),r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("FROM - TO of TOTAL Equipments",{FROM:ue,TO:de,TOTAL:se})))))))}))),Jn=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],S=_[1],Y=Object(n.useState)(void 0),T=Object(i.a)(Y,2),D=T[0],N=T[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),A=(F[0],F[1]),w=Object(n.useState)([]),B=Object(i.a)(w,2),G=B[0],V=B[1],L=Object(n.useState)(void 0),J=Object(i.a)(L,2),q=J[0],z=J[1],K=Object(n.useState)(!0),W=Object(i.a)(K,2),Z=W[0],X=W[1],$=Object(n.useState)(!0),Q=Object(i.a)($,2),ee=Q[0];Q[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),z(t),S([t[0]].map((function(e){return e.label}))),N([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(A(e[0][0].value),X(!1)):(A(void 0),X(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var te="ls text-uppercase text-600 font-weight-semi-bold mb-0",ae={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},ne=Object(mn.a)(Bn).loading,re=_n(G,4),oe=re.data,ie=re.meta,ce=re.handler,le=ie.total,se=ie.itemsPerPage,me=ie.from,ue=ie.to,de=ce.perPage;Object(n.useEffect)((function(){V(Bn.map((function(e){return e.id})))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Monitoring")),r.a.createElement(l.a,{active:!0},o("Store Equipments")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(D)}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:te,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:q,onChange:function(e,t){S(t.map((function(e){return e.label})).join("/")),N(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/stores",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(A(e[0][0].value),X(!1)):(A(void 0),X(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:te,for:"storeSelect"},o("Store")),r.a.createElement(h.a,{type:"select",id:"storeSelect",name:"storeSelect",onChange:function(e){var t=e.target;return A(t.value)}},U.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:Z},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:ee}))))))),r.a.createElement(s.a,null,r.a.createElement(m.a,{className:dn()({"p-0  overflow-hidden":!0,"pb-0":!1})},ne?r.a.createElement(Ge,null):r.a.createElement(d.a,{noGutters:!0},Object(M.k)(Bn)&&Bn.filter((function(e){return oe.includes(e.id)})).map((function(e,t){return r.a.createElement(hn,Object.assign({},e,{sliderSettings:ae,key:e.id,index:t}))})))),r.a.createElement(On,{meta:ie,handler:ce})),r.a.createElement(s.a,{className:"mb-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{sm:"auto",className:"mb-2 mb-sm-0",tag:Ie.a,align:"center"},r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("Show Up to")),r.a.createElement(h.a,{id:"itemsPerPage",type:"select",bsSize:"sm",value:se,onChange:function(e){var t=e.target;return de(Number(t.value))}},r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:6},"6"),r.a.createElement("option",{value:le},o("All"))),r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("FROM - TO of TOTAL Equipments",{FROM:me,TO:ue,TOTAL:le})))))))}))),qn=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t;Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var v=Object(n.useState)(void 0),_=Object(i.a)(v,2),y=_[0],S=_[1],Y=Object(n.useState)(void 0),T=Object(i.a)(Y,2),D=T[0],N=T[1],k=Object(n.useState)([]),C=Object(i.a)(k,2),U=C[0],P=C[1],R=Object(n.useState)(void 0),F=Object(i.a)(R,2),A=F[0],w=F[1],B=Object(n.useState)([]),G=Object(i.a)(B,2),V=G[0],L=G[1],J=Object(n.useState)(void 0),q=Object(i.a)(J,2),z=q[0],K=q[1],W=Object(n.useState)(!0),Z=Object(i.a)(W,2),X=Z[0],$=Z[1],Q=Object(n.useState)(!0),ee=Object(i.a)(Q,2),te=ee[0];ee[1];Object(n.useEffect)((function(){var e=!1;fetch(I.a+"/spaces/tree",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(t){return console.log(t),t.ok&&(e=!0),t.json()})).then((function(t){if(console.log(t),e){t=JSON.parse(JSON.stringify([t]).split('"id":').join('"value":').split('"name":').join('"label":')),K(t),S([t[0]].map((function(e){return e.label}))),N([t[0]].map((function(e){return e.value})));var a=!1;fetch(I.a+"/spaces/"+[t[0]].map((function(e){return e.value}))+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))}else H.c.error(t.description)})).catch((function(e){console.log(e)}))}),[]);var ae="ls text-uppercase text-600 font-weight-semi-bold mb-0",ne={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},re=Object(mn.a)(Bn).loading,oe=_n(V,4),ie=oe.data,ce=oe.meta,le=oe.handler,se=ce.total,me=ce.itemsPerPage,ue=ce.from,de=ce.to,pe=le.perPage;Object(n.useEffect)((function(){L(Bn.map((function(e){return e.id})))}),[]);return r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.a,null,r.a.createElement(l.a,null,o("Monitoring")),r.a.createElement(l.a,{active:!0},o("Shopfloor Equipments")))),r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(D),console.log(A)}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:6,sm:3},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:ae,for:"space"},o("Space")),r.a.createElement("br",null),r.a.createElement(x.a,{options:z,onChange:function(e,t){S(t.map((function(e){return e.label})).join("/")),N(e[e.length-1]);var a=!1;fetch(I.a+"/spaces/"+e[e.length-1]+"/shopfloors",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(a=!0),e.json()})).then((function(e){a?(e=JSON.parse(JSON.stringify([e]).split('"id":').join('"value":').split('"name":').join('"label":')),console.log(e),P(e[0]),e[0].length>0?(w(e[0][0].value),$(!1)):(w(void 0),$(!0))):H.c.error(e.description)})).catch((function(e){console.log(e)}))},changeOnSelect:!0,expandTrigger:"hover"},r.a.createElement(g.a,{value:y||"",readOnly:!0})))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement(f.a,{className:ae,for:"shopfloorSelect"},o("Shopfloor")),r.a.createElement(h.a,{type:"select",id:"shopfloorSelect",name:"shopfloorSelect",onChange:function(e){var t=e.target;return w(t.value)}},U.map((function(e,t){return r.a.createElement("option",{value:e.value,key:e.value},e.label)}))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:X},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:te}))))))),r.a.createElement(s.a,null,r.a.createElement(m.a,{className:dn()({"p-0  overflow-hidden":!0,"pb-0":!1})},re?r.a.createElement(Ge,null):r.a.createElement(d.a,{noGutters:!0},Object(M.k)(Bn)&&Bn.filter((function(e){return ie.includes(e.id)})).map((function(e,t){return r.a.createElement(hn,Object.assign({},e,{sliderSettings:ne,key:e.id,index:t}))})))),r.a.createElement(On,{meta:ce,handler:le})),r.a.createElement(s.a,{className:"mb-3"},r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"justify-content-between align-items-center"},r.a.createElement(p.a,{sm:"auto",className:"mb-2 mb-sm-0",tag:Ie.a,align:"center"},r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("Show Up to")),r.a.createElement(h.a,{id:"itemsPerPage",type:"select",bsSize:"sm",value:me,onChange:function(e){var t=e.target;return pe(Number(t.value))}},r.a.createElement("option",{value:2},"2"),r.a.createElement("option",{value:4},"4"),r.a.createElement("option",{value:6},"6"),r.a.createElement("option",{value:se},o("All"))),r.a.createElement("h6",{className:"mb-0 text-nowrap ml-2"},o("FROM - TO of TOTAL Equipments",{FROM:ue,TO:de,TOTAL:se})))))))}))),zn=a(36),Kn=a(1621),Wn=function(e){var t=e.month,a=e.day;return r.a.createElement("div",{className:"calendar"},r.a.createElement("span",{className:"calendar-month"},t),r.a.createElement("span",{className:"calendar-day"},a))},Zn=["text"],Xn=function(e){var t=e.text,a=Object(zn.a)(e,Zn);return r.a.createElement(pn.a,a,t)},$n=function(e){var t,a,n=e.calendar,o=e.title,i=e.badge,c=e.divider,l=e.to,s=e.children,m=e.file_bytes_base64;return r.a.createElement(ke.a,null,r.a.createElement(Wn,n),r.a.createElement(ke.a,{body:!0,className:"position-relative pl-3"},r.a.createElement("h6",{className:"fs-0 mb-0"},r.a.createElement(Ae.b,{to:l,onClick:(t=o,a=m,function(e){e.preventDefault(),fetch("data:application/*;base64,"+a).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:"application/*"}),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))})},o)," ",i&&r.a.createElement(Xn,Object.assign({},i,{className:"ml-1"}))),s,c&&r.a.createElement("hr",{className:"border-dashed border-bottom-0"})))};$n.defaultProps={divider:!0};var Qn=$n,er=a(46),tr=["additional"],ar=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,c=T()();Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),o=Object(M.e)("user_uuid"),i=Object(M.e)("token");null!==e&&e?(Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",o,288e5),Object(M.d)("token",i,288e5)):(a("/authentication/basic/login"),t(!0))}));var l=Object(n.useState)(c.clone().startOf("month")),g=Object(i.a)(l,2),h=g[0],v=g[1],_=Object(n.useState)(c),y=Object(i.a)(_,2),Y=y[0],D=y[1],x=Object(n.useState)(!1),N=Object(i.a)(x,2),k=N[0],C=N[1],U=Object(n.useState)(!0),P=Object(i.a)(U,2),R=P[0],F=P[1],A=Object(n.useState)([]),w=Object(i.a)(A,2),B=w[0],G=w[1],V="ls text-uppercase text-600 font-weight-semi-bold mb-0";return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{className:"bg-light mb-3"},r.a.createElement(m.a,{className:"p-3"},r.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),console.log("handleSubmit"),console.log(h.format("YYYY-MM-DDTHH:mm:ss")),console.log(Y.format("YYYY-MM-DDTHH:mm:ss")),C(!0),F(!1);var t=!1;fetch(I.a+"/reports/advancedreports?reportingperiodstartdatetime="+h.format("YYYY-MM-DDTHH:mm:ss")+"&reportingperiodenddatetime="+Y.format("YYYY-MM-DDTHH:mm:ss"),{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(t=!0),e.json()})).then((function(e){if(t){console.log(e);var a=[];e.length>0&&e.forEach((function(t,n){var r={};r.id=e[n].id,r.calendar={month:e[n].create_datetime_local.substring(5,7),day:e[n].create_datetime_local.substring(8,10)},r.title=e[n].file_name+"."+e[n].file_type,r.additional=o("Created Datetime")+": "+e[n].create_datetime_local+"<br/>"+o("File Size")+": "+(e[n].file_size_bytes/1048576).toFixed(2)+" MB",r.to="#",r.file_bytes_base64=e[n].file_bytes_base64,a.push(r)})),G(a),C(!1),F(!0)}else H.c.error(e.description)})).catch((function(e){console.log(e)}))}},r.a.createElement(d.a,{form:!0},r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:V,for:"reportingPeriodBeginsDatetime"},o("Reporting Period Begins")),r.a.createElement(S.a,{id:"reportingPeriodBeginsDatetime",value:h,onChange:function(e){v(e)},isValidDate:function(e){return e.isBefore(T()(Y,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,{className:"form-group"},r.a.createElement(f.a,{className:V,for:"reportingPeriodEndsDatetime"},o("Reporting Period Ends")),r.a.createElement(S.a,{id:"reportingPeriodEndsDatetime",value:Y,onChange:function(e){D(e)},isValidDate:function(e){return e.isAfter(T()(h,"MM/DD/YYYY, hh:mm:ss a"))},closeOnSelect:!0}))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(E.a,{id:"submit"},r.a.createElement(O.a,{color:"success",disabled:k},o("Submit"))))),r.a.createElement(p.a,{xs:"auto"},r.a.createElement(b.a,null,r.a.createElement("br",null),r.a.createElement(j.a,{color:"primary",hidden:R}))))))),r.a.createElement(s.a,null,r.a.createElement(er.a,{title:o("Advanced Reporting")}),r.a.createElement(m.a,{className:"fs--1"},Object(M.k)(B)?r.a.createElement(d.a,null,B.map((function(e,t){var a=e.additional,n=Object(zn.a)(e,tr);return r.a.createElement(p.a,{md:6,className:"h-100",key:t},r.a.createElement(Qn,Object.assign({divider:B.length!==t+1},n),r.a.createElement("p",{className:"text-1000 mb-0",dangerouslySetInnerHTML:Object(Ht.a)(a)})))}))):r.a.createElement(Kn.a,{color:"info",className:"mb-0"},o("No data found")))))}))),nr=["text"],rr=function(e){var t=e.text,a=Object(zn.a)(e,nr);return r.a.createElement(pn.a,a,t)},or=function(e){var t,a,n=e.calendar,o=e.title,i=e.badge,c=e.divider,l=e.to,s=e.children,m=e.file_bytes_base64;return r.a.createElement(ke.a,null,r.a.createElement(Wn,n),r.a.createElement(ke.a,{body:!0,className:"position-relative pl-3"},r.a.createElement("h6",{className:"fs-0 mb-0"},r.a.createElement(Ae.b,{to:l,onClick:(t=o,a=m,function(e){e.preventDefault(),fetch("data:application/*;base64,"+a).then((function(e){return e.blob()})).then((function(e){var a=window.document.createElement("a");a.href=window.URL.createObjectURL(e,{type:"application/*"}),a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}))})},o)," ",i&&r.a.createElement(rr,Object.assign({},i,{className:"ml-1"}))),s,c&&r.a.createElement("hr",{className:"border-dashed border-bottom-0"})))};or.defaultProps={divider:!0};var ir=or,cr=["additional"],lr=Object(P.a)()(Object(U.a)((function(e){var t=e.setRedirect,a=e.setRedirectUrl,o=e.t,c=Object(n.useState)(!1),l=Object(i.a)(c,2),u=l[0],b=l[1],f=Object(n.useState)([]),g=Object(i.a)(f,2),h=g[0],E=g[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),_=v[0],y=v[1];return Object(n.useEffect)((function(){var e=Object(M.e)("is_logged_in"),n=Object(M.e)("user_name"),r=Object(M.e)("user_display_name"),i=Object(M.e)("user_uuid"),c=Object(M.e)("token");if(null!==e&&e){Object(M.d)("is_logged_in",!0,288e5),Object(M.d)("user_name",n,288e5),Object(M.d)("user_display_name",r,288e5),Object(M.d)("user_uuid",i,288e5),Object(M.d)("token",c,288e5);var l=!1;u||fetch(I.a+"/knowledgefiles",{method:"GET",headers:{"Content-type":"application/json","User-UUID":Object(M.e)("user_uuid"),Token:Object(M.e)("token")},body:null}).then((function(e){return e.ok&&(l=!0),e.json()})).then((function(e){if(l){console.log(e),b(!0);var t=[];e.length>0&&e.forEach((function(a,n){var r={};r.id=e[n].id,r.calendar={month:e[n].upload_datetime_local.substring(5,7),day:e[n].upload_datetime_local.substring(8,10)},r.title=e[n].file_name,r.additional=o("Created Datetime")+": "+e[n].upload_datetime_local+"<br/>"+o("File Size")+": "+(e[n].file_size_bytes/1048576).toFixed(2)+" MB",r.to="#",r.file_bytes_base64=e[n].file_bytes_base64,t.push(r)})),E(t),y(!0)}}))}else a("/authentication/basic/login"),t(!0)})),r.a.createElement(s.a,null,r.a.createElement(er.a,{title:o("Knowledge Base")}),r.a.createElement(m.a,{className:"fs--1"},r.a.createElement(j.a,{color:"primary",hidden:_}),Object(M.k)(h)?r.a.createElement(d.a,null,h.map((function(e,t){var a=e.additional,n=Object(zn.a)(e,cr);return r.a.createElement(p.a,{md:6,className:"h-100",key:t},r.a.createElement(ir,Object.assign({divider:h.length!==t+1},n),r.a.createElement("p",{className:"text-1000 mb-0",dangerouslySetInnerHTML:Object(Ht.a)(a)})))}))):r.a.createElement(Kn.a,{color:"info",className:"mb-0"},o("No data found"))))}))),sr=a(1608);t.default=function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/space/energycategory",exact:!0,component:G}),r.a.createElement(o.b,{path:"/space/energyitem",exact:!0,component:J}),r.a.createElement(o.b,{path:"/space/cost",exact:!0,component:K}),r.a.createElement(o.b,{path:"/space/output",exact:!0,component:X}),r.a.createElement(o.b,{path:"/space/income",exact:!0,component:ee}),r.a.createElement(o.b,{path:"/space/efficiency",exact:!0,component:ae}),r.a.createElement(o.b,{path:"/space/load",exact:!0,component:re}),r.a.createElement(o.b,{path:"/space/statistics",exact:!0,component:ie}),r.a.createElement(o.b,{path:"/space/saving",exact:!0,component:se}),r.a.createElement(o.b,{path:"/equipment/batch",exact:!0,component:ue}),r.a.createElement(o.b,{path:"/equipment/cost",exact:!0,component:pe}),r.a.createElement(o.b,{path:"/equipment/efficiency",exact:!0,component:fe}),r.a.createElement(o.b,{path:"/equipment/energycategory",exact:!0,component:he}),r.a.createElement(o.b,{path:"/equipment/energyitem",exact:!0,component:Oe}),r.a.createElement(o.b,{path:"/equipment/income",exact:!0,component:ve}),r.a.createElement(o.b,{path:"/equipment/load",exact:!0,component:ye}),r.a.createElement(o.b,{path:"/equipment/output",exact:!0,component:Ye}),r.a.createElement(o.b,{path:"/equipment/saving",exact:!0,component:De}),r.a.createElement(o.b,{path:"/equipment/statistics",exact:!0,component:Ne}),r.a.createElement(o.b,{path:"/equipment/tracking",exact:!0,component:we}),r.a.createElement(o.b,{path:"/meter/meterenergy",exact:!0,component:Le}),r.a.createElement(o.b,{path:"/meter/metercost",exact:!0,component:qe}),r.a.createElement(o.b,{path:"/meter/metertrend",exact:!0,component:Ke}),r.a.createElement(o.b,{path:"/meter/meterrealtime",exact:!0,component:dt}),r.a.createElement(o.b,{path:"/meter/metersubmetersbalance",exact:!0,component:bt}),r.a.createElement(o.b,{path:"/meter/offlinemeterenergy",exact:!0,component:gt}),r.a.createElement(o.b,{path:"/meter/offlinemetercost",exact:!0,component:Et}),r.a.createElement(o.b,{path:"/meter/virtualmeterenergy",exact:!0,component:jt}),r.a.createElement(o.b,{path:"/meter/virtualmetercost",exact:!0,component:_t}),r.a.createElement(o.b,{path:"/meter/tracking",exact:!0,component:yt}),r.a.createElement(o.b,{path:"/tenant/energycategory",exact:!0,component:Yt}),r.a.createElement(o.b,{path:"/tenant/energyitem",exact:!0,component:Dt}),r.a.createElement(o.b,{path:"/tenant/cost",exact:!0,component:Nt}),r.a.createElement(o.b,{path:"/tenant/load",exact:!0,component:Ct}),r.a.createElement(o.b,{path:"/tenant/statistics",exact:!0,component:Ut}),r.a.createElement(o.b,{path:"/tenant/saving",exact:!0,component:Rt}),r.a.createElement(o.b,{path:"/tenant/bill",exact:!0,component:Vt}),r.a.createElement(o.b,{path:"/tenant/batch",exact:!0,component:Jt}),r.a.createElement(o.b,{path:"/store/energycategory",exact:!0,component:zt}),r.a.createElement(o.b,{path:"/store/energyitem",exact:!0,component:Wt}),r.a.createElement(o.b,{path:"/store/cost",exact:!0,component:Xt}),r.a.createElement(o.b,{path:"/store/load",exact:!0,component:Qt}),r.a.createElement(o.b,{path:"/store/statistics",exact:!0,component:ta}),r.a.createElement(o.b,{path:"/store/saving",exact:!0,component:na}),r.a.createElement(o.b,{path:"/store/batch",exact:!0,component:oa}),r.a.createElement(o.b,{path:"/shopfloor/energycategory",exact:!0,component:ca}),r.a.createElement(o.b,{path:"/shopfloor/energyitem",exact:!0,component:sa}),r.a.createElement(o.b,{path:"/shopfloor/cost",exact:!0,component:ua}),r.a.createElement(o.b,{path:"/shopfloor/load",exact:!0,component:pa}),r.a.createElement(o.b,{path:"/shopfloor/statistics",exact:!0,component:fa}),r.a.createElement(o.b,{path:"/shopfloor/saving",exact:!0,component:ha}),r.a.createElement(o.b,{path:"/shopfloor/batch",exact:!0,component:Oa}),r.a.createElement(o.b,{path:"/combinedequipment/batch",exact:!0,component:va}),r.a.createElement(o.b,{path:"/combinedequipment/cost",exact:!0,component:Sa}),r.a.createElement(o.b,{path:"/combinedequipment/efficiency",exact:!0,component:Ta}),r.a.createElement(o.b,{path:"/combinedequipment/energycategory",exact:!0,component:Na}),r.a.createElement(o.b,{path:"/combinedequipment/energyitem",exact:!0,component:Ma}),r.a.createElement(o.b,{path:"/combinedequipment/income",exact:!0,component:Aa}),r.a.createElement(o.b,{path:"/combinedequipment/load",exact:!0,component:Ra}),r.a.createElement(o.b,{path:"/combinedequipment/output",exact:!0,component:Ba}),r.a.createElement(o.b,{path:"/combinedequipment/saving",exact:!0,component:La}),r.a.createElement(o.b,{path:"/combinedequipment/statistics",exact:!0,component:za}),r.a.createElement(o.b,{path:"/auxiliarysystem/energyflowdiagram",exact:!0,component:Qa}),r.a.createElement(o.b,{path:"/auxiliarysystem/distributionsystem",exact:!0,component:an}),r.a.createElement(o.b,{path:"/fdd/combinedequipment",exact:!0,component:nn.a}),r.a.createElement(o.b,{path:"/fdd/equipment",exact:!0,component:rn.a}),r.a.createElement(o.b,{path:"/fdd/space",exact:!0,component:on.a}),r.a.createElement(o.b,{path:"/fdd/tenant",exact:!0,component:cn.a}),r.a.createElement(o.b,{path:"/fdd/store",exact:!0,component:ln.a}),r.a.createElement(o.b,{path:"/fdd/shopfloor",exact:!0,component:sn.a}),r.a.createElement(o.b,{path:"/monitoring/spaceequipments",exact:!0,component:Gn}),r.a.createElement(o.b,{path:"/monitoring/combinedequipments",exact:!0,component:Vn}),r.a.createElement(o.b,{path:"/monitoring/tenantequipments",exact:!0,component:Ln}),r.a.createElement(o.b,{path:"/monitoring/storeequipments",exact:!0,component:Jn}),r.a.createElement(o.b,{path:"/monitoring/shopfloorequipments",exact:!0,component:qn}),r.a.createElement(o.b,{path:"/advancedreporting",exact:!0,component:ar}),r.a.createElement(o.b,{path:"/knowledgebase",exact:!0,component:lr}),r.a.createElement(o.b,{path:"/notification",exact:!0,component:sr.a}),r.a.createElement(o.a,{to:"/errors/404"}))}}}]);
//# sourceMappingURL=14.5b9d2b7b.chunk.js.map